(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{270:function(e,t,a){e.exports=a.p+"static/media/Chimera_01-01.71e6b608.svg"},313:function(e,t,a){e.exports=a(534)},324:function(e,t,a){},341:function(e,t,a){},345:function(e,t,a){},520:function(e,t,a){},521:function(e,t,a){},522:function(e,t,a){},523:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){},529:function(e,t,a){},530:function(e,t,a){},531:function(e,t,a){},532:function(e,t,a){},533:function(e,t,a){},534:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a.n(o),i=a(44),l=a(20),s=a(250),u=a(178),d=a(251),m=a(252),f=a.n(m),p=a(39),h=a(25);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y={token:"",error:null,loading:!1,admin:!1,balance:0,id:0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return function(e,t){return E({},e,{error:null,loading:!0})}(e);case"AUTH_FAIL":return function(e,t){return E({},e,{error:t.error,loading:!1})}(e,t);case"AUTH_SUCCESS":return function(e,t){return E({},e,{error:null,loading:!1,token:t.token,id:t.id,email:t.email,username:t.username,admin:t.is_staff,balance:t.balance})}(e,t);case"AUTH_SET_TOKEN":return function(e,t){return E({},e,{token:t.token})}(e,t);case"ADMIN_UPDATE_BALANCE":return function(e,t){return E({},e,{balance:parseFloat(t.balance)})}(e,t);case"AUTH_LOGOUT":return E({},y);default:return e}},S=a(31);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var C={users:[],editing:!1,editingThis:"",adding:!1},k=function(e,t){var a=e.users.map(function(e){return e.url===t.data.url?t.data:e});return v({},e,{users:a})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"USERS_GET_LIST":return function(e,t){return v({},e,{users:t.users})}(e,t);case"USERS_GET_ONE":case"USERS_EDIT_SUCCESS":case"USERS_ARCHIVE_SUCCESS":return k(e,t);case"USERS_REMOVE_SUCCESS":return function(e,t){var a=e.users.filter(function(e){return e.url!==t.url});return v({},e,{users:a})}(e,t);case"USERS_BEGIN_EDIT":return function(e,t){return v({},e,{editing:!0,editingThis:t.email})}(e,t);case"USERS_END_EDIT":return function(e){return v({},e,{editing:!1})}(e);case"USERS_BEGIN_ADD":return function(e){return v({},e,{adding:!0})}(e);case"USERS_END_ADD":return function(e){return v({},e,{adding:!1})}(e);case"USERS_ADD_SUCCESS":return function(e,t){return v({},e,{users:[].concat(Object(S.a)(e.users),[t.user])})}(e,t);case"USERS_UPDATE_USER":return k(e,t);case"AUTH_LOGOUT":return v({},C);default:return e}};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var T=new Date,j=new Date((new Date).setDate(T.getDate()-6)),A={transactions:[],clients:[],editing:!1,editingThis:0,adding:!1,editData:{},filters:{partners:[],types:[],client:"",fromDate:new Date(j.setHours(0,0,0,0)),toDate:new Date(T.setHours(23,59,59,0))},allPartnersSelected:!0,allTypesSelected:!0},N=function(e,t){var a=e.transactions.map(function(e){return e.url===t.data.url?t.data:e});return w({},e,{transactions:a})},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRANSACTIONS_GET_LIST":return function(e,t){return w({},e,{transactions:t.transactions})}(e,t);case"TRANSACTIONS_EDIT_SUCCESS":case"TRANSACTIONS_ARCHIVE_SUCCESS":return N(e,t);case"TRANSACTIONS_REMOVE_SUCCESS":return function(e,t){var a=e.transactions.filter(function(e){return e.id!==t.id});return w({},e,{transactions:a})}(e,t);case"TRANSACTIONS_BEGIN_EDIT":return function(e,t){return w({},e,{editing:!0,editData:t.transaction})}(e,t);case"TRANSACTIONS_END_EDIT":return function(e){return w({},e,{editing:!1})}(e);case"TRANSACTIONS_BEGIN_ADD":return function(e){return w({},e,{adding:!0})}(e);case"TRANSACTIONS_END_ADD":return function(e){return w({},e,{adding:!1})}(e);case"TRANSACTIONS_ADD_SUCCESS":return function(e,t){return w({},e,{transactions:[t.transaction].concat(Object(S.a)(e.transactions))})}(e,t);case"TRANSACTIONS_SET_FILTER":return function(e,t){return w({},e,{filters:w({},e.filters,Object(h.a)({},t.filter,t.value))})}(e,t);case"TRANSACTIONS_SET_ALL_PARTNERS_SELECTED":return function(e,t){return w({},e,{allPartnersSelected:t.allPartnersSelected})}(e,t);case"TRANSACTIONS_SET_ALL_TYPES_SELECTED":return function(e,t){return w({},e,{allTypesSelected:t.allTypesSelected})}(e,t);case"TRANSACTIONS_GET_CLIENTS_LIST":return function(e,t){return w({},e,{clients:t.clients.map(function(e){return e.client_name})})}(e,t);case"AUTH_LOGOUT":return w({},A);default:return e}};function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I={menu:"0"},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SYSTEM_SET_SELECTED_MENU":return function(e,t){return x({},e,{menu:t.selected})}(e,t);case"AUTH_LOGOUT":return x({},I);default:return e}};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var F={filters:{fromDate:(new Date).setDate(1),toDate:new Date,partner:0,alltime:!1},data:[]},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DASHBOARD_GET_DATA":return function(e,t){return L({},e,{data:t.data})}(e,t);case"DASHBOARD_SET_FILTER":return function(e,t){return L({},e,{filters:L({},e.filters,Object(h.a)({},t.filter,t.value))})}(e,t);case"AUTH_LOGOUT":return L({},F);default:return e}};function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var B={filters:{fromDate:(new Date).setDate(1),toDate:new Date,message:""},logs:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGS_GET_DATA":return function(e,t){return H({},e,{logs:t.data})}(e,t);case"LOGS_SET_FILTER":return function(e,t){return H({},e,{filters:H({},e.filters,Object(h.a)({},t.filter,t.value))})}(e,t);case"AUTH_LOGOUT":return H({},B);case"LOGS_REMOVE":return function(e,t){return H({},e,{logs:e.logs.filter(function(e){return e.id!==t.id})})}(e,t);default:return e}},V=Object(i.c)({auth:g,users:D,transactions:P,system:W,dashboard:M,logs:G}),K=(a(324),a(66)),$=a(593),Y=a(129),Z=a(255),J=a(589),q=a(274),Q=a(592),X=a(19),ee=a.n(X),te=a(14),ae=a.n(te),ne="USER_ADD",re="USER_REMOVE",oe="USER_UPDATE",ce="USER_DEACTIVATE",ie="USER_ACTIVATE",le="TRANSACTION_ADD",se="TRANSACTION_REMOVE",ue=function(e,t,a){return function(n,r){var o="Bearer "+r().auth.token;ee.a.post("https://api.chimera-finance.com/api/logs/",{user:e,log_type:t,message:a},{headers:{Authorization:o}}).then(function(e){n({type:"LOGS_ADD",data:e.data})}).catch(function(e){console.log(e),e.response&&e.response&&401===e.response.status&&n(ve)})}},de=function(){return function(e,t){var a=t(),n=a.auth,r=n.token,o=n.admin,c=a.transactions,i=c.allTypesSelected,l=c.filters,s=l.client,u=l.types,d=l.partners,m=l.fromDate,f=l.toDate,p="?from=".concat(new Date(m).toLocaleDateString("it-IT"),"&to=").concat(new Date(f).toLocaleDateString("it-IT"),"&");s&&(p+="client=".concat(s,"&")),i||(p+="types=".concat(u,"&,")),o&&(p+="partners=".concat(d,"&,"));var h="Bearer "+r;!u.length||o&&!d.length?e({type:"TRANSACTIONS_GET_LIST",transactions:[]}):ee.a.get("https://api.chimera-finance.com/api/transactions/".concat(p),{headers:{Authorization:h}}).then(function(t){var a=t.data;e({type:"TRANSACTIONS_GET_LIST",transactions:a})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(ve)})}};function me(e){var t;return e?(t=e.split("/"))[t.length-2]:0}function fe(e){return e[0].toUpperCase()+e.toLowerCase().slice(1).replace(/[_.]/," ")}function pe(e){return e.toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric"})}function he(e){return Math.round(100*e+Number.EPSILON)/100}ae.a.register("locale","al",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},currency:{symbol:"\u20ac"}});var be=function(){return function(e,t){var a="Bearer "+t().auth.token;ee.a.get("https://api.chimera-finance.com/api/users/",{headers:{Authorization:a}}).then(function(t){e({type:"USERS_GET_LIST",users:t.data})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(ve)})}},Ee=function(e){return function(t,a){var n=a().auth.token;ee.a.get("https://api.chimera-finance.com/api/users/".concat(e,"/"),{headers:{Authorization:"Bearer "+n}}).then(function(e){t({type:"USERS_GET_ONE",data:e.data})}).catch(function(e){console.log(e)})}},ye=function(){return function(e,t){var a=t().auth,n=a.token,r=a.id;ee.a.get("https://api.chimera-finance.com/api/users/".concat(r,"/"),{headers:{Authorization:"Bearer "+n}}).then(function(t){e({type:"ADMIN_UPDATE_BALANCE",balance:t.data.partner_data.balance})}).catch(function(e){console.log(e)})}},ge=function(e,t,a,n,r,o){return{type:"AUTH_SUCCESS",token:e,id:t,email:a,username:n,is_staff:r,balance:o}},Se=function(e){return{type:"AUTH_FAIL",error:e}},Oe=function(e){return{type:"AUTH_SET_TOKEN",token:e}},ve=function(){return function(e){ee.a.post("https://api.chimera-finance.com/api/auth/logout/").then(function(){e({type:"AUTH_LOGOUT"}),window.persistor.flush(),window.persistor.purge()}).catch(function(e){console.log(e.message)})}},Ce=function(e){return function(t){t({type:"SYSTEM_SET_SELECTED_MENU",selected:e})}};a(341);var ke=Object(l.b)(function(e){return{token:e.auth.token,admin:e.auth.admin,menu:e.system.menu,username:e.auth.username}},function(e){return{logOut:function(){return e(ve())},setMenu:function(t){return e(Ce(t))},refreshToken:function(){return e(function(e,t){var a=t().auth.token;ee.a.post("https://api.chimera-finance.com/api/auth-jwt-refresh/",{token:a}).then(function(t){e(Oe(t.data.token))}).catch(function(t){console.log("refresh token error "+t),e(ve())})})}}})(function(e){var t=e.logOut,a=e.refreshToken,o=e.setMenu,c=e.token,i=e.menu,l=e.admin,s=e.username;return Object(n.useEffect)(function(){var e=setInterval(function(){a()},3e5);return function(){return clearInterval(e)}},[]),Object(n.useEffect)(function(){return a(),window.addEventListener("focus",a),function(){return window.removeEventListener("focus",a)}},[]),c?r.a.createElement("div",{id:"menu"},r.a.createElement("nav",null,r.a.createElement($.a,{linkSize:Y.b.normal,linkFormat:Y.a.links,selectedKey:i,onLinkClick:function(e){o(e.key.slice(1))}},r.a.createElement(Z.a,{iconProps:{iconName:"People"},itemKey:"0",headerText:"Dashboard",onClick:function(){return o("home")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/"},r.a.createElement(J.a,{iconName:"Diagnostic"})," Dashboard")}}),l?r.a.createElement(Z.a,{itemKey:"1",headerText:"Users",onClick:function(){return o("users")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/users"},r.a.createElement(J.a,{iconName:"People"})," Users")}}):null,r.a.createElement(Z.a,{itemKey:"2",headerText:"Transactions",onClick:function(){return o("transactions")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/transactions"},r.a.createElement(J.a,{iconName:"Money"})," Transactions")}}),r.a.createElement(Z.a,{itemKey:"4",headerText:"Transactions",onClick:function(){return o("logs")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/logs"},r.a.createElement(J.a,{iconName:"TextDocument"})," Logs")}})),r.a.createElement("div",null,r.a.createElement(Q.a,{variant:"large",styles:{root:{verticalAlign:"middle",color:"#777"}}},s,"  |  "),r.a.createElement(q.a,{className:"logout",allowDisabledFocus:!0,text:"Logout",onClick:function(){return t(),r.a.createElement(K.a,{to:"/login"})},iconProps:{iconName:"Leave"}})))):null}),De=a(9),_e=a(261),we=a(578),Te=a(15);a(345);var je=Object(l.b)(function(e){return{token:e.auth.token}},function(e){return{getTransactions:function(){return e(de())},updateThisUser:function(){return e(ye())}}})(function(e){var t=e.token,a=e.getTransactions,o=e.updateThisUser,c=Object(_e.w3cwebsocket)("wss://api.chimera-finance.com/notifications/?".concat(t)),i=Object(n.useState)(null),l=Object(De.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)([]),m=Object(De.a)(d,2),f=m[0],p=m[1];function h(e){var t=e.head,a=e.body,o=e.id,c=e.hideNotification,i=Object(n.useState)(!0),l=Object(De.a)(i,2),u=l[0],d=l[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){d(!1),c(o)},1e4);return function(){return clearTimeout(e)}},[]),r.a.createElement("div",null,u?r.a.createElement(we.a,{className:"ms-CalloutExample-callout",onClick:function(){return c(o)},isBeakVisible:!1,target:s,gapSpace:0,directionalHint:Te.a.bottomRightEdge,styles:{root:{width:"280px",backgrounColor:"white",zIndex:8}}},r.a.createElement("div",{className:"content"},r.a.createElement(Q.a,{styles:{root:{display:"block",padding:"20px 20px 0px 20px"}},variant:"large"},t),r.a.createElement(Q.a,{styles:{root:{display:"block",padding:"0px 20px 20px 20px"}},variant:"medium"},a))):null)}return Object(n.useEffect)(function(){return c.onopen=function(){console.log("WebSocket Client Connected")},c.onmessage=function(e){var t=JSON.parse(e.data),n=t.message,r=t.id,c=t.type;p([].concat(Object(S.a)(f),[{head:fe(c),message:n,id:r}])),a(),o()},function(){return c.close()}},[t]),r.a.createElement("div",{id:"notifications"},r.a.createElement("div",{className:"ms-CalloutCoverExample-buttonArea",id:"anchor",ref:function(e){return u(e)}},f.map(function(e,t){return r.a.createElement(h,{key:t,head:e.head,body:e.message,id:e.id,hideNotification:function(e){return function(e){p(f.filter(function(t){return t.id!==e}))}(e)}})})))}),Ae=a(28),Ne=a(591),Pe=a(576),Re=a(10),xe=a(583),Ie=a(582),We=a(60),Ue=a.n(We);a(520);function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Fe=Object(l.b)(function(e){return{users:e.users.users,balance:e.auth.balance,admin:e.auth.admin,partnerId:e.auth.id,data:e.dashboard.data,filters:e.dashboard.filters}},function(e){return{setFilter:function(t,a){return e(function(e,t){return{type:"DASHBOARD_SET_FILTER",filter:e,value:t}}(t,a))},getData:function(){return e(function(e,t){var a=t(),n=a.dashboard.filters,r=n.fromDate,o=n.toDate,c=n.alltime,i=a.auth.token,l=c?"":"from=".concat(new Date(r).toLocaleDateString("it-IT"),"&to=").concat(new Date(o).toLocaleDateString("it-IT"),"&"),s="?".concat(l),u="Bearer "+i;ee.a.get("https://api.chimera-finance.com/api/transactions/".concat(s),{headers:{Authorization:u}}).then(function(t){e({type:"DASHBOARD_GET_DATA",data:t.data})}).catch(function(t){console.log(t),t.response&&t.response&&401===t.response.status&&e(ve)})})}}})(function(e){var t=e.admin,a=e.balance,o=e.users,c=e.setFilter,i=e.filters,l=e.getData,s=e.data,u=e.partnerId,d=i.fromDate,m=i.toDate,f=i.partner,p=i.alltime,b=t?f:parseInt(u);Object(n.useEffect)(function(){l()},[l,d,m,f,p]),d=new Date(d),m=new Date(m);var E=o.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function y(e){return e.toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric"})}var g,O=(g=(g=s).filter(function(e){return"Payment"!==e.transaction_type}),o.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/");return{id:parseInt(t[t.length-2]),username:e.username}}).map(function(e){return{name:e.username,wire:he(g.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"Wire"===e.transaction_type||"Withdraw"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),cc:he(g.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"Credit Card"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),profit:he(g.filter(function(t){return parseInt(t.user)===e.id}).reduce(function(e,t){return parseFloat(t.amount)-parseFloat(t.amount_paid)+e},0))}})),v=O.reduce(function(e,t){return e+t.wire},0),C=O.reduce(function(e,t){return e+t.cc},0),k=v+C,D=function(e){var t=s.sort(function(e,t){return new Date(e.entry_time)-new Date(t.entry_time)}).filter(function(t){return t.user===parseInt(e)}).filter(function(e){return"Payment"!==e.transaction_type}).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{entry_time:new Date(e.entry_time).toLocaleDateString("it-IT").replace("/2019","")})});return Object(S.a)(new Set(t.map(function(e){return e.entry_time}))).map(function(e){return{name:e,wire:he(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"Wire"===e.transaction_type||"Withdraw"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),cc:he(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"Credit Card"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),profit:he(t.filter(function(t){return t.entry_time===e}).reduce(function(e,t){return parseFloat(t.amount)-parseFloat(t.amount_paid)+e},0))}})}(b),_=D.reduce(function(e,t){return e+t.wire},0),w=D.reduce(function(e,t){return e+t.cc},0),T=_+w,j=o.filter(function(e){return!e.is_staff}).reduce(function(e,t){return e+parseFloat(t.partner_data.balance)},0),A=b&&t?E.find(function(e){return e.key===b}).text:null,N=b&&t?o.find(function(e){return e.url==="http://api.chimera-finance.com/api/users/".concat(b,"/")}).partner_data.balance:a;return r.a.createElement("div",{id:"dashboard"},r.a.createElement(xe.a,{className:"bar",horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(xe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},t?r.a.createElement("div",{className:"combo"},r.a.createElement(Ie.a,{autoComplete:"on",selectedKey:b,options:E,placeholder:"Partner...",onChange:function(e,t){return c("partner",t.key)},style:{width:140}}),b?r.a.createElement("span",{className:"clear",onClick:function(){return c("partner",null)}},"Clear"):null):null,r.a.createElement(Pe.a,{style:{width:140},formatDate:function(e){return y(e)},firstDayOfWeek:Re.b.Monday,maxDate:m,placeholder:"From date",value:d,onSelectDate:function(e){c("fromDate",new Date(new Date(e).setHours(0,0,0,0))),c("alltime",!1)}}),r.a.createElement(Pe.a,{style:{width:140},formatDate:function(e){return y(e)},firstDayOfWeek:Re.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:d,placeholder:"To date",value:m,onSelectDate:function(e){c("toDate",new Date(new Date(e).setHours(23,59,59,0))),c("alltime",!1)}}),r.a.createElement(Ne.a,{inlineLabel:!0,label:"Time limit",onText:"All time",offText:"Date range",checked:p,onChange:function(){return c("alltime",!p)}})),r.a.createElement("div",{className:"balance"},r.a.createElement("div",{className:"txt"},t?"To pay: ":"Balance: "),r.a.createElement(Q.a,{variant:"xLarge"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(t?j:a),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),b?r.a.createElement("section",{className:"userInfo"},r.a.createElement(Ae.b,{width:720,height:400,data:D},r.a.createElement(Ae.e,{strokeDasharray:"1 13"}),r.a.createElement(Ae.h,{dataKey:"name"}),r.a.createElement(Ae.i,null),r.a.createElement(Ae.g,null),r.a.createElement(Ae.f,null),r.a.createElement(Ae.a,{type:"monotone",dataKey:"wire",stackId:"one",stroke:"#fce100",fill:"#fce100"}),r.a.createElement(Ae.a,{type:"monotone",dataKey:"cc",stackId:"one",stroke:"#ffaa44",fill:"#ffaa44"}),t?r.a.createElement(Ae.a,{type:"monotone",dataKey:"profit",stackId:"one",stroke:"#82ca9d",fill:"darkgreen"}):null),r.a.createElement("div",{className:"cyphers"},r.a.createElement("table",null,r.a.createElement("tbody",null,t?r.a.createElement("tr",null,r.a.createElement("td",null,"Partner: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"xLarge"},A))):null,r.a.createElement("tr",null,r.a.createElement("td",null,"Balance: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"xLarge"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(N),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Deposits: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"xLarge"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(T),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Wire: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"medium"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(_),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Credit Card: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"medium"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(w),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))))))):null,t&&O.length?r.a.createElement("section",{className:"allInfo"},r.a.createElement(Ae.d,{width:720,height:400,data:O},r.a.createElement(Ae.e,{strokeDasharray:"1 13"}),r.a.createElement(Ae.h,{dataKey:"name"}),r.a.createElement(Ae.i,null),r.a.createElement(Ae.g,null),r.a.createElement(Ae.f,null),r.a.createElement(Ae.c,{dataKey:"wire",fill:"#fce100"}),r.a.createElement(Ae.c,{dataKey:"cc",fill:"#ffaa44"}),r.a.createElement(Ae.c,{dataKey:"profit",fill:"darkgreen"})),r.a.createElement("div",{className:"cyphers"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Deposits: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"xLarge"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(k),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Wire: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"medium"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(v),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Credit Card: "),r.a.createElement("td",null,r.a.createElement(Q.a,{variant:"medium"},r.a.createElement(Ue.a,{duration:500,value:parseFloat(C),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))))))):null)});a(521);var Me=Object(l.b)(function(e){return{token:e.auth.token,balance:e.auth.balance}},function(e){return{selectMenu:function(t){return e(Ce(t))}}})(function(e){var t=e.selectMenu,a=e.token;return e.balance,Object(n.useEffect)(function(){t("0"),document.title="Chimera | Home"},[t]),a?r.a.createElement("div",{id:"home"},r.a.createElement(Fe,null)):r.a.createElement(K.a,{to:"/login"})}),ze=a(179),He=a(571),Be=a(581),Ge=a(270),Ve=a.n(Ge);a(522);var Ke=Object(l.b)(function(e){return{token:e.auth.token,error:e.auth.error,loading:e.auth.loading}},function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),ee.a.post("https://api.chimera-finance.com/api/auth/login/",{email:e,password:t}).then(function(e){var t=e.data,n=t.token,r=t.user,o=r.pk,c=r.email,i=r.username;ee.a.get("https://api.chimera-finance.com/api/users/".concat(o,"/"),{headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){var t=e.data,r=t.is_active,l=t.is_staff,s=t.partner_data,u=parseFloat(s.balance);r&&a(ge(n,o,c,i,l,u)),l&&(a(be()),a(de()))})}).catch(function(e){a(Se(e))})}}(t,a))}}})(function(e){var t=e.login,a=e.error,o=e.token,c=Object(n.useState)(""),i=Object(De.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(""),d=Object(De.a)(u,2),m=d[0],f=d[1];Object(n.useEffect)(function(){document.title="Chimera | Login"},[]);var p=Object(ze.b)({opacity:1,from:{opacity:0}});return o?r.a.createElement(K.a,{to:"/"}):r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:Ve.a,alt:"logo file"}),r.a.createElement(ze.a.div,{style:p},r.a.createElement("span",{className:"Chimera"},"Chimera"))),r.a.createElement("form",null,r.a.createElement("h3",null,"Log in"),r.a.createElement(Be.a,{name:"admin_email",type:"email",label:"email",placeholder:"enter email",onChange:function(e){var t=e.target;return s(t.value)},onKeyPress:function(e){return"Enter"===e.key?t(l,m):null}}),r.a.createElement(Be.a,{name:"admin_password",label:"Password",type:"password",placeholder:"enter password",onChange:function(e){var t=e.target;return f(t.value)},onKeyPress:function(e){return"Enter"===e.key?t(l,m):null}}),r.a.createElement(He.a,{className:"login",onClick:function(){return t(l,m)}},"Log in"),r.a.createElement("h6",null,a&&a.message)))}),$e=a(65),Ye=a.n($e),Ze=a(588),Je=a(594),qe=a(275),Qe=a(573),Xe=a(43),et=a(584),tt=a(585),at=a(579),nt=a(74),rt=a(273),ot=a(596),ct=a(276);a(523);var it=Object(l.b)(function(e){return{token:e.auth.token}},function(e){return{save:function(t,a,n,r,o,c){return e(function(e,t,a,n){return function(r,o){var c=o(),i=c.users.users.filter(function(t){return t.url===e})[0],l=i.username,s=i.email,u=i.partner_data.balance,d=i.partner_data.Wrate,m=i.partner_data.CCrate,f=i.is_staff,p=n.balance,h=n.Wrate,b=n.CCrate,E="Bearer "+c.auth.token;ee.a.patch(e.replace("http","https"),{username:t,email:a,partner_data:n},{headers:{Authorization:E}}).then(function(n){r({type:"USERS_EDIT_SUCCESS",data:n.data}),r({type:"USERS_END_EDIT"}),r(ye()),r(Ee(me(e)));var o=f?"admin":"partner with id ".concat(me(e)),c=t!==l?" username from ".concat(l," to ").concat(t,","):"",i=a!==s?" email from ".concat(s," to ").concat(a,","):"",E=parseFloat(p)!==parseFloat(u)?" balance from ".concat(ae()(parseFloat(u)).format("0,0.00 $")," to ").concat(ae()(parseFloat(p)).format("0,0.00 $"),","):"",y=h!==d?" Wire rate from ".concat(d," to ").concat(h,","):"",g=b!==m?" Credit Card rate from ".concat(m," to ").concat(b,","):"",S="Updated ".concat(o,": changed").concat(c+i+E+y+g).replace(/.$/,".");r(ue(me(e),oe,S))}).catch(function(e){return r({type:"USERS_EDIT_FAIL",error:e})})}}(t,a,n,r))},toggleActiveState:function(t,a){return e(function(e,t){return function(a,n){var r=n(),o=r.users.users.filter(function(t){return t.url===e})[0].username,c="Bearer "+r.auth.token;ee.a.patch(e.replace("http","https"),{is_active:t,partner_data:{}},{headers:{Authorization:c}}).then(function(n){a({type:"USERS_ARCHIVE_SUCCESS",data:n.data}),a({type:"USERS_END_EDIT"}),a(Ee(me(e)));var r=t?ie:ce,c="".concat(t?"Activated":"Deactivated"," partner ").concat(o,". Now he will ").concat(t?"again":"not"," be available for new transactions and").concat(t?"":" will not be able to"," log in.");a(ue(me(e),r,c))}).catch(function(e){return a({type:"USERS_ARCHIVE_FAIL",error:e})})}}(t,a))},endEdit:function(){return e(function(e){e({type:"USERS_END_EDIT"})})},remove:function(t){return e(function(e){return function(t,a){var n=a(),r=n.auth.token,o=n.users.users.filter(function(t){return t.url===e})[0],c="Bearer "+r;ee.a.delete(e.replace("http","https"),{headers:{Authorization:c}}).then(function(a){var n=o.username,r=o.partner_data.balance;t({type:"USERS_REMOVE_SUCCESS",url:e}),t({type:"USERS_END_EDIT"}),t(ye()),t(de());var c="Removed partner ".concat(n,", along with his balance of ").concat(r," and all his transactions.");t(null,re,c)}).catch(function(e){return t({type:"USERS_REMOVE_FAIL",error:e})})}}(t))}}})(function(e){var t=e.editing,a=e.endEdit,o=e.username,c=e.email,i=e.Wrate,l=e.CCrate,s=e.balance,u=e.active,d=e.staff,m=e.url,f=e.save,p=e.remove,h=e.toggleActiveState,b=Object(n.useState)(o),E=Object(De.a)(b,2),y=E[0],g=E[1],S=Object(n.useState)(c),O=Object(De.a)(S,2),v=O[0],C=O[1],k=Object(n.useState)(s),D=Object(De.a)(k,2),_=D[0],w=D[1],T=Object(n.useState)(i),j=Object(De.a)(T,2),A=j[0],N=j[1],P=Object(n.useState)(l),R=Object(De.a)(P,2),x=R[0],I=R[1],W=Object(n.useState)(u),U=Object(De.a)(W,2),L=U[0],F=U[1],M=Object(n.useState)(!1),z=Object(De.a)(M,2),H=z[0],B=z[1];Object(n.useEffect)(function(){F(u)},[u]);var G=L?"brown":"green",V=L?"darkbrown":"darkgreen",K=L?"darkred":"darkgreen";return r.a.createElement("div",null,r.a.createElement(tt.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"editModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Q.a,null,"Edit user"),r.a.createElement(ct.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(xe.a,null,r.a.createElement(xe.a,{horizontal:!0},r.a.createElement(Be.a,{label:"Username",name:"username",placeholder:"username",value:y||"",onChange:function(e){var t=e.target;return g(t.value)}}),r.a.createElement(Be.a,{label:"Email",name:"email",placeholder:"email",value:v,onChange:function(e){var t=e.target;return C(t.value)}})),r.a.createElement(xe.a,{horizontal:!0},r.a.createElement(Be.a,{type:"number",label:"Balance",name:"balance",placeholder:"balance",value:_||0,onChange:function(e){var t=e.target;return w(t.value)}}),r.a.createElement(Be.a,{type:"number",step:.01,min:0,max:1,label:"Wire Rate",name:"wire rate",placeholder:"rate",value:A||void 0,onChange:function(e){var t=e.target;return N(t.value)}}),r.a.createElement(Be.a,{type:"number",step:.01,min:0,max:1,label:"Credit Card Rate",name:"credit card rate",placeholder:"rate",value:x||void 0,onChange:function(e){var t=e.target;return I(t.value)}})),r.a.createElement(xe.a,{horizontal:!0},r.a.createElement(ot.a,{className:"changePassword",target:"_blank",href:"https://api.chimera-finance.com/admin/api/user/".concat(me(m),"/password/")},"Change password")),r.a.createElement(xe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),d?null:r.a.createElement(q.a,{className:"delete",styles:{root:{color:G,borderColor:G},rootHovered:{color:V,borderColor:V},rootPressed:{color:K,borderColor:K}},onClick:function(){return h(m,!L)},text:L?"Deactivate":"Activate",split:!0,menuProps:{items:[{key:"deleteUser",text:"Delete",style:{color:"red",marginRight:0},onClick:function(){return B(!0)},styles:{root:{color:"red"},rootHovered:{color:"red"},rootPressed:{color:"darkred"}},iconProps:{iconName:"Delete",color:"red"}}]}}),r.a.createElement(He.a,{className:"save",onClick:function(){return f(m,y,v,{balance:_,Wrate:A,CCrate:x})},text:"Save"}))))),r.a.createElement(at.a,{hidden:!H,onDismiss:function(){return B(!1)},dialogContentProps:{type:nt.a.normal,title:"Delete user ".concat(o,"?"),subText:"Warning! By deleting this user you will delete all his data, all his related transactions and the resulting profit from this user. Are you absolutely sure you want to delete this user?"},modalProps:{isBlocking:!0,styles:{main:{maxWidth:450}},dragOptions:!0}},r.a.createElement(rt.a,null,r.a.createElement(He.a,{styles:{root:{backgroundColor:"red"},rootHovered:{backgroundColor:"orangered"},rootPressed:{backgroundColor:"darkred"}},onClick:function(){p(m),B(!1)},text:"Delete"}),r.a.createElement(q.a,{onClick:function(){return B(!1)},text:"Cancel"}))))});a(524);function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function st(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ut=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{add:function(t,a,n,r,o){return e(function(e,t,a,n){return function(r,o){var c="Bearer "+o().auth.token;ee.a.post("https://api.chimera-finance.com/api/users/",{username:e,email:t,password:a,partner_data:n},{headers:{Authorization:c}}).then(function(e){var t=e.data,a=t.url,n=t.username,o=t.partner_data,c=o.balance,i=o.Wrate,l=o.CCrate;r({type:"USERS_ADD_SUCCESS",user:e.data}),r({type:"USERS_END_ADD"}),r(ye()),r(ue(me(a),ne,"Added partner ".concat(n," with initial balance ").concat(ae()(parseFloat(c)).format("0,0.00 $")," Wire rate ").concat(i," and Credit Card rate ").concat(l,".")))}).catch(function(e){r({type:"USERS_ADD_FAIL"})})}}(t,a,n,r))},endAdd:function(){return e(function(e){e({type:"USERS_END_ADD"})})}}})(function(e){var t=e.adding,a=e.endAdd,o=e.add,c=e.users,i=Object(n.useState)(""),l=Object(De.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(De.a)(d,2),f=m[0],p=m[1],h=Object(n.useState)(""),b=Object(De.a)(h,2),E=b[0],y=b[1],g=Object(n.useState)(""),S=Object(De.a)(g,2),O=S[0],v=S[1],C=Object(n.useState)(0),k=Object(De.a)(C,2),D=k[0],_=k[1],w=Object(n.useState)(1),T=Object(De.a)(w,2),j=T[0],A=T[1],N=Object(n.useState)(1),P=Object(De.a)(N,2),R=P[0],x=P[1],I=Object(n.useState)(!1),W=Object(De.a)(I,2),U=W[0],L=W[1],F=Object(n.useState)({email:"",username:"",password:"",passwordMatch:""}),M=Object(De.a)(F,2),z=M[0],H=M[1];return Object(n.useEffect)(function(){!(s&&f&&E&&O)||z.username||z.email||z.password||z.passwordMatch?L(!1):L(!0)},[s,f,E,O,z]),r.a.createElement(tt.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"editModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Q.a,null,"Add user"),r.a.createElement(ct.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(xe.a,null,r.a.createElement(xe.a,{horizontal:!0},r.a.createElement(Be.a,{label:"Email",name:"email",placeholder:"email",errorMessage:z.email,value:f,onChange:function(e){var t=e.target;return p(t.value)},onBlur:function(){f?(c.map(function(e){return e.email}).forEach(function(e){e===f&&H(st({},z,{email:"User with this email is already present"}))}),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(f)?H(st({},z,{email:""})):H(st({},z,{email:"Email not valid"}))):H(st({},z,{email:""}))}}),r.a.createElement(Be.a,{label:"Username",name:"username",placeholder:"username",errorMessage:z.username,value:s,onChange:function(e){var t=e.target;return u(t.value)},onBlur:function(){var e=new RegExp("^[A-Z]+$","i");if(s){e.test(s)?H(st({},z,{username:""})):H(st({},z,{username:"Username should contain only letters"}));var t=c.map(function(e){return e.username});for(var a in t)a===s&&H(st({},z,{username:"User with this username is already present"}))}else H(st({},z,{username:""}))}})),r.a.createElement(xe.a,{horizontal:!0},r.a.createElement(Be.a,{type:"password",label:"Password",name:"password1",placeholder:"password",errorMessage:z.password,value:E,onChange:function(e){var t=e.target;return y(t.value)},onBlur:function(){var e=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})");E?e.test(E)?H(st({},z,{password:""})):H(st({},z,{password:"Password not valid"})):H(st({},z,{password:""}))}}),r.a.createElement(Be.a,{type:"password",label:"Confirm Password",name:"password2",placeholder:"confirm password",errorMessage:z.passwordMatch,value:O,onChange:function(e){var t=e.target;return v(t.value)},onBlur:function(){H(st({},z,O?E===O?{passwordMatch:""}:{passwordMatch:"Passwords do not match"}:{passwordMatch:""}))}})),r.a.createElement(xe.a,{horizontal:!0},r.a.createElement(Be.a,{type:"number",label:"Balance",name:"balance",placeholder:"balance",value:D,onChange:function(e){var t=e.target;return _(t.value)}}),r.a.createElement(Be.a,{type:"number",step:.01,min:0,max:1,label:"Wire Rate",name:"wire rate",placeholder:"rate",value:j,onChange:function(e){var t=e.target;return A(t.value)}}),r.a.createElement(Be.a,{type:"number",step:.01,min:0,max:1,label:"Credit Card Rate",name:"credit card rate",placeholder:"rate",value:R,onChange:function(e){var t=e.target;return x(t.value)}})),r.a.createElement(xe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(He.a,{disabled:!U,className:"add",onClick:function(){return o(s,f,E,{balance:D,Wrate:j,CCrate:R})},text:"Add"})))))});a(525);ae.a.locale("al");var dt=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users,editing:e.users.editing,editingThis:e.users.editingThis,adding:e.users.adding}},function(e){return{selectMenu:function(t){return e(Ce(t))},setToken:function(t){return e(Oe(t))},getUsers:function(){return e(be())},beginEdit:function(t){return e(function(e){return function(t){t({type:"USERS_BEGIN_EDIT",email:e})}}(t))},beginAdd:function(){return e(function(e){e({type:"USERS_BEGIN_ADD"})})}}})(function(e){var t=e.getUsers,a=e.selectMenu,o=e.beginEdit,c=e.beginAdd,i=e.token,l=e.users,s=e.editing,u=e.editingThis,d=e.adding,m=Object(n.useState)("staff"),f=Object(De.a)(m,2),p=f[0],h=f[1],b=Object(n.useState)(!0),E=Object(De.a)(b,2),y=E[0],g=E[1],S=Object(n.useState)(""),O=Object(De.a)(S,2),v=O[0],C=O[1],k=Object(n.useState)("partner"),D=Object(De.a)(k,2),_=D[0],w=D[1];Object(n.useEffect)(function(){t()},[t]);var T,j,A,N,P=[{key:"username",name:"Username",fieldName:"username",minWidth:60,maxWidth:80,isSorted:"username"===p,isSortedDescending:y,onColumnClick:x,data:"string",isPadded:!0},{key:"email",name:"Email",fieldName:"email",minWidth:200,maxWidth:230,isSorted:"email"===p,isSortedDescending:y,onColumnClick:x,data:"string",isPadded:!0},{key:"last_login",name:"Last login",fieldName:"last_login",minWidth:80,maxWidth:100,isSorted:"last_login"===p,isSortedDescending:y,onColumnClick:x,data:"date",isPadded:!0},{key:"balance",name:"Balance",fieldName:"balance",minWidth:80,maxWidth:90,isSorted:"balance"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"Wrate",name:"Wire Rate",fieldName:"Wrate",minWidth:40,maxWidth:40,isSorted:"Wrate"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"CCrate",name:"Credit Card Rate",fieldName:"CCrate",minWidth:85,maxWidth:85,isSorted:"CCrate"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"is_active",name:"Active",fieldName:"active",minWidth:60,maxWidth:100,onColumnClick:x,isPadded:!1}],R=(T=l.map(function(e){return{email:e.email,last_login:Ye()(new Date(e.last_login)).fromNow().replace("50 years ago","never"),date_joined:Ye()(new Date(e.date_joined)).fromNow(),username:e.username,password:e.password,balance:parseFloat(e.partner_data.balance),Wrate:e.partner_data.Wrate,CCrate:e.partner_data.CCrate,active:e.is_active,staff:e.is_staff,url:e.url}}),j=p,A=y,T.sort(function(e,t){var a=e[j],n=t[j];return A?a<n?-1:a>n?1:0:a>n?-1:a<n?1:0})).filter(function(e){return-1!==e.email.indexOf(v)||-1!==e.username.toLowerCase().indexOf(v)}).filter(function(e){switch(_){case"partner":return!e.staff;case"admin":return e.staff;default:return!0}});function x(e,t){var a=t.key;h(a),g(!0),a===p&&g(!y)}return Object(n.useEffect)(function(){a("1"),document.title="Chimera | Users"},[t,a]),N=R.filter(function(e){return e.email===u})[0],i?r.a.createElement("div",{id:"users"},r.a.createElement(Je.a,null,r.a.createElement(xe.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(xe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},r.a.createElement(Ze.a,{styles:{root:{width:300}},iconProps:{iconName:"Filter",style:{color:"black"}},value:v,placeholder:"Filter by username or email...",onChange:function(e){var t=e.target;return C(t.value)}}),r.a.createElement(Ie.a,{style:{width:150},options:[{key:"admin",text:"Admin"},{key:"partner",text:"Partner"}],selectedKey:_,placeholder:"Filter by role...",onChange:function(e,t){var a=t.key;return w(a)}})),r.a.createElement(He.a,{allowDisabledFocus:!0,disabled:d,checked:!1,text:"New user",onClick:function(){return c()},iconProps:{iconName:"Add"},align:"end",styles:{root:{justifySelf:"flex-end"}}})),r.a.createElement(et.a,null,r.a.createElement(Qe.a,{className:"table",maxWidth:960,items:R,compact:!1,columns:P,selectionMode:Xe.b.none,isHeaderVisible:!0,onItemInvoked:function(e){var t=e.email;o(t)},checkboxVisibility:2,onRenderItemColumn:function(e,t,a){var n=e[a.fieldName];switch(a.key){case"is_active":return n?r.a.createElement(J.a,{iconName:"StatusCircleInner",styles:{root:{marginLeft:"14px"}}}):null;case"balance":return r.a.createElement("span",{style:{textAlign:"right"}},ae()(n).format("0,0.00 $"));default:return r.a.createElement("span",null,n)}},onRenderRow:function(e){return r.a.createElement(qe.a,Object.assign({},e,{styles:{root:{backgroundColor:e.item.staff?"lightblue":"white",fontSize:"1.1em"}}}))}}))),s?r.a.createElement(it,Object.assign({editing:s},N)):null,d?r.a.createElement(ut,{adding:d}):null):r.a.createElement(K.a,{to:"/login"})}),mt=a(16),ft=a(598),pt=a(577),ht=a(567),bt=a(272);a(529);ae.a.locale("al");var Et=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users,clients:e.transactions.clients}},function(e){return{add:function(t,a,n,r,o,c){return e(function(e,t,a,n,r,o){return"Payment"===e&&(t="-"),function(c,i){var l=i(),s=l.users.users.filter(function(e){return e.url==="http://api.chimera-finance.com/api/users/".concat(o,"/")})[0].username,u="Bearer "+l.auth.token;ee.a.post("https://api.chimera-finance.com/api/transactions/",{transaction_type:e,client_name:t,amount:a,amount_paid:n,rate:r,user:o},{headers:{Authorization:u}}).then(function(i){var l;c({type:"TRANSACTIONS_ADD_SUCCESS",transaction:i.data}),c({type:"TRANSACTIONS_END_ADD"}),c(Ee(o)),c(ye());var u=ae()(Math.abs(parseFloat(a))).format("0,0.00 $"),d=ae()(Math.abs(parseFloat(n))).format("0,0.00 $");switch(e){case"Wire":case"Credit Card":l="Added deposit of ".concat(u," by client ").concat(t,", made via ").concat(e,". Amount registered on partner ").concat(s," is ").concat(d,", given that the actual rate is ").concat(r,".");break;case"Withdraw":l="Client ".concat(t," withdrawed ").concat(u," from main balance. ").concat(d," were substracted from ").concat(s,"'s balance, given that the actual rate is ").concat(r,".");break;case"Payment":l="Made payment of ".concat(u," to ").concat(s);break;default:l="Made transaction of type ".concat(e,". Partner ").concat(s,", main amount ").concat(u,", partner amount ").concat(d," (because rate is ").concat(r,").")}c(ue(o,le,l))}).catch(function(e){c({type:"TRANSACTIONS_ADD_FAIL",e:e})})}}(t,a,n,r,o,c))},endAdd:function(){return e(function(e){e({type:"TRANSACTIONS_END_ADD"})})}}})(function(e){var t=e.adding,a=e.endAdd,o=e.add,c=e.users,i=e.clients,l=Object(n.useState)(""),s=Object(De.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),f=Object(De.a)(m,2),p=f[0],h=f[1],b=Object(n.useState)([]),E=Object(De.a)(b,2),y=E[0],g=E[1],O=Object(n.useState)(0),v=Object(De.a)(O,2),C=v[0],k=v[1],D=Object(n.useState)(0),_=Object(De.a)(D,2),w=_[0],T=_[1],j=Object(n.useState)(""),A=Object(De.a)(j,2),N=A[0],P=A[1],R=Object(n.useState)({partner_data:{rate:1}}),x=Object(De.a)(R,2),I=x[0],W=x[1],U=Object(n.useState)(1),L=Object(De.a)(U,2),F=L[0],M=L[1],z=Object(n.useState)(1),H=Object(De.a)(z,2),B=H[0],G=H[1],V=Object(n.useState)(!1),K=Object(De.a)(V,2),$=K[0],Y=K[1];Object(n.useEffect)(function(){switch(u){case"Wire":M(parseFloat(I.partner_data.Wrate).toPrecision(2));break;case"Credit Card":M(parseFloat(I.partner_data.CCrate).toPrecision(2));break;case"Withdraw":M(parseFloat(I.partner_data.Wrate).toPrecision(2));break;case"Payment":default:M(1)}},[I,u]),Object(n.useEffect)(function(){k(Math.abs(C)*B)},[B,u,C]),Object(n.useEffect)(function(){T(Math.round(C*F*100+Number.EPSILON)/100)},[C,F]),Object(n.useEffect)(function(){var e=!1;"Payment"===u&&h(""),"Payment"!==u&&""===p||(e=!0),Y(!(""===u||0===C||""===N||!e))},[u,C,N,p]),Object(n.useEffect)(function(){X(u)},[u]),Object(n.useEffect)(function(){g(i.map(function(e){return{key:e,text:e}}))},[]);var Z=c.filter(function(e){return!e.is_staff&&e.is_active}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function X(e){switch(e){case"Wire":case"Credit Card":G(1);break;case"Withdraw":case"Payment":G(-1);break;default:G(1)}}var ee="white";switch(u){case"Wire":ee="#fce100";break;case"Credit Card":ee="#ffaa44";break;case"Withdraw":ee="#da3b01";break;case"Payment":ee="#00b7c3";break;default:ee="white"}var te=u&&"Payment"!==u&&N;return r.a.createElement(tt.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"transactionModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Q.a,null,"Add transaction"),r.a.createElement(ct.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",{style:{borderLeft:"4px solid ".concat(ee)}},r.a.createElement(xe.a,null,r.a.createElement(xe.a,{horizontal:!0,className:"row1"},r.a.createElement(Ie.a,{label:"Type of transaction",autoComplete:"on",selectedKey:u,options:[{key:"Wire",text:"Wire"},{key:"Credit Card",text:"Credit Card"},{key:"Withdraw",text:"Withdraw"},{key:"Payment",text:"Payment"}],placeholder:"Type...",onChange:function(e,t){var a=t.key;return d(a)}}),r.a.createElement(Ie.a,{label:"Partner name",autoComplete:"on",allowFreeform:!0,selectedKey:N,options:Z,placeholder:"Partner...",onChange:function(e,t){var a=t.key;P(a);var n="http://api.chimera-finance.com/api/users/".concat(a,"/");W(c.filter(function(e){return e.url===n})[0])}})),r.a.createElement(xe.a,{horizontal:!0,className:"row2"},r.a.createElement(Ie.a,{disabled:"Payment"===u,label:"Client name",autoComplete:"on",allowFreeform:!0,selectedKey:p,options:y,onBlur:function(){g([{key:p,text:p}].concat(Object(S.a)(y)))},placeholder:"Client name...",onChange:function(e,t){return h(e.target.value?e.target.value:t.key)}}),r.a.createElement(Be.a,{type:"number",step:1,name:"amount",label:"Amount",placeholder:"amount",value:C,onChange:function(e){var t=e.target;X(u),t.value?k(B*Math.abs(parseFloat(t.value))):k(0)}})),r.a.createElement(xe.a,{horizontal:!0,className:"row3"},r.a.createElement(Q.a,{className:"calc",styles:{root:{visibility:te?"visible":"hidden"}},variant:"xLarge"},"".concat(ae()(C).format("0,0.00")," x ").concat(F," =")),r.a.createElement("div",{className:"partnerAmount"},r.a.createElement("label",{htmlFor:"partner_amount"},r.a.createElement(Q.a,{variant:"medium"},"Partner amount")),r.a.createElement(Q.a,{className:"amount",name:"partner_amount",variant:"xLarge"},ae()(w).format("0,0.00 $")))),r.a.createElement(xe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(He.a,{className:"add",disabled:!$,onClick:function(){return o(u,p,C,w,F,N)},text:"Add"})))))});a(530);ae.a.locale("al");var yt=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{edit:function(t,a,n,r,o,c){return e(function(e,t,a,n,r,o,c){return"Payment"===e&&(t="-"),function(i,l){var s=l(),u=s.transactions.transactions.filter(function(e){return e.id===c})[0].username,d="Bearer "+s.auth.token;ee.a.post("https://api.chimera-finance.com/api/transactions/",{transaction_type:e,client_name:t,amount:a,amount_paid:n,rate:r,user:o},{headers:{Authorization:d}}).then(function(c){var l;i({type:"TRANSACTIONS_ADD_SUCCESS",transaction:c.data}),i({type:"TRANSACTIONS_END_ADD"}),i(Ee(o)),i(ye());var s=ae()(Math.abs(parseFloat(a))).format("0,0.00 $"),d=ae()(Math.abs(parseFloat(n))).format("0,0.00 $");switch(e){case"Wire":case"Credit Card":l="Added deposit of ".concat(s," by client ").concat(t,", made via ").concat(e,". Amount registered on partner ").concat(u," is ").concat(d,", given that the actual rate is ").concat(r,".");break;case"Withdraw":l="Client ".concat(t," withdrawed ").concat(s," from main balance. ").concat(d," were substracted from ").concat(u,"'s balance, given that the actual rate is ").concat(r,".");break;case"Payment":l="Made payment of ".concat(s," to ").concat(u);break;default:l="Made transaction of type ".concat(e,". Partner ").concat(u,", main amount ").concat(s,", partner amount ").concat(d," (because rate is ").concat(r,").")}i(ue(o,le,l))}).catch(function(e){i({type:"TRANSACTIONS_ADD_FAIL",e:e})})}}(t,a,n,r,o,c))},endEdit:function(){return e(function(e){e({type:"TRANSACTIONS_END_EDIT"})})}}})(function(e){var t=e.editing,a=e.endEdit,o=e.edit,c=e.users,i=e.data,l=Object(n.useState)(i.transaction_type),s=Object(De.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(i.client_name),f=Object(De.a)(m,2),p=f[0],h=f[1],b=Object(n.useState)(parseFloat(i.amount)),E=Object(De.a)(b,2),y=E[0],g=E[1],S=Object(n.useState)(parseFloat(i.amount_paid)),O=Object(De.a)(S,2),v=O[0],C=O[1],k=Object(n.useState)(i.user),D=Object(De.a)(k,2),_=D[0],w=D[1],T=Object(n.useState)({partner_data:{rate:1}}),j=Object(De.a)(T,2),A=j[0],N=j[1],P=Object(n.useState)(A.partner_data.rate),R=Object(De.a)(P,2),x=R[0],I=R[1],W=Object(n.useState)(1),U=Object(De.a)(W,2),L=U[0],F=U[1],M=Object(n.useState)(!1),z=Object(De.a)(M,2),H=z[0],B=z[1];Object(n.useEffect)(function(){switch(u){case"Wire":case"Credit Card":case"Withdraw":I(parseFloat(A.partner_data.rate).toPrecision(2));break;case"Payment":I(1);break;default:I(parseFloat(A.partner_data.rate).toPrecision(2))}},[A,u]),Object(n.useEffect)(function(){g(Math.abs(y)*L)},[L,u,y]),Object(n.useEffect)(function(){C(Math.round(y*x*100+Number.EPSILON)/100)},[y,x]),Object(n.useEffect)(function(){var e=!1;"Payment"===u&&h(""),"Payment"!==u&&""===p||(e=!0),B(!(""===u||0===y||""===_||!e))},[u,y,_,p]),Object(n.useEffect)(function(){V(u)},[u]);var G=c.filter(function(e){return!e.is_staff&&e.is_active}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function V(e){switch(e){case"Wire":case"Credit Card":F(1);break;case"Withdraw":case"Payment":F(-1);break;default:F(1)}}return r.a.createElement(tt.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"transactionModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Q.a,null,"Edit transaction"),r.a.createElement(ct.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(xe.a,null,r.a.createElement(xe.a,{horizontal:!0,className:"row1"},r.a.createElement(Ie.a,{label:"Type of transaction",autoComplete:"on",selectedKey:u,options:[{key:"Wire",text:"Wire"},{key:"Credit Card",text:"Credit Card"},{key:"Withdraw",text:"Withdraw"},{key:"Payment",text:"Payment"}],placeholder:"Type...",onChange:function(e,t){var a=t.key;return d(a)}}),r.a.createElement(Ie.a,{label:"Partner name",autoComplete:"on",allowFreeform:!0,selectedKey:_,options:G,placeholder:"Partner...",onChange:function(e,t){var a=t.key;w(a);var n="http://api.chimera-finance.com/api/users/".concat(a,"/");N(c.filter(function(e){return e.url===n})[0])}})),r.a.createElement(xe.a,{horizontal:!0,className:"row2"},r.a.createElement(Be.a,{disabled:"Payment"===u,name:"client",label:"Client name",placeholder:"client",value:p,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement(Be.a,{type:"number",step:1,name:"amount",label:"Amount",placeholder:"amount",value:y,onChange:function(e){var t=e.target;V(u),t.value?g(L*Math.abs(parseFloat(t.value))):g(0)}})),r.a.createElement(xe.a,{horizontal:!0,className:"row3"},r.a.createElement(Q.a,{className:"calc",variant:"xLarge"},"".concat(ae()(y).format("0,0.00")," x ").concat(x," =")),r.a.createElement("div",{className:"partnerAmount"},r.a.createElement("label",{htmlFor:"partner_amount"},r.a.createElement(Q.a,{variant:"medium"},"Partner amount")),r.a.createElement(Q.a,{className:"amount",name:"partner_amount",variant:"xLarge"},ae()(v).format("0,0.00 $")))),r.a.createElement(xe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(He.a,{className:"edit",disabled:!H,onClick:function(){return o(u,p,y,v,x,_)},text:"Save"})))))});a(531);ae.a.locale("al");var gt=Object(l.b)(function(e){return{token:e.auth.token,admin:e.auth.admin,balance:e.auth.balance,users:e.users.users,transactions:e.transactions.transactions,editing:e.transactions.editing,adding:e.transactions.adding,editData:e.transactions.editData,filters:e.transactions.filters}},function(e){return{selectMenu:function(t){return e(Ce(t))},setToken:function(t){return e(Oe(t))},beginAdd:function(){return e(function(e){e({type:"TRANSACTIONS_BEGIN_ADD"})})},beginEdit:function(t){return e(function(e){return function(t,a){t({type:"TRANSACTIONS_BEGIN_EDIT",transaction:a().transactions.transactions.filter(function(t){return t.id===e})[0]})}}(t))},remove:function(t){return e((a=t,function(e,t){var n=t(),r="Bearer "+n.auth.token;ee.a.delete("https://api.chimera-finance.com/api/transactions/".concat(a,"/"),{headers:{Authorization:r}}).then(function(){var t=n.transactions.transactions.filter(function(e){return e.id===a})[0],r=t.amount,o=t.amount_paid,c=t.client_name,i=t.user,l=t.rate,s=t.transaction_type,u=n.users.users.filter(function(e){return e.url==="http://api.chimera-finance.com/api/users/".concat(i,"/")})[0].username,d=ae()(parseFloat(r)).format("0,0.00 $"),m=ae()(parseFloat(o)).format("0,0.00 $");e({type:"TRANSACTIONS_REMOVE_SUCCESS",id:a}),e({type:"TRANSACTIONS_END_EDIT"}),e(ye());var f="Removed transaction ".concat(a," of type ").concat(s,". Client: ").concat(c,". Main amount: ").concat(d,". Partner amount: ").concat(m,". Partner: ").concat(u,". Rate ").concat(l);e(ue(i,se,f))}).catch(function(t){return e({type:"TRANSACTIONS_REMOVE_FAIL",error:t})})}));var a},getTransactions:function(){return e(de())},getClients:function(){return e(function(e,t){var a="Bearer "+t().auth.token;ee.a.get("https://api.chimera-finance.com/api/clients/",{headers:{Authorization:a}}).then(function(t){var a=t.data;e({type:"TRANSACTIONS_GET_CLIENTS_LIST",clients:a})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(ve)})})},setFilter:function(t,a){return e(function(e,t){return function(a){a({type:"TRANSACTIONS_SET_FILTER",filter:e,value:t}),a(de())}}(t,a))},allTypes:function(t){return e({type:"TRANSACTIONS_SET_ALL_TYPES_SELECTED",allTypesSelected:t})},allPartners:function(t){return e({type:"TRANSACTIONS_SET_ALL_PARTNERS_SELECTED",allPartnersSelected:t})}}})(function(e){var t=e.selectMenu,a=e.beginAdd,o=e.token,c=e.users,i=e.admin,l=e.adding,s=e.editing,u=e.editData,d=e.transactions,m=e.remove,f=e.getTransactions,p=e.getClients,h=e.setFilter,b=e.filters,E=e.allPartners,y=e.allTypes,g=Object(n.useState)(!1),O=Object(De.a)(g,2),v=O[0],C=O[1],k=Object(n.useState)(0),D=Object(De.a)(k,2),_=D[0],w=D[1],T=b.client,j=b.partners,A=b.types,N=b.fromDate,P=b.toDate;N=new Date(N),P=new Date(P),Object(n.useEffect)(function(){j.length||h("partners",c.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/");return t[t.length-2]})),A.length||h("types",["Wire","Credit Card","Withdraw","Payment"])},[h,c]);var R=c.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/"),a=t[t.length-2];return{key:a,text:e.username,selected:j.includes(a)}}),x=[{key:"Wire",text:"Wire",selected:A.includes("Wire")},{key:"Credit Card",text:"Credit Card",selected:A.includes("Credit Card")},{key:"Withdraw",text:"Withdraw",selected:A.includes("Withdraw")},{key:"Payment",text:"Payment",selected:A.includes("Payment")}];Object(n.useEffect)(function(){document.title="Chimera | Transactions",t(i?"2":"3"),f(),i&&p()},[t,f,i]);var I,W=[{key:"id",name:"ID",fieldName:"id",minWidth:17,maxWidth:17,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"transaction_type",name:"Type",fieldName:"transaction_type",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"client",name:"Client name",fieldName:"client",minWidth:110,maxWidth:180,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"partner",name:"Partner",fieldName:"partner",minWidth:70,maxWidth:80,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount",name:"Amount",fieldName:"amount",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"rate",name:"Rate",fieldName:"rate",minWidth:30,maxWidth:50,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount_paid",name:"Partner amount",fieldName:"amount_paid",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"created_at",name:"Created at",fieldName:"created_at",minWidth:110,maxWidth:110,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"delete",name:"Delete",minWidth:45,maxWidth:55,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0,onRender:function(e){return r.a.createElement(ft.a,{onClick:function(){C(!0),w(e.id)},styles:{root:{height:"15px",marginLeft:"7px",color:"#ccc"},rootHovered:{color:"red"},rootPressed:{color:"darkred"}},iconProps:{iconName:"Delete"}})}}],U=[{key:"id",name:"ID",fieldName:"id",minWidth:20,maxWidth:30,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"transaction_type",name:"Type",fieldName:"transaction_type",minWidth:60,maxWidth:100,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"client",name:"Client name",fieldName:"client",minWidth:120,maxWidth:140,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount",name:"Amount",fieldName:"amount",minWidth:50,maxWidth:60,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount_paid",name:"My amount",fieldName:"amount_paid",minWidth:60,maxWidth:80,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"created_at",name:"Created at",fieldName:"created_at",minWidth:130,maxWidth:150,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0}];function L(){}return I=d.map(function(e){return{id:e.id,transaction_type:e.transaction_type,client:e.client_name,amount:ae()(parseFloat(e.amount)).format("0,0.00 $"),rate:ae()(parseFloat(e.rate)).format("0 %"),partner:i?c.filter(function(t){return t.url==="http://api.chimera-finance.com/api/users/".concat(e.user,"/")})[0].username:null,amount_paid:ae()(parseFloat(e.amount_paid)).format("0,0.00 $"),created_at:Ye()(new Date(e.entry_time)).format("DD/MM/YYYY hh:mm:ss")}}),o?r.a.createElement("div",{id:"transactions"},r.a.createElement(Je.a,null,r.a.createElement(xe.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(xe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},r.a.createElement(pt.a,{placeholder:"Type",selectedKeys:A,onChange:function(e,t){var a=x.map(function(e){return e.key===t.key?t:e});y(a.every(function(e){return e.selected})),h("types",a.filter(function(e){return e.selected}).map(function(e){return e.key}))},multiSelect:!0,options:[{key:"typesHeader",text:"Types",itemType:ht.a.Header}].concat(x),style:{width:120,textAlign:"left"}}),r.a.createElement(Ze.a,{styles:{root:{width:150}},iconProps:{iconName:"Filter",style:{color:"black"}},value:T,placeholder:"Client name...",onChange:function(e){var t=e.target;return h("client",t.value.toLowerCase())}}),i?r.a.createElement(pt.a,{placeholder:"Filter by partner",selectedKeys:j,onChange:function(e,t){var a=R.map(function(e){return e.key===t.key?t:e});E(a.every(function(e){return e.selected})),h("partners",a.filter(function(e){return e.selected}).map(function(e){return e.key}))},multiSelect:!0,options:[{key:"partnersHeader",text:"Partners",itemType:ht.a.Header}].concat(Object(S.a)(R)),style:{width:140,textAlign:"left"}}):null,r.a.createElement(Pe.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Re.b.Monday,maxDate:P,placeholder:"From date",value:N,onSelectDate:function(e){return h("fromDate",new Date(new Date(e).setHours(0,0,0,0)))}}),r.a.createElement(Pe.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Re.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:N,placeholder:"To date",value:P,onSelectDate:function(e){return h("toDate",new Date(new Date(e).setHours(23,59,59,0)))}})),i?r.a.createElement(He.a,{allowDisabledFocus:!0,disabled:l,checked:!1,text:"New transaction",onClick:function(){return a()},iconProps:{iconName:"Add"},align:"end",styles:{root:{justifySelf:"flex-end"}}}):null),r.a.createElement(et.a,null,r.a.createElement(Qe.a,{className:"table",maxWidth:i?960:720,height:"70%",items:I,compact:!1,columns:i?W:U,onItemInvoked:function(e){e.id},enableShimmer:!I,isHeaderVisible:!0,checkboxVisibility:2,selectionMode:Xe.b.multiple,layoutMode:mt.e.justified,onRenderItemColumn:function(e,t,a){return"amount"===a.key||"amount_paid"===a.key?r.a.createElement("div",{style:{textAlign:"right"}},e[a.key]):"id"===a.key||"created_at"===a.key?r.a.createElement("div",{style:{fontSize:"1em"}},e[a.key]):e[a.key]},onRenderRow:function(e){var t;switch(e.item.transaction_type){case"Wire":t="#fce100";break;case"Credit Card":t="#ffaa44";break;case"Withdraw":t="#da3b01";break;case"Payment":t="#00b7c3",e.item.amount="",e.item.rate="";break;default:t="white"}return r.a.createElement(qe.a,Object.assign({},e,{styles:{root:{borderLeft:"4px solid ".concat(t),fontSize:"1.1em"}}}))}}))),l?r.a.createElement(Et,{adding:l}):null,s?r.a.createElement(yt,{data:u,editing:s}):null,r.a.createElement(at.a,{hidden:!v,onDismiss:function(){return C(!1)},dialogContentProps:{type:nt.a.normal,title:"Delete transaction?",subText:"Do you really want do delete this transaction?"},modalProps:{isBlocking:!0,styles:{main:{maxWidth:450}},dragOptions:!0}},r.a.createElement(rt.a,null,r.a.createElement(He.a,{styles:{root:{backgroundColor:"red"},rootHovered:{backgroundColor:"orangered"},rootPressed:{backgroundColor:"darkred"}},onClick:function(){m(_),C(!1)},text:"Delete"}),r.a.createElement(q.a,{onClick:function(){return C(!1)},text:"Cancel"}))),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"data"},r.a.createElement(Q.a,{variant:"small"},d.length||"No"," transaction",1!==d.length?"s":"")),d.length?r.a.createElement(q.a,{iconProps:{iconName:"Download"}},r.a.createElement(bt.CSVLink,{filename:"transactions_report_".concat(Ye()(new Date).format("DD_MM_YYYY_hh_mm_ss"),".csv"),data:I,headers:[{label:"ID",key:"id"},{label:"Type",key:"transaction_type"},{label:"Client Name",key:"client"},{label:"Parner Name",key:"partner"},{label:"Amount",key:"amount"},{label:"Partner Amount",key:"amount_paid"},{label:"Date",key:"created_at"}]},"Download CSV")):null)):r.a.createElement(K.a,{to:"/login"})}),St=a(575),Ot=a(4);a(532);var vt=Object(l.b)(function(e){return{token:e.auth.token,logs:e.logs.logs,filters:e.logs.filters,users:e.users.users}},function(e){return{getLogs:function(){return e(function(e,t){var a=t(),n=a.logs.filters,r=n.fromDate,o=n.toDate,c=n.message,i=a.auth.token,l="?from=".concat(new Date(r).toLocaleDateString("it-IT"),"&to=").concat(new Date(o).toLocaleDateString("it-IT"),"&");c&&(l+="message=".concat(c));var s="Bearer "+i;ee.a.get("https://api.chimera-finance.com/api/logs/".concat(l),{headers:{Authorization:s}}).then(function(t){e({type:"LOGS_GET_DATA",data:t.data})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(ve())})})},remove:function(t){return e(function(e){return function(t,a){var n="Bearer "+a().auth.token;ee.a.delete("https://api.chimera-finance.com/api/logs/".concat(e),{headers:{Authorization:n}}).then(function(a){t({type:"LOGS_REMOVE",id:e})}).catch(function(e){console.log(e)})}}(t))},selectMenu:function(t){return e(Ce(t))},setFilter:function(t,a){return e(function(e,t){return{type:"LOGS_SET_FILTER",filter:e,value:t}}(t,a))}}})(function(e){var t=e.logs,a=e.token,o=e.getLogs,c=e.remove,i=e.selectMenu,l=e.users,s=e.filters,u=e.setFilter;function d(e){var t=e.item,a=Object(n.useState)(!1),o=Object(De.a)(a,2),i=o[0],l=o[1],s=i?"#666":"#ccc";return r.a.createElement("div",{className:"log",onMouseOver:function(){return l(!0)},onMouseOut:function(){return l(!1)}},r.a.createElement(ft.a,{onMouseEnter:function(){return l(!0)},onClick:function(){return c(t.key)},iconProps:{iconName:"Delete"},styles:{root:{position:"absolute",right:"5px",top:"3px",color:s},rootHovered:{color:"red"}}}),r.a.createElement(St.a,Object.assign({},t,{className:b.exampleRoot})))}var m=s.fromDate,f=s.toDate,p=s.message;function h(e){if(l.length){var t=l.filter(function(t){return t.url==="http://api.chimera-finance.com/api/users/".concat(e,"/")});return t.length?"@"+t[0].username:"Deleted"}return""}m=new Date(m),f=new Date(f),Object(n.useEffect)(function(){document.title="Chimera | Logs",i("4")},[i]),Object(n.useEffect)(function(){o()},[o,s]);var b=Object(Ot.C)({exampleRoot:{marginTop:"8px",textAlign:"left"},nameText:{fontWeight:"bold"}}),E=t.map(function(e){var t="",a="";switch(e.log_type){case ne:t="FollowUser",a="darkgreen";break;case re:t="UserRemove",a="darkred";break;case oe:t="UserSync",a="orange";break;case le:t="Money",a="darkgreen";break;case se:t="Money",a="darkred";break;case ce:t="UserPause",a="darkred";break;case ie:t="UserFollowed",a="darkgreen";break;default:t="Message"}return{key:e.id,activityDescription:[r.a.createElement(Q.a,{className:b.nameText,key:e.id},fe(e.log_type)),r.a.createElement(ot.a,{key:e.id+"a"},"\xa0",h(e.user))],activityIcon:r.a.createElement(J.a,{styles:{root:{color:a}},iconName:t}),comments:[r.a.createElement("span",{key:e.id},e.message)],timeStamp:Ye()(new Date(e.entry_time)).format("DD/MM/YY hh:mm:ss")}});return a?r.a.createElement("div",{id:"logs"},r.a.createElement(xe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto",marginTop:"20px",marginBottom:"12px"}}},r.a.createElement(Pe.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Re.b.Monday,maxDate:f,placeholder:"From date",value:m,onSelectDate:function(e){return u("fromDate",new Date(new Date(e).setHours(0,0,0,0)))}}),r.a.createElement(Pe.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Re.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:m,placeholder:"To date",value:f,onSelectDate:function(e){return u("toDate",new Date(new Date(e).setHours(23,59,59,0)))}}),r.a.createElement(Ze.a,{styles:{root:{width:300}},iconProps:{iconName:"Filter",style:{color:"black"}},value:p,placeholder:"Filter by log text...",onChange:function(e){var t=e.target;return u("message",t.value.toLowerCase())}})),r.a.createElement("div",{className:"logs"},E.map(function(e){return r.a.createElement(d,{key:e.key,item:e})}))):r.a.createElement(K.a,{to:"/login"})}),Ct=a(574);a(533);Object(Ct.a)();var kt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ke,null),r.a.createElement(K.d,null,r.a.createElement(K.b,{exact:!0,path:"/",component:Me}),r.a.createElement(K.b,{exact:!0,path:"/login",component:Ke}),r.a.createElement(K.b,{exact:!0,path:"/users",component:dt}),r.a.createElement(K.b,{exact:!0,path:"/transactions",component:gt}),r.a.createElement(K.b,{exact:!0,path:"/logs",component:vt})),r.a.createElement(je,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Dt={key:"root",storage:f.a},_t=Object(u.a)(Dt,V),wt=Object(i.d)(_t,Object(i.a)(s.a)),Tt=Object(u.b)(wt);window.persistor=Tt,c.a.render(r.a.createElement(l.a,{store:wt},r.a.createElement(d.a,{loading:null,persistor:Tt},r.a.createElement(p.a,null,r.a.createElement(kt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[313,1,2]]]);
//# sourceMappingURL=main.edade664.chunk.js.map