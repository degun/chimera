(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{299:function(e,t,a){e.exports=a.p+"static/media/Chimera_01-01.71e6b608.svg"},343:function(e,t,a){e.exports=a(661)},354:function(e,t,a){},371:function(e,t,a){},375:function(e,t,a){},647:function(e,t,a){},648:function(e,t,a){},649:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){},652:function(e,t,a){},656:function(e,t,a){},657:function(e,t,a){},658:function(e,t,a){},659:function(e,t,a){},660:function(e,t,a){},661:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),c=a.n(o),i=a(46),l=a(20),s=a(280),u=a(194),d=a(281),m=a(282),f=a.n(m),p=a(38),h=a(7),E={token:"",error:null,loading:!1,admin:!1,balance:0,id:0},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return function(e,t){return Object(h.a)({},e,{error:null,loading:!0})}(e);case"AUTH_FAIL":return function(e,t){return Object(h.a)({},e,{error:t.error,loading:!1})}(e,t);case"AUTH_SUCCESS":return function(e,t){return Object(h.a)({},e,{error:null,loading:!1,token:t.token,id:t.id,email:t.email,username:t.username,admin:t.is_staff,balance:t.balance})}(e,t);case"AUTH_SET_TOKEN":return function(e,t){return Object(h.a)({},e,{token:t.token})}(e,t);case"ADMIN_UPDATE_BALANCE":return function(e,t){return Object(h.a)({},e,{balance:parseFloat(t.balance)})}(e,t);case"AUTH_LOGOUT":return Object(h.a)({},E);default:return e}},g=a(34),y={users:[],editing:!1,editingThis:"",adding:!1},S=function(e,t){var a=e.users.map(function(e){return e.url===t.data.url?t.data:e});return Object(h.a)({},e,{users:a})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"USERS_GET_LIST":return function(e,t){return Object(h.a)({},e,{users:t.users})}(e,t);case"USERS_GET_ONE":case"USERS_EDIT_SUCCESS":case"USERS_ARCHIVE_SUCCESS":return S(e,t);case"USERS_REMOVE_SUCCESS":return function(e,t){console.log(e.users);var a=e.users.filter(function(e){return e.url!==t.url});return Object(h.a)({},e,{users:a})}(e,t);case"USERS_BEGIN_EDIT":return function(e,t){return Object(h.a)({},e,{editing:!0,editingThis:t.email})}(e,t);case"USERS_END_EDIT":return function(e){return Object(h.a)({},e,{editing:!1})}(e);case"USERS_BEGIN_ADD":return function(e){return Object(h.a)({},e,{adding:!0})}(e);case"USERS_END_ADD":return function(e){return Object(h.a)({},e,{adding:!1})}(e);case"USERS_ADD_SUCCESS":return function(e,t){return Object(h.a)({},e,{users:[].concat(Object(g.a)(e.users),[t.user])})}(e,t);case"USERS_UPDATE_USER":return S(e,t);case"AUTH_LOGOUT":return Object(h.a)({},y);default:return e}},C=a(39),_=new Date,k=new Date((new Date).setDate(_.getDate()-6)),O={transactions:[],editing:!1,editingThis:0,adding:!1,editData:{},filters:{partners:[],types:[],client:"",fromDate:new Date(k.setHours(0,0,0,0)),toDate:new Date(_.setHours(23,59,59,0))},allPartnersSelected:!0,allTypesSelected:!0},D=function(e,t){var a=e.transactions.map(function(e){return e.url===t.data.url?t.data:e});return Object(h.a)({},e,{transactions:a})},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRANSACTIONS_GET_LIST":return function(e,t){return Object(h.a)({},e,{transactions:t.transactions})}(e,t);case"TRANSACTIONS_EDIT_SUCCESS":case"TRANSACTIONS_ARCHIVE_SUCCESS":return D(e,t);case"TRANSACTIONS_REMOVE_SUCCESS":return function(e,t){var a=e.transactions.filter(function(e){return e.id!==t.id});return Object(h.a)({},e,{transactions:a})}(e,t);case"TRANSACTIONS_BEGIN_EDIT":return function(e,t){return Object(h.a)({},e,{editing:!0,editData:t.transaction})}(e,t);case"TRANSACTIONS_END_EDIT":return function(e){return Object(h.a)({},e,{editing:!1})}(e);case"TRANSACTIONS_BEGIN_ADD":return function(e){return Object(h.a)({},e,{adding:!0})}(e);case"TRANSACTIONS_END_ADD":return function(e){return Object(h.a)({},e,{adding:!1})}(e);case"TRANSACTIONS_ADD_SUCCESS":return function(e,t){return Object(h.a)({},e,{transactions:[t.transaction].concat(Object(g.a)(e.transactions))})}(e,t);case"TRANSACTIONS_SET_FILTER":return function(e,t){return Object(h.a)({},e,{filters:Object(h.a)({},e.filters,Object(C.a)({},t.filter,t.value))})}(e,t);case"TRANSACTIONS_SET_ALL_PARTNERS_SELECTED":return function(e,t){return Object(h.a)({},e,{allPartnersSelected:t.allPartnersSelected})}(e,t);case"TRANSACTIONS_SET_ALL_TYPES_SELECTED":return function(e,t){return Object(h.a)({},e,{allTypesSelected:t.allTypesSelected})}(e,t);case"AUTH_LOGOUT":return Object(h.a)({},O);default:return e}},T={menu:"0"},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SYSTEM_SET_SELECTED_MENU":return function(e,t){return Object(h.a)({},e,{menu:t.selected})}(e,t);case"AUTH_LOGOUT":return Object(h.a)({},T);default:return e}},N={filters:{fromDate:(new Date).setDate(1),toDate:new Date,partner:0,alltime:!1},data:[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DASHBOARD_GET_DATA":return function(e,t){return Object(h.a)({},e,{data:t.data})}(e,t);case"DASHBOARD_SET_FILTER":return function(e,t){return Object(h.a)({},e,{filters:Object(h.a)({},e.filters,Object(C.a)({},t.filter,t.value))})}(e,t);case"AUTH_LOGOUT":return Object(h.a)({},N);default:return e}},R={filters:{fromDate:(new Date).setDate(1),toDate:new Date,message:""},logs:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGS_GET_DATA":return function(e,t){return Object(h.a)({},e,{logs:t.data})}(e,t);case"LOGS_SET_FILTER":return function(e,t){return Object(h.a)({},e,{filters:Object(h.a)({},e.filters,Object(C.a)({},t.filter,t.value))})}(e,t);case"AUTH_LOGOUT":return Object(h.a)({},R);default:return e}},I=Object(i.c)({auth:b,users:v,transactions:w,system:A,dashboard:j,logs:x}),P=(a(354),a(66)),W=a(718),U=a(132),L=a(285),F=a(715),M=a(304),H=a(719),z=a(21),B=a.n(z),G=a(15),V=a.n(G),K="USER_ADD",$="USER_REMOVE",Y="USER_UPDATE",J="USER_DEACTIVATE",Z="USER_ACTIVATE",q="TRANSACTION_ADD",Q="TRANSACTION_REMOVE",X=function(e,t,a){return function(n,r){var o="Bearer "+r().auth.token;B.a.post("http://api.chimera-finance.com/api/logs/",{user:e,log_type:t,message:a},{headers:{Authorization:o}}).then(function(e){n({type:"LOGS_ADD",data:e.data})}).catch(function(e){console.log(e.response),e.response&&e.response&&401===e.response.status&&n(de)})}},ee=function(){return function(e,t){var a=t(),n=a.auth,r=n.token,o=n.admin,c=a.transactions,i=c.allTypesSelected,l=c.filters,s=l.client,u=l.types,d=l.partners,m=l.fromDate,f=l.toDate,p="?from=".concat(new Date(m).toLocaleDateString("it-IT"),"&to=").concat(new Date(f).toLocaleDateString("it-IT"),"&");s&&(p+="client=".concat(s,"&")),i||(p+="types=".concat(u,"&,")),o&&(p+="partners=".concat(d,"&,"));var h="Bearer "+r;!u.length||o&&!d.length?e({type:"TRANSACTIONS_GET_LIST",transactions:[]}):B.a.get("http://api.chimera-finance.com/api/transactions/".concat(p),{headers:{Authorization:h}}).then(function(t){var a=t.data;e({type:"TRANSACTIONS_GET_LIST",transactions:a})}).catch(function(t){console.log(t.response),t.response&&401===t.response.status&&e(de)})}};function te(e){var t=e.split("/");return t[t.length-2]}function ae(e){return e[0].toUpperCase()+e.toLowerCase().slice(1).replace(/[_.]/," ")}function ne(e){return e.toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric"})}function re(e){return Math.round(100*e+Number.EPSILON)/100}V.a.register("locale","al",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},currency:{symbol:"\u20ac"}});var oe=function(){return function(e,t){var a="Bearer "+t().auth.token;B.a.get("http://api.chimera-finance.com/api/users/",{headers:{Authorization:a}}).then(function(t){e({type:"USERS_GET_LIST",users:t.data})}).catch(function(t){console.log(t.response),t.response&&401===t.response.status&&e(de)})}},ce=function(e){return function(t,a){var n=a().auth.token;B.a.get("http://api.chimera-finance.com/api/users/".concat(e,"/"),{headers:{Authorization:"Bearer "+n}}).then(function(e){t({type:"USERS_GET_ONE",data:e.data})}).catch(function(e){console.log(e)})}},ie=function(){return function(e,t){var a=t().auth,n=a.token,r=a.id;console.log(n,r),B.a.get("http://api.chimera-finance.com/api/users/".concat(r,"/"),{headers:{Authorization:"Bearer "+n}}).then(function(t){console.log(t),e({type:"ADMIN_UPDATE_BALANCE",balance:t.data.partner_data.balance})}).catch(function(e){console.log(e)})}},le=function(e,t,a,n,r,o){return{type:"AUTH_SUCCESS",token:e,id:t,email:a,username:n,is_staff:r,balance:o}},se=function(e){return{type:"AUTH_FAIL",error:e}},ue=function(e){return{type:"AUTH_SET_TOKEN",token:e}},de=function(){return function(e){B.a.post("http://api.chimera-finance.com/api/auth/logout/").then(function(){e({type:"AUTH_LOGOUT"}),window.persistor.flush(),window.persistor.purge()}).catch(function(e){console.log(e.message)})}},me=function(e){return function(t){t({type:"SYSTEM_SET_SELECTED_MENU",selected:e})}};a(371);var fe=Object(l.b)(function(e){return{token:e.auth.token,admin:e.auth.admin,menu:e.system.menu,username:e.auth.username}},function(e){return{logOut:function(){return e(de())},setMenu:function(t){return e(me(t))},refreshToken:function(t){return e(function(e){return function(t){B.a.post("http://api.chimera-finance.com/api/auth-jwt-refresh/",{token:e}).then(function(e){t(ue(e.data.token))}).catch(function(e){console.log("refresh token error "+e),t(de())})}}(t))}}})(function(e){var t=e.logOut,a=e.refreshToken,o=e.setMenu,c=e.token,i=e.menu,l=e.admin,s=e.username;return Object(n.useEffect)(function(){var e=setInterval(function(){a(c)},6e4);return function(){return clearInterval(e)}},[a,c]),Object(n.useEffect)(function(){return window.addEventListener("focus",function(){return a(c)}),function(){return window.removeEventListener("focus")}},[]),c?r.a.createElement("div",{id:"menu"},r.a.createElement("nav",null,r.a.createElement(W.a,{linkSize:U.b.normal,linkFormat:U.a.links,selectedKey:i,onLinkClick:function(e){o(e.key.slice(1))}},r.a.createElement(L.a,{iconProps:{iconName:"People"},itemKey:"0",headerText:"Dashboard",onClick:function(){return o("home")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/"},r.a.createElement(F.a,{iconName:"Diagnostic"})," Dashboard")}}),l?r.a.createElement(L.a,{itemKey:"1",headerText:"Users",onClick:function(){return o("users")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/users"},r.a.createElement(F.a,{iconName:"People"})," Users")}}):null,r.a.createElement(L.a,{itemKey:"2",headerText:"Transactions",onClick:function(){return o("transactions")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/transactions"},r.a.createElement(F.a,{iconName:"Money"})," Transactions")}}),r.a.createElement(L.a,{itemKey:"4",headerText:"Transactions",onClick:function(){return o("logs")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/logs"},r.a.createElement(F.a,{iconName:"TextDocument"})," Logs")}})),r.a.createElement("div",null,r.a.createElement(H.a,{variant:"large",styles:{root:{verticalAlign:"middle",color:"#777"}}},s,"  |  "),r.a.createElement(M.a,{className:"logout",allowDisabledFocus:!0,text:"Logout",onClick:function(){return t(),r.a.createElement(P.a,{to:"/login"})},iconProps:{iconName:"Leave"}})))):null}),pe=a(10),he=a(290),Ee=a(709),be=a(16);a(375);var ge=Object(l.b)(function(e){return{token:e.auth.token}},function(e){return{getTransactions:function(){return e(ee())},updateThisUser:function(){return e(ie())}}})(function(e){var t=e.token,a=e.getTransactions,o=e.updateThisUser,c=Object(he.w3cwebsocket)("ws://127.0.0.1:8000/notifications/?".concat(t)),i=Object(n.useState)(null),l=Object(pe.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)([]),m=Object(pe.a)(d,2),f=m[0],p=m[1];function h(e){var t=e.head,a=e.body,o=e.id,c=e.hideNotification,i=Object(n.useState)(!0),l=Object(pe.a)(i,2),u=l[0],d=l[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){d(!1),c(o)},1e4);return function(){return clearTimeout(e)}},[]),r.a.createElement("div",null,u?r.a.createElement(Ee.a,{className:"ms-CalloutExample-callout",onClick:function(){return c(o)},isBeakVisible:!1,target:s,gapSpace:0,directionalHint:be.a.bottomRightEdge,styles:{root:{width:"280px",backgrounColor:"white",zIndex:8}}},r.a.createElement("div",{className:"content"},r.a.createElement(H.a,{styles:{root:{display:"block",padding:"20px 20px 0px 20px"}},variant:"large"},t),r.a.createElement(H.a,{styles:{root:{display:"block",padding:"0px 20px 20px 20px"}},variant:"medium"},a))):null)}return Object(n.useEffect)(function(){return c.onopen=function(){console.log("WebSocket Client Connected")},c.onmessage=function(e){var t=JSON.parse(e.data),n=t.message,r=t.id,c=t.type;p([].concat(Object(g.a)(f),[{head:ae(c),message:n,id:r}])),a(),o()},function(){return c.close()}},[t]),r.a.createElement("div",{id:"notifications"},r.a.createElement("div",{className:"ms-CalloutCoverExample-buttonArea",id:"anchor",ref:function(e){return u(e)}},f.map(function(e,t){return r.a.createElement(h,{key:t,head:e.head,body:e.message,id:e.id,hideNotification:function(e){return function(e){p(f.filter(function(t){return t.id!==e}))}(e)}})})))}),ye=a(27),Se=a(720),ve=a(706),Ce=a(11),_e=a(712),ke=a(716),Oe=a(68),De=a.n(Oe);a(647);var we=Object(l.b)(function(e){return{users:e.users.users,balance:e.auth.balance,admin:e.auth.admin,partnerId:e.auth.id,data:e.dashboard.data,filters:e.dashboard.filters}},function(e){return{setFilter:function(t,a){return e(function(e,t){return{type:"DASHBOARD_SET_FILTER",filter:e,value:t}}(t,a))},getData:function(){return e(function(e,t){var a=t(),n=a.dashboard.filters,r=n.fromDate,o=n.toDate,c=n.alltime,i=a.auth.token;console.log(c);var l=c?"":"from=".concat(new Date(r).toLocaleDateString("it-IT"),"&to=").concat(new Date(o).toLocaleDateString("it-IT"),"&"),s="?".concat(l),u="Bearer "+i;B.a.get("http://api.chimera-finance.com/api/transactions/".concat(s),{headers:{Authorization:u}}).then(function(t){e({type:"DASHBOARD_GET_DATA",data:t.data})}).catch(function(t){console.log(t.response),t.response&&t.response&&401===t.response.status&&e(de)})})}}})(function(e){var t=e.admin,a=e.balance,o=e.users,c=e.setFilter,i=e.filters,l=e.getData,s=e.data,u=e.partnerId,d=i.fromDate,m=i.toDate,f=i.partner,p=i.alltime,E=t?f:parseInt(u);Object(n.useEffect)(function(){l()},[l,d,m,f,p]),d=new Date(d),m=new Date(m);var b=o.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function y(e){return e.toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric"})}var S,v=(S=(S=s).filter(function(e){return"Payment"!==e.transaction_type}),o.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/");return{id:parseInt(t[t.length-2]),username:e.username}}).map(function(e){return{name:e.username,wire:re(S.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"Wire"===e.transaction_type||"Withdraw"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),cc:re(S.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"Credit Card"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),profit:re(S.filter(function(t){return parseInt(t.user)===e.id}).reduce(function(e,t){return parseFloat(t.amount)-parseFloat(t.amount_paid)+e},0))}})),C=v.reduce(function(e,t){return e+t.wire},0),_=v.reduce(function(e,t){return e+t.cc},0),k=C+_,O=function(e){var t=s.sort(function(e,t){return new Date(e.entry_time)-new Date(t.entry_time)}).filter(function(t){return t.user===parseInt(e)}).filter(function(e){return"Payment"!==e.transaction_type}).map(function(e){return Object(h.a)({},e,{entry_time:new Date(e.entry_time).toLocaleDateString("it-IT").replace("/2019","")})});return Object(g.a)(new Set(t.map(function(e){return e.entry_time}))).map(function(e){return{name:e,wire:re(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"Wire"===e.transaction_type||"Withdraw"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),cc:re(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"Credit Card"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),profit:re(t.filter(function(t){return t.entry_time===e}).reduce(function(e,t){return parseFloat(t.amount)-parseFloat(t.amount_paid)+e},0))}})}(E),D=O.reduce(function(e,t){return e+t.wire},0),w=O.reduce(function(e,t){return e+t.cc},0),T=D+w,A=o.filter(function(e){return!e.is_staff}).reduce(function(e,t){return e+parseFloat(t.partner_data.balance)},0),N=E&&t?b.find(function(e){return e.key===E}).text:null;return r.a.createElement("div",{id:"dashboard"},r.a.createElement(_e.a,{className:"bar",horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(_e.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},t?r.a.createElement("div",{className:"combo"},r.a.createElement(ke.a,{autoComplete:"on",selectedKey:E,options:b,placeholder:"Partner...",onChange:function(e,t){return c("partner",t.key)},style:{width:140}}),E?r.a.createElement("span",{className:"clear",onClick:function(){return c("partner",null)}},"Clear"):null):null,r.a.createElement(ve.a,{style:{width:140},formatDate:function(e){return y(e)},firstDayOfWeek:Ce.b.Monday,maxDate:m,placeholder:"From date",value:d,onSelectDate:function(e){c("fromDate",new Date(new Date(e).setHours(0,0,0,0))),c("alltime",!1)}}),r.a.createElement(ve.a,{style:{width:140},formatDate:function(e){return y(e)},firstDayOfWeek:Ce.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:d,placeholder:"To date",value:m,onSelectDate:function(e){c("toDate",new Date(new Date(e).setHours(23,59,59,0))),c("alltime",!1)}}),r.a.createElement(Se.a,{inlineLabel:!0,label:"Time limit",onText:"All time",offText:"Date range",checked:p,onChange:function(){return c("alltime",!p)}})),r.a.createElement("div",{className:"balance"},r.a.createElement("div",{className:"txt"},t?"To pay: ":"Balance: "),r.a.createElement(H.a,{variant:"xLarge"},r.a.createElement(De.a,{duration:500,value:parseFloat(t?A:a),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))),E?r.a.createElement("section",{className:"userInfo"},r.a.createElement(ye.b,{width:720,height:400,data:O},r.a.createElement(ye.e,{strokeDasharray:"1 13"}),r.a.createElement(ye.h,{dataKey:"name"}),r.a.createElement(ye.i,null),r.a.createElement(ye.g,null),r.a.createElement(ye.f,null),r.a.createElement(ye.a,{type:"monotone",dataKey:"wire",stackId:"one",stroke:"#fce100",fill:"#fce100"}),r.a.createElement(ye.a,{type:"monotone",dataKey:"cc",stackId:"one",stroke:"#ffaa44",fill:"#ffaa44"}),t?r.a.createElement(ye.a,{type:"monotone",dataKey:"profit",stackId:"one",stroke:"#82ca9d",fill:"darkgreen"}):null),r.a.createElement("div",{className:"cyphers"},r.a.createElement("table",null,r.a.createElement("tbody",null,t?r.a.createElement("tr",null,r.a.createElement("td",null,"Partner: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"xLarge"},N))):null,r.a.createElement("tr",null,r.a.createElement("td",null,"Deposits: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"xLarge"},r.a.createElement(De.a,{duration:500,value:parseFloat(T),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Wire: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"medium"},r.a.createElement(De.a,{duration:500,value:parseFloat(D),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Credit Card: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"medium"},r.a.createElement(De.a,{duration:500,value:parseFloat(w),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))))))):null,t?r.a.createElement("section",{className:"allInfo"},r.a.createElement(ye.d,{width:720,height:400,data:v},r.a.createElement(ye.e,{strokeDasharray:"1 13"}),r.a.createElement(ye.h,{dataKey:"name"}),r.a.createElement(ye.i,null),r.a.createElement(ye.g,null),r.a.createElement(ye.f,null),r.a.createElement(ye.c,{dataKey:"wire",fill:"#fce100"}),r.a.createElement(ye.c,{dataKey:"cc",fill:"#ffaa44"}),r.a.createElement(ye.c,{dataKey:"profit",fill:"darkgreen"})),r.a.createElement("div",{className:"cyphers"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Deposits: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"xLarge"},r.a.createElement(De.a,{duration:500,value:parseFloat(k),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Wire: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"medium"},r.a.createElement(De.a,{duration:500,value:parseFloat(C),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Credit Card: "),r.a.createElement("td",null,r.a.createElement(H.a,{variant:"medium"},r.a.createElement(De.a,{duration:500,value:parseFloat(_),formatValue:function(e){return V()(parseFloat(e)).format("0,0.00 $")}})))))))):null)});a(648);var Te=Object(l.b)(function(e){return{token:e.auth.token,balance:e.auth.balance}},function(e){return{selectMenu:function(t){return e(me(t))}}})(function(e){var t=e.selectMenu,a=e.token;return e.balance,Object(n.useEffect)(function(){t("0"),document.title="Chimera | Home"},[t]),a?r.a.createElement("div",{id:"home"},r.a.createElement(we,null)):r.a.createElement(P.a,{to:"/login"})}),Ae=a(195),Ne=a(701),je=a(711),Re=a(299),xe=a.n(Re);a(649);var Ie=Object(l.b)(function(e){return{token:e.auth.token,error:e.auth.error,loading:e.auth.loading}},function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),B.a.post("http://api.chimera-finance.com/api/auth/login/",{email:e,password:t}).then(function(e){var t=e.data,n=t.token,r=t.user,o=r.pk,c=r.email,i=r.username;B.a.get("http://api.chimera-finance.com/api/users/".concat(o,"/"),{headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){var t=e.data,r=t.is_active,l=t.is_staff,s=t.partner_data,u=parseFloat(s.balance);r&&a(le(n,o,c,i,l,u)),l&&(a(oe()),a(ee()))})}).catch(function(e){a(se(e))})}}(t,a))}}})(function(e){var t=e.login,a=e.error,o=e.token,c=Object(n.useState)(""),i=Object(pe.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(""),d=Object(pe.a)(u,2),m=d[0],f=d[1];Object(n.useEffect)(function(){document.title="Chimera | Login"},[]);var p=Object(Ae.b)({opacity:1,from:{opacity:0}});return o?r.a.createElement(P.a,{to:"/"}):r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:xe.a,alt:"logo file"}),r.a.createElement(Ae.a.div,{style:p},r.a.createElement("span",{className:"Chimera"},"Chimera"))),r.a.createElement("form",null,r.a.createElement("h3",null,"Log in"),r.a.createElement(je.a,{name:"email",type:"email",label:"email",placeholder:"enter email",onChange:function(e){var t=e.target;return s(t.value)},onKeyPress:function(e){return"Enter"===e.key?t(l,m):null}}),r.a.createElement(je.a,{name:"password",label:"Password",type:"password",placeholder:"enter password",onChange:function(e){var t=e.target;return f(t.value)},onKeyPress:function(e){return"Enter"===e.key?t(l,m):null}}),r.a.createElement(Ne.a,{className:"login",onClick:function(){return t(l,m)}},"Log in"),r.a.createElement("h6",null,a&&a.message)))}),Pe=a(65),We=a.n(Pe),Ue=a(723),Le=a(302),Fe=a(703),Me=a(45),He=a(713),ze=a(710),Be=a(708),Ge=a(78),Ve=a(303),Ke=a(306);a(650);var $e=Object(l.b)(function(e){return{token:e.auth.token}},function(e){return{save:function(t,a,n,r,o,c){return e(function(e,t,a,n){return function(r,o){var c=o(),i=c.users.users.filter(function(t){return t.url===e})[0],l=i.username,s=i.email,u=i.partner_data.balance,d=i.partner_data.Wrate,m=i.partner_data.CCrate,f=i.is_staff,p=n.balance,h=n.Wrate,E=n.CCrate,b="Bearer "+c.auth.token;B.a.patch(e,{username:t,email:a,partner_data:n},{headers:{Authorization:b}}).then(function(n){r({type:"USERS_EDIT_SUCCESS",data:n.data}),r({type:"USERS_END_EDIT"}),r(ie()),r(ce(te(e)));var o=f?"admin":"partner with id ".concat(te(e)),c=t!==l?" username from ".concat(l," to ").concat(t,","):"",i=a!==s?" email from ".concat(s," to ").concat(a,","):"",b=parseFloat(p)!==parseFloat(u)?" balance from ".concat(V()(parseFloat(u)).format("0,0.00 $")," to ").concat(V()(parseFloat(p)).format("0,0.00 $"),","):"",g=h!==d?" Wire rate from ".concat(d," to ").concat(h,","):"",y=E!==m?" Credit Card rate from ".concat(m," to ").concat(E,","):"",S="Updated ".concat(o,": changed").concat(c+i+b+g+y).replace(/.$/,".");r(X(te(e),Y,S))}).catch(function(e){return r({type:"USERS_EDIT_FAIL",error:e})})}}(t,a,n,r))},toggleActiveState:function(t,a){return e(function(e,t){return function(a,n){var r=n(),o=r.users.users.filter(function(t){return t.url===e})[0].username,c="Bearer "+r.auth.token;B.a.patch(e,{is_active:t,partner_data:{}},{headers:{Authorization:c}}).then(function(n){a({type:"USERS_ARCHIVE_SUCCESS",data:n.data}),a({type:"USERS_END_EDIT"}),a(ce(te(e)));var r=t?Z:J,c="".concat(t?"Activated":"Deactivated"," partner ").concat(o,". Now he will ").concat(t?"again":"not"," be available for new transactions and").concat(t?"":" will not be able to"," log in.");a(X(te(e),r,c))}).catch(function(e){return a({type:"USERS_ARCHIVE_FAIL",error:e})})}}(t,a))},endEdit:function(){return e(function(e){e({type:"USERS_END_EDIT"})})},remove:function(t){return e(function(e){return function(t,a){var n=a(),r=n.auth.token,o=n.users.users.filter(function(t){return t.url===e})[0],c="Bearer "+r;B.a.delete(e,{headers:{Authorization:c}}).then(function(a){var n=o.username,r=o.partner_data.balance;t({type:"USERS_REMOVE_SUCCESS",url:e}),t({type:"USERS_END_EDIT"}),t(ie()),t(ee());var c="Removed partner ".concat(n,", along with his balance of ").concat(r," and all his transactions.");t(null,$,c)}).catch(function(e){return t({type:"USERS_REMOVE_FAIL",error:e})})}}(t))}}})(function(e){var t=e.editing,a=e.endEdit,o=e.username,c=e.email,i=e.Wrate,l=e.CCrate,s=e.balance,u=e.active,d=e.staff,m=e.url,f=e.save,p=e.remove,h=e.toggleActiveState,E=Object(n.useState)(o),b=Object(pe.a)(E,2),g=b[0],y=b[1],S=Object(n.useState)(c),v=Object(pe.a)(S,2),C=v[0],_=v[1],k=Object(n.useState)(s),O=Object(pe.a)(k,2),D=O[0],w=O[1],T=Object(n.useState)(i),A=Object(pe.a)(T,2),N=A[0],j=A[1],R=Object(n.useState)(l),x=Object(pe.a)(R,2),I=x[0],P=x[1],W=Object(n.useState)(u),U=Object(pe.a)(W,2),L=U[0],z=U[1],B=Object(n.useState)(!1),G=Object(pe.a)(B,2),V=G[0],K=G[1];Object(n.useEffect)(function(){z(u)},[u]);var $=L?"brown":"green",Y=L?"darkbrown":"darkgreen",J=L?"darkred":"darkgreen";return r.a.createElement("div",null,r.a.createElement(ze.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"editModal"},r.a.createElement("div",{className:"head"},r.a.createElement(H.a,null,"Edit user"),r.a.createElement(Ke.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(F.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(_e.a,null,r.a.createElement(_e.a,{horizontal:!0},r.a.createElement(je.a,{label:"Username",name:"username",placeholder:"username",value:g||"",onChange:function(e){var t=e.target;return y(t.value)}}),r.a.createElement(je.a,{label:"Email",name:"email",placeholder:"email",value:C,onChange:function(e){var t=e.target;return _(t.value)}})),r.a.createElement(_e.a,{horizontal:!0},r.a.createElement(je.a,{type:"number",label:"Balance",name:"balance",placeholder:"balance",value:D||0,onChange:function(e){var t=e.target;return w(t.value)}}),r.a.createElement(je.a,{type:"number",step:.01,min:0,max:1,label:"Wire Rate",name:"wire rate",placeholder:"rate",value:N||void 0,onChange:function(e){var t=e.target;return j(t.value)}}),r.a.createElement(je.a,{type:"number",step:.01,min:0,max:1,label:"Credit Card Rate",name:"credit card rate",placeholder:"rate",value:I||void 0,onChange:function(e){var t=e.target;return P(t.value)}})),r.a.createElement(_e.a,{horizontal:!0,className:"actions"},r.a.createElement(M.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),d?null:r.a.createElement(M.a,{className:"delete",styles:{root:{color:$,borderColor:$},rootHovered:{color:Y,borderColor:Y},rootPressed:{color:J,borderColor:J}},onClick:function(){return h(m,!L)},text:L?"Deactivate":"Activate",split:!0,menuProps:{items:[{key:"deleteUser",text:"Delete",style:{color:"red",marginRight:0},onClick:function(){return K(!0)},styles:{root:{color:"red"},rootHovered:{color:"red"},rootPressed:{color:"darkred"}},iconProps:{iconName:"Delete",color:"red"}}]}}),r.a.createElement(Ne.a,{className:"save",onClick:function(){return f(m,g,C,{balance:D,Wrate:N,CCrate:I})},text:"Save"}))))),r.a.createElement(Be.a,{hidden:!V,onDismiss:function(){return K(!1)},dialogContentProps:{type:Ge.a.normal,title:"Delete user ".concat(o,"?"),subText:"Warning! By deleting this user you will delete all his data, all his related transactions and the resulting profit from this user. Are you absolutely sure you want to delete this user?"},modalProps:{isBlocking:!0,styles:{main:{maxWidth:450}},dragOptions:!0}},r.a.createElement(Ve.a,null,r.a.createElement(Ne.a,{styles:{root:{backgroundColor:"red"},rootHovered:{backgroundColor:"orangered"},rootPressed:{backgroundColor:"darkred"}},onClick:function(){p(m),K(!1)},text:"Delete"}),r.a.createElement(M.a,{onClick:function(){return K(!1)},text:"Cancel"}))))});a(651);var Ye=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{add:function(t,a,n,r,o){return e(function(e,t,a,n){return function(r,o){var c="Bearer "+o().auth.token;B.a.post("http://api.chimera-finance.com/api/users/",{username:e,email:t,password:a,partner_data:n},{headers:{Authorization:c}}).then(function(e){var t=e.data,a=t.url,n=t.username,o=t.partner_data,c=o.balance,i=o.Wrate,l=o.CCrate;r({type:"USERS_ADD_SUCCESS",user:e.data}),r({type:"USERS_END_ADD"}),r(ie()),r(X(te(a),K,"Added partner ".concat(n," with initial balance ").concat(V()(parseFloat(c)).format("0,0.00 $")," Wire rate ").concat(i," and Credit Card rate ").concat(l,".")))}).catch(function(e){r({type:"USERS_ADD_FAIL"})})}}(t,a,n,r))},endAdd:function(){return e(function(e){e({type:"USERS_END_ADD"})})}}})(function(e){var t=e.adding,a=e.endAdd,o=e.add,c=e.users,i=Object(n.useState)(""),l=Object(pe.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(pe.a)(d,2),f=m[0],p=m[1],E=Object(n.useState)(""),b=Object(pe.a)(E,2),g=b[0],y=b[1],S=Object(n.useState)(""),v=Object(pe.a)(S,2),C=v[0],_=v[1],k=Object(n.useState)(0),O=Object(pe.a)(k,2),D=O[0],w=O[1],T=Object(n.useState)(1),A=Object(pe.a)(T,2),N=A[0],j=A[1],R=Object(n.useState)(1),x=Object(pe.a)(R,2),I=x[0],P=x[1],W=Object(n.useState)(!1),U=Object(pe.a)(W,2),L=U[0],z=U[1],G=Object(n.useState)({email:"",username:"",password:"",passwordMatch:""}),V=Object(pe.a)(G,2),K=V[0],$=V[1];return Object(n.useEffect)(function(){!(s&&f&&g&&C)||K.username||K.email||K.password||K.passwordMatch?z(!1):z(!0)},[s,f,g,C,K]),r.a.createElement(ze.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"editModal"},r.a.createElement("div",{className:"head"},r.a.createElement(H.a,null,"Add user"),r.a.createElement(Ke.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(F.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(_e.a,null,r.a.createElement(_e.a,{horizontal:!0},r.a.createElement(je.a,{label:"Email",name:"email",placeholder:"email",errorMessage:K.email,value:f,onChange:function(e){var t=e.target;return p(t.value)},onBlur:function(){f?B.a.get("http://apilayer.net/api/check?access_key=b7de3ac4dc7084aee62c3517ccb05212&email=".concat(f,"&smtp=1&format=1")).then(function(e){var t=e.data,a=t.mx_found,n=t.smtp_check;console.log(e.data),void 0!==a&&$(a&&n?Object(h.a)({},K,{email:""}):Object(h.a)({},K,{email:"email not valid"})),c.map(function(e){return e.email}).forEach(function(e){e===f&&$(Object(h.a)({},K,{email:"User with this email is already present"}))})}):$(Object(h.a)({},K,{email:""}))}}),r.a.createElement(je.a,{label:"Username",name:"username",placeholder:"username",errorMessage:K.username,value:s,onChange:function(e){var t=e.target;return u(t.value)},onBlur:function(){var e=new RegExp("^[A-Z]+$","i");if(s){e.test(s)?$(Object(h.a)({},K,{username:""})):$(Object(h.a)({},K,{username:"Username should contain only letters"}));var t=c.map(function(e){return e.username});for(var a in t)a===s&&$(Object(h.a)({},K,{username:"User with this username is already present"}))}else $(Object(h.a)({},K,{username:""}))}})),r.a.createElement(_e.a,{horizontal:!0},r.a.createElement(je.a,{type:"password",label:"Password",name:"password1",placeholder:"password1",errorMessage:K.password,value:g,onChange:function(e){var t=e.target;return y(t.value)},onBlur:function(){var e=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})");g?e.test(g)?$(Object(h.a)({},K,{password:""})):$(Object(h.a)({},K,{password:"Password not valid"})):$(Object(h.a)({},K,{password:""}))}}),r.a.createElement(je.a,{type:"password",label:"Confirm Password",name:"password2",placeholder:"password2",errorMessage:K.passwordMatch,value:C,onChange:function(e){var t=e.target;return _(t.value)},onBlur:function(){$(C?g===C?Object(h.a)({},K,{passwordMatch:""}):Object(h.a)({},K,{passwordMatch:"Passwords do not match"}):Object(h.a)({},K,{passwordMatch:""}))}})),r.a.createElement(_e.a,{horizontal:!0},r.a.createElement(je.a,{type:"number",label:"Balance",name:"balance",placeholder:"balance",value:D,onChange:function(e){var t=e.target;return w(t.value)}}),r.a.createElement(je.a,{type:"number",step:.01,min:0,max:1,label:"Wire Rate",name:"wire rate",placeholder:"rate",value:N,onChange:function(e){var t=e.target;return j(t.value)}}),r.a.createElement(je.a,{type:"number",step:.01,min:0,max:1,label:"Credit Card Rate",name:"credit card rate",placeholder:"rate",value:I,onChange:function(e){var t=e.target;return P(t.value)}})),r.a.createElement(_e.a,{horizontal:!0,className:"actions"},r.a.createElement(M.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(Ne.a,{disabled:!L,className:"add",onClick:function(){return o(s,f,g,{balance:D,Wrate:N,CCrate:I})},text:"Add"})))))});a(652);V.a.locale("al");var Je=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users,editing:e.users.editing,editingThis:e.users.editingThis,adding:e.users.adding}},function(e){return{selectMenu:function(t){return e(me(t))},setToken:function(t){return e(ue(t))},getUsers:function(){return e(oe())},beginEdit:function(t){return e(function(e){return function(t){t({type:"USERS_BEGIN_EDIT",email:e})}}(t))},beginAdd:function(){return e(function(e){e({type:"USERS_BEGIN_ADD"})})}}})(function(e){var t=e.getUsers,a=e.selectMenu,o=e.beginEdit,c=e.beginAdd,i=e.token,l=e.users,s=e.editing,u=e.editingThis,d=e.adding,m=Object(n.useState)("staff"),f=Object(pe.a)(m,2),p=f[0],h=f[1],E=Object(n.useState)(!0),b=Object(pe.a)(E,2),g=b[0],y=b[1],S=Object(n.useState)(""),v=Object(pe.a)(S,2),C=v[0],_=v[1],k=Object(n.useState)("partner"),O=Object(pe.a)(k,2),D=O[0],w=O[1];Object(n.useEffect)(function(){t()},[t]);var T,A,N,j,R=[{key:"username",name:"Username",fieldName:"username",minWidth:60,maxWidth:80,isSorted:"username"===p,isSortedDescending:g,onColumnClick:I,data:"string",isPadded:!0},{key:"email",name:"Email",fieldName:"email",minWidth:120,maxWidth:200,isSorted:"email"===p,isSortedDescending:g,onColumnClick:I,data:"string",isPadded:!0},{key:"date_joined",name:"Joined",fieldName:"date_joined",minWidth:120,maxWidth:140,isSorted:"date_joined"===p,isSortedDescending:g,onColumnClick:I,data:"date",isPadded:!0},{key:"last_login",name:"Last login",fieldName:"last_login",minWidth:120,maxWidth:140,isSorted:"last_login"===p,isSortedDescending:g,onColumnClick:I,data:"date",isPadded:!0},{key:"balance",name:"Balance",fieldName:"balance",minWidth:100,maxWidth:150,isSorted:"balance"===p,isSortedDescending:g,onColumnClick:I,data:"number",isPadded:!0},{key:"Wrate",name:"Wire Rate",fieldName:"Wrate",minWidth:40,maxWidth:150,isSorted:"Wrate"===p,isSortedDescending:g,onColumnClick:I,data:"number",isPadded:!0},{key:"CCrate",name:"Credit Card Rate",fieldName:"CCrate",minWidth:40,maxWidth:150,isSorted:"CCrate"===p,isSortedDescending:g,onColumnClick:I,data:"number",isPadded:!0},{key:"is_active",name:"Active",fieldName:"active",minWidth:60,maxWidth:100,onColumnClick:I,isPadded:!1}],x=(T=l.map(function(e){return{email:e.email,last_login:We()(new Date(e.last_login)).fromNow().replace("50 years ago","never"),date_joined:We()(new Date(e.date_joined)).fromNow(),username:e.username,balance:parseFloat(e.partner_data.balance),Wrate:e.partner_data.Wrate,CCrate:e.partner_data.CCrate,active:e.is_active,staff:e.is_staff,url:e.url}}),A=p,N=g,T.sort(function(e,t){var a=e[A],n=t[A];return N?a<n?-1:a>n?1:0:a>n?-1:a<n?1:0})).filter(function(e){return-1!==e.email.indexOf(C)||-1!==e.username.indexOf(C)}).filter(function(e){switch(D){case"partner":return!e.staff;case"admin":return e.staff;default:return!0}});function I(e,t){var a=t.key;h(a),y(!0),a===p&&y(!g)}return Object(n.useEffect)(function(){a("1"),document.title="Chimera | Users"},[t,a]),j=x.filter(function(e){return e.email===u})[0],i?r.a.createElement("div",{id:"users"},r.a.createElement(Ue.a,null,r.a.createElement(_e.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(_e.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},r.a.createElement(je.a,{style:{width:300},type:"text",value:C,placeholder:"Filter by username or email...",onChange:function(e){var t=e.target;return _(t.value)}}),r.a.createElement(ke.a,{style:{width:150},options:[{key:"admin",text:"Admin"},{key:"partner",text:"Partner"}],selectedKey:D,placeholder:"Filter by role...",onChange:function(e,t){var a=t.key;return w(a)}})),r.a.createElement(Ne.a,{allowDisabledFocus:!0,disabled:d,checked:!1,text:"New user",onClick:function(){return c()},iconProps:{iconName:"Add"},align:"end",styles:{root:{justifySelf:"flex-end"}}})),r.a.createElement(He.a,null,r.a.createElement(Fe.a,{className:"table",maxWidth:960,items:x,compact:!1,columns:R,selectionMode:Me.b.none,isHeaderVisible:!0,onItemInvoked:function(e){var t=e.email;o(t)},checkboxVisibility:2,onRenderItemColumn:function(e,t,a){var n=e[a.fieldName];switch(a.key){case"is_active":return n?r.a.createElement(F.a,{iconName:"StatusCircleInner",styles:{root:{marginLeft:"14px"}}}):null;case"balance":return V()(n).format("0,0.00 $");default:return r.a.createElement("span",null,n)}},onRenderRow:function(e){return r.a.createElement(Le.a,Object.assign({},e,{styles:{root:{backgroundColor:e.item.staff?"lightblue":"white"}}}))}}))),s?r.a.createElement($e,Object.assign({editing:s},j)):null,d?r.a.createElement(Ye,{adding:d}):null):r.a.createElement(P.a,{to:"/login"})}),Ze=a(18),qe=a(727),Qe=a(707),Xe=a(697),et=a(301);a(656);V.a.locale("al");var tt=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{add:function(t,a,n,r,o,c){return e(function(e,t,a,n,r,o){return"Payment"===e&&(t="-"),function(c,i){var l=i(),s=l.users.users.filter(function(e){return e.url==="http://api.chimera-finance.com/api/users/".concat(o,"/")})[0].username,u="Bearer "+l.auth.token;B.a.post("http://api.chimera-finance.com/api/transactions/",{transaction_type:e,client_name:t,amount:a,amount_paid:n,rate:r,user:o},{headers:{Authorization:u}}).then(function(i){var l;c({type:"TRANSACTIONS_ADD_SUCCESS",transaction:i.data}),c({type:"TRANSACTIONS_END_ADD"}),c(ce(o)),c(ie());var u=V()(Math.abs(parseFloat(a))).format("0,0.00 $"),d=V()(Math.abs(parseFloat(n))).format("0,0.00 $");switch(e){case"Wire":case"Credit Card":l="Added deposit of ".concat(u," by client ").concat(t,", made via ").concat(e,". Amount registered on partner ").concat(s," is ").concat(d,", given that the actual rate is ").concat(r,".");break;case"Withdraw":l="Client ".concat(t," withdrawed ").concat(u," from main balance. ").concat(d," were substracted from ").concat(s,"'s balance, given that the actual rate is ").concat(r,".");break;case"Payment":l="Made payment of ".concat(u," to ").concat(s);break;default:l="Made transaction of type ".concat(e,". Partner ").concat(s,", main amount ").concat(u,", partner amount ").concat(d," (because rate is ").concat(r,").")}c(X(o,q,l))}).catch(function(e){c({type:"TRANSACTIONS_ADD_FAIL",e:e})})}}(t,a,n,r,o,c))},endAdd:function(){return e(function(e){e({type:"TRANSACTIONS_END_ADD"})})}}})(function(e){var t=e.adding,a=e.endAdd,o=e.add,c=e.users,i=Object(n.useState)(""),l=Object(pe.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(pe.a)(d,2),f=m[0],p=m[1],h=Object(n.useState)(0),E=Object(pe.a)(h,2),b=E[0],g=E[1],y=Object(n.useState)(0),S=Object(pe.a)(y,2),v=S[0],C=S[1],_=Object(n.useState)(""),k=Object(pe.a)(_,2),O=k[0],D=k[1],w=Object(n.useState)({partner_data:{rate:1}}),T=Object(pe.a)(w,2),A=T[0],N=T[1],j=Object(n.useState)(1),R=Object(pe.a)(j,2),x=R[0],I=R[1],P=Object(n.useState)(1),W=Object(pe.a)(P,2),U=W[0],L=W[1],z=Object(n.useState)(!1),B=Object(pe.a)(z,2),G=B[0],K=B[1];Object(n.useEffect)(function(){switch(s){case"Wire":I(parseFloat(A.partner_data.Wrate).toPrecision(2));break;case"Credit Card":I(parseFloat(A.partner_data.CCrate).toPrecision(2));break;case"Withdraw":I(parseFloat(A.partner_data.Wrate).toPrecision(2));break;case"Payment":default:I(1)}},[A,s]),Object(n.useEffect)(function(){g(Math.abs(b)*U)},[U,s,b]),Object(n.useEffect)(function(){C(Math.round(b*x*100+Number.EPSILON)/100)},[b,x]),Object(n.useEffect)(function(){var e=!1;"Payment"===s&&p(""),"Payment"!==s&&""===f||(e=!0),K(!(""===s||0===b||""===O||!e))},[s,b,O,f]),Object(n.useEffect)(function(){Y(s)},[s]);var $=c.filter(function(e){return!e.is_staff&&e.is_active}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function Y(e){switch(e){case"Wire":case"Credit Card":L(1);break;case"Withdraw":case"Payment":L(-1);break;default:L(1)}}var J="white";switch(s){case"Wire":J="#fce100";break;case"Credit Card":J="#ffaa44";break;case"Withdraw":J="#da3b01";break;case"Payment":J="#00b7c3";break;default:J="white"}var Z=s&&"Payment"!==s&&O;return r.a.createElement(ze.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"transactionModal"},r.a.createElement("div",{className:"head"},r.a.createElement(H.a,null,"Add transaction"),r.a.createElement(Ke.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(F.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",{style:{borderLeft:"4px solid ".concat(J)}},r.a.createElement(_e.a,null,r.a.createElement(_e.a,{horizontal:!0,className:"row1"},r.a.createElement(ke.a,{label:"Type of transaction",autoComplete:"on",selectedKey:s,options:[{key:"Wire",text:"Wire"},{key:"Credit Card",text:"Credit Card"},{key:"Withdraw",text:"Withdraw"},{key:"Payment",text:"Payment"}],placeholder:"Type...",onChange:function(e,t){var a=t.key;return u(a)}}),r.a.createElement(ke.a,{label:"Partner name",autoComplete:"on",allowFreeform:!0,selectedKey:O,options:$,placeholder:"Partner...",onChange:function(e,t){var a=t.key;D(a);var n="http://api.chimera-finance.com/api/users/".concat(a,"/");N(c.filter(function(e){return e.url===n})[0])}})),r.a.createElement(_e.a,{horizontal:!0,className:"row2"},r.a.createElement(je.a,{disabled:"Payment"===s,name:"client",label:"Client name",placeholder:"client",value:f,onChange:function(e){var t=e.target;return p(t.value)}}),r.a.createElement(je.a,{type:"number",step:1,name:"amount",label:"Amount",placeholder:"amount",value:b,onChange:function(e){var t=e.target;Y(s),t.value?g(U*Math.abs(parseFloat(t.value))):g(0)}})),r.a.createElement(_e.a,{horizontal:!0,className:"row3"},r.a.createElement(H.a,{className:"calc",styles:{root:{visibility:Z?"visible":"hidden"}},variant:"xLarge"},"".concat(V()(b).format("0,0.00")," x ").concat(x," =")),r.a.createElement("div",{className:"partnerAmount"},r.a.createElement("label",{htmlFor:"partner_amount"},r.a.createElement(H.a,{variant:"medium"},"Partner amount")),r.a.createElement(H.a,{className:"amount",name:"partner_amount",variant:"xLarge"},V()(v).format("0,0.00 $")))),r.a.createElement(_e.a,{horizontal:!0,className:"actions"},r.a.createElement(M.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(Ne.a,{className:"add",disabled:!G,onClick:function(){return o(s,f,b,v,x,O)},text:"Add"})))))});a(657);V.a.locale("al");var at=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{edit:function(t,a,n,r,o,c){return e(function(e,t,a,n,r,o,c){return"Payment"===e&&(t="-"),function(i,l){var s=l(),u=s.transactions.transactions.filter(function(e){return e.id===c})[0].username,d="Bearer "+s.auth.token;B.a.post("http://api.chimera-finance.com/api/transactions/",{transaction_type:e,client_name:t,amount:a,amount_paid:n,rate:r,user:o},{headers:{Authorization:d}}).then(function(c){var l;i({type:"TRANSACTIONS_ADD_SUCCESS",transaction:c.data}),i({type:"TRANSACTIONS_END_ADD"}),i(ce(o)),i(ie());var s=V()(Math.abs(parseFloat(a))).format("0,0.00 $"),d=V()(Math.abs(parseFloat(n))).format("0,0.00 $");switch(e){case"Wire":case"Credit Card":l="Added deposit of ".concat(s," by client ").concat(t,", made via ").concat(e,". Amount registered on partner ").concat(u," is ").concat(d,", given that the actual rate is ").concat(r,".");break;case"Withdraw":l="Client ".concat(t," withdrawed ").concat(s," from main balance. ").concat(d," were substracted from ").concat(u,"'s balance, given that the actual rate is ").concat(r,".");break;case"Payment":l="Made payment of ".concat(s," to ").concat(u);break;default:l="Made transaction of type ".concat(e,". Partner ").concat(u,", main amount ").concat(s,", partner amount ").concat(d," (because rate is ").concat(r,").")}i(X(o,q,l))}).catch(function(e){i({type:"TRANSACTIONS_ADD_FAIL",e:e})})}}(t,a,n,r,o,c))},endEdit:function(){return e(function(e){e({type:"TRANSACTIONS_END_EDIT"})})}}})(function(e){var t=e.editing,a=e.endEdit,o=e.edit,c=e.users,i=e.data,l=Object(n.useState)(i.transaction_type),s=Object(pe.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(i.client_name),f=Object(pe.a)(m,2),p=f[0],h=f[1],E=Object(n.useState)(parseFloat(i.amount)),b=Object(pe.a)(E,2),g=b[0],y=b[1],S=Object(n.useState)(parseFloat(i.amount_paid)),v=Object(pe.a)(S,2),C=v[0],_=v[1],k=Object(n.useState)(i.user),O=Object(pe.a)(k,2),D=O[0],w=O[1],T=Object(n.useState)({partner_data:{rate:1}}),A=Object(pe.a)(T,2),N=A[0],j=A[1],R=Object(n.useState)(N.partner_data.rate),x=Object(pe.a)(R,2),I=x[0],P=x[1],W=Object(n.useState)(1),U=Object(pe.a)(W,2),L=U[0],z=U[1],B=Object(n.useState)(!1),G=Object(pe.a)(B,2),K=G[0],$=G[1];Object(n.useEffect)(function(){switch(u){case"Wire":case"Credit Card":case"Withdraw":P(parseFloat(N.partner_data.rate).toPrecision(2));break;case"Payment":P(1);break;default:P(parseFloat(N.partner_data.rate).toPrecision(2))}},[N,u]),Object(n.useEffect)(function(){y(Math.abs(g)*L)},[L,u,g]),Object(n.useEffect)(function(){_(Math.round(g*I*100+Number.EPSILON)/100)},[g,I]),Object(n.useEffect)(function(){var e=!1;"Payment"===u&&h(""),"Payment"!==u&&""===p||(e=!0),$(!(""===u||0===g||""===D||!e))},[u,g,D,p]),Object(n.useEffect)(function(){J(u)},[u]);var Y=c.filter(function(e){return!e.is_staff&&e.is_active}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function J(e){switch(e){case"Wire":case"Credit Card":z(1);break;case"Withdraw":case"Payment":z(-1);break;default:z(1)}}return r.a.createElement(ze.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"transactionModal"},r.a.createElement("div",{className:"head"},r.a.createElement(H.a,null,"Edit transaction"),r.a.createElement(Ke.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(F.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(_e.a,null,r.a.createElement(_e.a,{horizontal:!0,className:"row1"},r.a.createElement(ke.a,{label:"Type of transaction",autoComplete:"on",selectedKey:u,options:[{key:"Wire",text:"Wire"},{key:"Credit Card",text:"Credit Card"},{key:"Withdraw",text:"Withdraw"},{key:"Payment",text:"Payment"}],placeholder:"Type...",onChange:function(e,t){var a=t.key;return d(a)}}),r.a.createElement(ke.a,{label:"Partner name",autoComplete:"on",allowFreeform:!0,selectedKey:D,options:Y,placeholder:"Partner...",onChange:function(e,t){var a=t.key;w(a);var n="http://api.chimera-finance.com/api/users/".concat(a,"/");j(c.filter(function(e){return e.url===n})[0])}})),r.a.createElement(_e.a,{horizontal:!0,className:"row2"},r.a.createElement(je.a,{disabled:"Payment"===u,name:"client",label:"Client name",placeholder:"client",value:p,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement(je.a,{type:"number",step:1,name:"amount",label:"Amount",placeholder:"amount",value:g,onChange:function(e){var t=e.target;J(u),t.value?y(L*Math.abs(parseFloat(t.value))):y(0)}})),r.a.createElement(_e.a,{horizontal:!0,className:"row3"},r.a.createElement(H.a,{className:"calc",variant:"xLarge"},"".concat(V()(g).format("0,0.00")," x ").concat(I," =")),r.a.createElement("div",{className:"partnerAmount"},r.a.createElement("label",{htmlFor:"partner_amount"},r.a.createElement(H.a,{variant:"medium"},"Partner amount")),r.a.createElement(H.a,{className:"amount",name:"partner_amount",variant:"xLarge"},V()(C).format("0,0.00 $")))),r.a.createElement(_e.a,{horizontal:!0,className:"actions"},r.a.createElement(M.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(Ne.a,{className:"edit",disabled:!K,onClick:function(){return o(u,p,g,C,I,D)},text:"Save"})))))});a(658);V.a.locale("al");var nt=Object(l.b)(function(e){return{token:e.auth.token,admin:e.auth.admin,balance:e.auth.balance,users:e.users.users,transactions:e.transactions.transactions,editing:e.transactions.editing,adding:e.transactions.adding,editData:e.transactions.editData,filters:e.transactions.filters}},function(e){return{selectMenu:function(t){return e(me(t))},setToken:function(t){return e(ue(t))},beginAdd:function(){return e(function(e){e({type:"TRANSACTIONS_BEGIN_ADD"})})},beginEdit:function(t){return e(function(e){return function(t,a){t({type:"TRANSACTIONS_BEGIN_EDIT",transaction:a().transactions.transactions.filter(function(t){return t.id===e})[0]})}}(t))},remove:function(t){return e((a=t,function(e,t){var n=t(),r="Bearer "+n.auth.token;B.a.delete("http://api.chimera-finance.com/api/transactions/".concat(a,"/"),{headers:{Authorization:r}}).then(function(){var t=n.transactions.transactions.filter(function(e){return e.id===a})[0],r=t.amount,o=t.amount_paid,c=t.client_name,i=t.user,l=t.rate,s=t.transaction_type,u=n.users.users.filter(function(e){return e.url==="http://api.chimera-finance.com/api/users/".concat(i,"/")})[0].username,d=V()(parseFloat(r)).format("0,0.00 $"),m=V()(parseFloat(o)).format("0,0.00 $");e({type:"TRANSACTIONS_REMOVE_SUCCESS",id:a}),e({type:"TRANSACTIONS_END_EDIT"}),e(ie());var f="Removed transaction ".concat(a," of type ").concat(s,". Client: ").concat(c,". Main amount: ").concat(d,". Partner amount: ").concat(m,". Partner: ").concat(u,". Rate ").concat(l);e(X(i,Q,f))}).catch(function(t){console.log(t),e({type:"TRANSACTIONS_REMOVE_FAIL",error:t})})}));var a},getTransactions:function(){return e(ee())},setFilter:function(t,a){return e(function(e,t){return function(a){a({type:"TRANSACTIONS_SET_FILTER",filter:e,value:t}),a(ee())}}(t,a))},allTypes:function(t){return e({type:"TRANSACTIONS_SET_ALL_TYPES_SELECTED",allTypesSelected:t})},allPartners:function(t){return e({type:"TRANSACTIONS_SET_ALL_PARTNERS_SELECTED",allPartnersSelected:t})}}})(function(e){var t=e.selectMenu,a=e.beginAdd,o=(e.beginEdit,e.token),c=e.users,i=e.admin,l=(e.balance,e.adding),s=e.editing,u=e.editData,d=e.transactions,m=e.remove,f=e.getTransactions,p=e.setFilter,h=e.filters,E=e.allPartners,b=e.allTypes,y=Object(n.useState)(!1),S=Object(pe.a)(y,2),v=S[0],C=S[1],_=Object(n.useState)(0),k=Object(pe.a)(_,2),O=k[0],D=k[1],w=h.client,T=h.partners,A=h.types,N=h.fromDate,j=h.toDate;N=new Date(N),j=new Date(j),Object(n.useEffect)(function(){T.length||p("partners",c.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/");return t[t.length-2]})),A.length||p("types",["Wire","Credit Card","Withdraw","Payment"])},[p,c]);var R=c.filter(function(e){return!e.is_staff}).map(function(e){var t=e.url.split("/"),a=t[t.length-2];return{key:a,text:e.username,selected:T.includes(a)}}),x=[{key:"Wire",text:"Wire",selected:A.includes("Wire")},{key:"Credit Card",text:"Credit Card",selected:A.includes("Credit Card")},{key:"Withdraw",text:"Withdraw",selected:A.includes("Withdraw")},{key:"Payment",text:"Payment",selected:A.includes("Payment")}];Object(n.useEffect)(function(){document.title="Chimera | Transactions",t(i?"2":"3"),f()},[t,f,i]);var I,W=[{key:"id",name:"ID",fieldName:"id",minWidth:17,maxWidth:17,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"transaction_type",name:"Type",fieldName:"transaction_type",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"client",name:"Client name",fieldName:"client",minWidth:110,maxWidth:180,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"partner",name:"Partner",fieldName:"partner",minWidth:70,maxWidth:80,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount",name:"Amount",fieldName:"amount",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"rate",name:"Rate",fieldName:"rate",minWidth:30,maxWidth:50,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount_paid",name:"Partner amount",fieldName:"amount_paid",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"created_at",name:"Created at",fieldName:"created_at",minWidth:110,maxWidth:110,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"delete",name:"Delete",minWidth:45,maxWidth:55,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0,onRender:function(e){return r.a.createElement(qe.a,{onClick:function(){C(!0),D(e.id)},styles:{root:{height:"15px",marginLeft:"7px",color:"#ccc"},rootHovered:{color:"red"},rootPressed:{color:"darkred"}},iconProps:{iconName:"Delete"}})}}],U=[{key:"id",name:"ID",fieldName:"id",minWidth:20,maxWidth:30,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"transaction_type",name:"Type",fieldName:"transaction_type",minWidth:60,maxWidth:100,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"client",name:"Client name",fieldName:"client",minWidth:120,maxWidth:140,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount",name:"Amount",fieldName:"amount",minWidth:50,maxWidth:60,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"amount_paid",name:"My amount",fieldName:"amount_paid",minWidth:60,maxWidth:80,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0},{key:"created_at",name:"Created at",fieldName:"created_at",minWidth:130,maxWidth:150,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:L,data:"string",isPadded:!0,isResizable:!0}];function L(){}return I=d.map(function(e){return{id:e.id,transaction_type:e.transaction_type,client:e.client_name,amount:V()(parseFloat(e.amount)).format("0,0.00 $"),rate:V()(parseFloat(e.rate)).format("0 %"),partner:i?c.filter(function(t){return t.url==="http://api.chimera-finance.com/api/users/".concat(e.user,"/")})[0].username:null,amount_paid:V()(parseFloat(e.amount_paid)).format("0,0.00 $"),created_at:We()(new Date(e.entry_time)).format("DD/MM/YYYY hh:mm:ss")}}),o?r.a.createElement("div",{id:"transactions"},r.a.createElement(Ue.a,null,r.a.createElement(_e.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(_e.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},r.a.createElement(Qe.a,{placeholder:"Type",selectedKeys:A,onChange:function(e,t){var a=x.map(function(e){return e.key===t.key?t:e});b(a.every(function(e){return e.selected})),p("types",a.filter(function(e){return e.selected}).map(function(e){return e.key}))},multiSelect:!0,options:[{key:"typesHeader",text:"Types",itemType:Xe.a.Header}].concat(x),style:{width:120,textAlign:"left"}}),r.a.createElement(je.a,{style:{width:150},type:"text",value:w,placeholder:"Client name...",onChange:function(e){var t=e.target;return p("client",t.value.toLowerCase())}}),i?r.a.createElement(Qe.a,{placeholder:"Filter by partner",selectedKeys:T,onChange:function(e,t){var a=R.map(function(e){return e.key===t.key?t:e});E(a.every(function(e){return e.selected})),p("partners",a.filter(function(e){return e.selected}).map(function(e){return e.key}))},multiSelect:!0,options:[{key:"partnersHeader",text:"Partners",itemType:Xe.a.Header}].concat(Object(g.a)(R)),style:{width:140,textAlign:"left"}}):null,r.a.createElement(ve.a,{style:{width:140},formatDate:function(e){return ne(e)},firstDayOfWeek:Ce.b.Monday,maxDate:j,placeholder:"From date",value:N,onSelectDate:function(e){return p("fromDate",new Date(new Date(e).setHours(0,0,0,0)))}}),r.a.createElement(ve.a,{style:{width:140},formatDate:function(e){return ne(e)},firstDayOfWeek:Ce.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:N,placeholder:"To date",value:j,onSelectDate:function(e){return p("toDate",new Date(new Date(e).setHours(23,59,59,0)))}})),i?r.a.createElement(Ne.a,{allowDisabledFocus:!0,disabled:l,checked:!1,text:"New transaction",onClick:function(){return a()},iconProps:{iconName:"Add"},align:"end",styles:{root:{justifySelf:"flex-end"}}}):null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,{className:"table",maxWidth:i?960:720,height:"70%",items:I,compact:!1,columns:i?W:U,onItemInvoked:function(e){e.id},enableShimmer:!I,isHeaderVisible:!0,checkboxVisibility:2,selectionMode:Me.b.multiple,layoutMode:Ze.e.justified,onRenderItemColumn:function(e,t,a){return"amount"===a.key||"amount_paid"===a.key?r.a.createElement("div",{style:{textAlign:"right"}},e[a.key]):"id"===a.key||"created_at"===a.key?r.a.createElement("div",{style:{fontSize:"1em"}},e[a.key]):e[a.key]},onRenderRow:function(e){var t;switch(e.item.transaction_type){case"Wire":t="#fce100";break;case"Credit Card":t="#ffaa44";break;case"Withdraw":t="#da3b01";break;case"Payment":t="#00b7c3",e.item.amount="",e.item.rate="";break;default:t="white"}return r.a.createElement(Le.a,Object.assign({},e,{styles:{root:{borderLeft:"4px solid ".concat(t),fontSize:"1.1em"}}}))}}))),l?r.a.createElement(tt,{adding:l}):null,s?r.a.createElement(at,{data:u,editing:s}):null,r.a.createElement(Be.a,{hidden:!v,onDismiss:function(){return C(!1)},dialogContentProps:{type:Ge.a.normal,title:"Delete transaction?",subText:"Do you really want do delete this transaction?"},modalProps:{isBlocking:!0,styles:{main:{maxWidth:450}},dragOptions:!0}},r.a.createElement(Ve.a,null,r.a.createElement(Ne.a,{styles:{root:{backgroundColor:"red"},rootHovered:{backgroundColor:"orangered"},rootPressed:{backgroundColor:"darkred"}},onClick:function(){m(O),C(!1)},text:"Delete"}),r.a.createElement(M.a,{onClick:function(){return C(!1)},text:"Cancel"}))),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"data"},r.a.createElement(H.a,{variant:"small"},d.length||"No"," transaction",1!==d.length?"s":"")),d.length?r.a.createElement(M.a,{iconProps:{iconName:"Download"}},r.a.createElement(et.CSVLink,{filename:"transactions_report_".concat(We()(new Date).format("DD_MM_YYYY_hh_mm_ss"),".csv"),data:I,headers:[{label:"ID",key:"id"},{label:"Type",key:"transaction_type"},{label:"Client Name",key:"client"},{label:"Parner Name",key:"partner"},{label:"Amount",key:"amount"},{label:"Partner Amount",key:"amount_paid"},{label:"Date",key:"created_at"}]},"Download CSV")):null)):r.a.createElement(P.a,{to:"/login"})}),rt=a(4),ot=a(724),ct=a(705);a(659);var it=Object(l.b)(function(e){return{token:e.auth.token,logs:e.logs.logs,filters:e.logs.filters,users:e.users.users}},function(e){return{getLogs:function(){return e(function(e,t){var a=t(),n=a.logs.filters,r=n.fromDate,o=n.toDate,c=n.message,i=a.auth.token,l="?from=".concat(new Date(r).toLocaleDateString("it-IT"),"&to=").concat(new Date(o).toLocaleDateString("it-IT"),"&");c&&(l+="message=".concat(c));var s="Bearer "+i;B.a.get("http://api.chimera-finance.com/api/logs/".concat(l),{headers:{Authorization:s}}).then(function(t){e({type:"LOGS_GET_DATA",data:t.data})}).catch(function(t){console.log(t.response.status),t.response&&401===t.response.status&&e(de())})})},selectMenu:function(t){return e(me(t))},setFilter:function(t,a){return e(function(e,t){return{type:"LOGS_SET_FILTER",filter:e,value:t}}(t,a))}}})(function(e){var t=e.logs,a=e.token,o=e.getLogs,c=e.selectMenu,i=e.users,l=e.filters,s=e.setFilter,u=l.fromDate,d=l.toDate,m=l.message;function f(e){if(i.length){var t=i.filter(function(t){return t.url==="http://api.chimera-finance.com/api/users/".concat(e,"/")});return t.length?"@"+t[0].username:"Deleted"}return""}u=new Date(u),d=new Date(d),Object(n.useEffect)(function(){document.title="Chimera | Logs",c("4")},[c]),Object(n.useEffect)(function(){o()},[o,l]);var p=Object(rt.C)({exampleRoot:{marginTop:"8px",textAlign:"left"},nameText:{fontWeight:"bold"}}),h=t.map(function(e){var t="",a="";switch(e.log_type){case K:t="FollowUser",a="darkgreen";break;case $:t="UserRemove",a="darkred";break;case Y:t="UserSync",a="orange";break;case q:t="Money",a="darkgreen";break;case Q:t="Money",a="darkred";break;case J:t="UserPause",a="darkred";break;case Z:t="UserFollowed",a="darkgreen";break;default:t="Message"}return{key:e.id,activityDescription:[r.a.createElement(H.a,{className:p.nameText,key:e.id},ae(e.log_type)),r.a.createElement(ot.a,{key:e.id+"a"},"\xa0",f(e.user))],activityIcon:r.a.createElement(F.a,{styles:{root:{color:a}},iconName:t}),comments:[r.a.createElement("span",{key:e.id},e.message)],timeStamp:We()(new Date(e.entry_time)).format("DD/MM/YY hh:mm:ss")}});return a?r.a.createElement("div",{id:"logs"},r.a.createElement(_e.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto",marginTop:"20px",marginBottom:"12px"}}},r.a.createElement(ve.a,{style:{width:140},formatDate:function(e){return ne(e)},firstDayOfWeek:Ce.b.Monday,maxDate:d,placeholder:"From date",value:u,onSelectDate:function(e){return s("fromDate",new Date(new Date(e).setHours(0,0,0,0)))}}),r.a.createElement(ve.a,{style:{width:140},formatDate:function(e){return ne(e)},firstDayOfWeek:Ce.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:u,placeholder:"To date",value:d,onSelectDate:function(e){return s("toDate",new Date(new Date(e).setHours(23,59,59,0)))}}),r.a.createElement(je.a,{style:{width:300},type:"text",value:m,placeholder:"Search log text...",onChange:function(e){var t=e.target;return s("message",t.value.toLowerCase())}})),r.a.createElement("div",{className:"logs"},h.map(function(e){return r.a.createElement(ct.a,Object.assign({},e,{key:e.key,className:p.exampleRoot}))}))):r.a.createElement(P.a,{to:"/login"})}),lt=a(704);a(660);Object(lt.a)();var st=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(fe,null),r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/",component:Te}),r.a.createElement(P.b,{exact:!0,path:"/login",component:Ie}),r.a.createElement(P.b,{exact:!0,path:"/users",component:Je}),r.a.createElement(P.b,{exact:!0,path:"/transactions",component:nt}),r.a.createElement(P.b,{exact:!0,path:"/logs",component:it})),r.a.createElement(ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ut={key:"root",storage:f.a},dt=Object(u.a)(ut,I),mt=Object(i.d)(dt,Object(i.a)(s.a)),ft=Object(u.b)(mt);window.persistor=ft,c.a.render(r.a.createElement(l.a,{store:mt},r.a.createElement(d.a,{loading:null,persistor:ft},r.a.createElement(p.a,null,r.a.createElement(st,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[343,1,2]]]);
//# sourceMappingURL=main.76d17fc2.chunk.js.map