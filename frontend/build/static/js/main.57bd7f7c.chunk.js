(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{271:function(e,t,a){e.exports=a.p+"static/media/Chimera_01-01.71e6b608.svg"},314:function(e,t,a){e.exports=a(535)},325:function(e,t,a){},342:function(e,t,a){},346:function(e,t,a){},521:function(e,t,a){},522:function(e,t,a){},523:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){},526:function(e,t,a){},530:function(e,t,a){},531:function(e,t,a){},532:function(e,t,a){},533:function(e,t,a){},534:function(e,t,a){},535:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),c=a.n(o),i=a(44),l=a(21),s=a(251),u=a(179),d=a(252),m=a(253),f=a.n(m),p=a(39),b=a(19);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y={token:"",error:null,loading:!1,admin:!1,balance:0,id:0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return function(e,t){return E({},e,{error:null,loading:!0})}(e);case"AUTH_FAIL":return function(e,t){return E({},e,{error:t.error,loading:!1})}(e,t);case"AUTH_SUCCESS":return function(e,t){return E({},e,{error:null,loading:!1,token:t.token,id:t.id,email:t.email,username:t.username,admin:t.is_staff,balance:t.balance,btc:t.btc})}(e,t);case"AUTH_SET_TOKEN":return function(e,t){return E({},e,{token:t.token})}(e,t);case"ADMIN_UPDATE_BALANCE":return function(e,t){return E({},e,{balance:parseFloat(t.balance)})}(e,t);case"AUTH_LOGOUT":return E({},y);default:return e}},O=a(28);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var C={users:[],editing:!1,editingThis:"",adding:!1},k=function(e,t){var a=e.users.map(function(e){return e.id===t.data.id?t.data:e});return v({},e,{users:a})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"USERS_GET_LIST":return function(e,t){return v({},e,{users:t.users})}(e,t);case"USERS_GET_ONE":case"USERS_EDIT_SUCCESS":case"USERS_ARCHIVE_SUCCESS":return k(e,t);case"USERS_REMOVE_SUCCESS":return function(e,t){var a=e.users.filter(function(e){return e.id!==t.id});return v({},e,{users:a})}(e,t);case"USERS_BEGIN_EDIT":return function(e,t){return v({},e,{editing:!0,editingThis:t.email})}(e,t);case"USERS_END_EDIT":return function(e){return v({},e,{editing:!1})}(e);case"USERS_BEGIN_ADD":return function(e){return v({},e,{adding:!0})}(e);case"USERS_END_ADD":return function(e){return v({},e,{adding:!1})}(e);case"USERS_ADD_SUCCESS":return function(e,t){return v({},e,{users:[].concat(Object(O.a)(e.users),[t.user])})}(e,t);case"USERS_UPDATE_USER":return k(e,t);case"AUTH_LOGOUT":return v({},C);default:return e}};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var T=new Date,j=new Date((new Date).setDate(T.getDate()-6)),A={transactions:[],clients:[],editing:!1,editingThis:0,adding:!1,editData:{},filters:{partners:[],types:[],client:"",fromDate:new Date(j.setHours(0,0,0,0)),toDate:new Date(T.setHours(23,59,59,0))},allPartnersSelected:!0,allTypesSelected:!0},N=function(e,t){var a=e.transactions.map(function(e){return e.id===t.data.id?t.data:e});return w({},e,{transactions:a})},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRANSACTIONS_GET_LIST":return function(e,t){return w({},e,{transactions:t.transactions})}(e,t);case"TRANSACTIONS_EDIT_SUCCESS":case"TRANSACTIONS_ARCHIVE_SUCCESS":return N(e,t);case"TRANSACTIONS_REMOVE_SUCCESS":return function(e,t){var a=e.transactions.filter(function(e){return e.id!==t.id});return w({},e,{transactions:a})}(e,t);case"TRANSACTIONS_BEGIN_EDIT":return function(e,t){return w({},e,{editing:!0,editData:t.transaction})}(e,t);case"TRANSACTIONS_END_EDIT":return function(e){return w({},e,{editing:!1})}(e);case"TRANSACTIONS_BEGIN_ADD":return function(e){return w({},e,{adding:!0})}(e);case"TRANSACTIONS_END_ADD":return function(e){return w({},e,{adding:!1})}(e);case"TRANSACTIONS_ADD_SUCCESS":return function(e,t){return w({},e,{transactions:[t.transaction].concat(Object(O.a)(e.transactions))})}(e,t);case"TRANSACTIONS_SET_FILTER":return function(e,t){return w({},e,{filters:w({},e.filters,Object(b.a)({},t.filter,t.value))})}(e,t);case"TRANSACTIONS_SET_ALL_PARTNERS_SELECTED":return function(e,t){return w({},e,{allPartnersSelected:t.allPartnersSelected})}(e,t);case"TRANSACTIONS_SET_ALL_TYPES_SELECTED":return function(e,t){return w({},e,{allTypesSelected:t.allTypesSelected})}(e,t);case"TRANSACTIONS_GET_CLIENTS_LIST":return function(e,t){return w({},e,{clients:t.clients.map(function(e){return e.client_name})})}(e,t);case"AUTH_LOGOUT":return w({},A);default:return e}};function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I={menu:"0"},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SYSTEM_SET_SELECTED_MENU":return function(e,t){return x({},e,{menu:t.selected})}(e,t);case"AUTH_LOGOUT":return x({},I);default:return e}};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var F={filters:{fromDate:(new Date).setDate(1),toDate:new Date,partner:0,alltime:!1},data:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DASHBOARD_GET_DATA":return function(e,t){return L({},e,{data:t.data})}(e,t);case"DASHBOARD_SET_FILTER":return function(e,t){return L({},e,{filters:L({},e.filters,Object(b.a)({},t.filter,t.value))})}(e,t);case"AUTH_LOGOUT":return L({},F);default:return e}};function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var H={filters:{fromDate:(new Date).setDate(1),toDate:new Date,message:""},logs:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGS_GET_DATA":return function(e,t){return z({},e,{logs:t.data})}(e,t);case"LOGS_SET_FILTER":return function(e,t){return z({},e,{filters:z({},e.filters,Object(b.a)({},t.filter,t.value))})}(e,t);case"AUTH_LOGOUT":return z({},H);case"LOGS_REMOVE":return function(e,t){return z({},e,{logs:e.logs.filter(function(e){return e.id!==t.id})})}(e,t);default:return e}},V=Object(i.c)({auth:g,users:D,transactions:P,system:W,dashboard:B,logs:G}),K=(a(325),a(66)),$=a(595),Y=a(129),Z=a(260),J=a(591),q=a(274),Q=a(20),X=a.n(Q),ee=a(137),te=a(14),ae=a.n(te),ne="USER_ADD",re="USER_REMOVE",oe="USER_UPDATE",ce="USER_DEACTIVATE",ie="USER_ACTIVATE",le="TRANSACTION_ADD",se="TRANSACTION_REMOVE",ue="https://api.chimera-finance.com",de=function(e,t,a){return function(n,r){var o="Bearer "+r().auth.token;X.a.post("".concat(ue,"/api/logs/"),{user:e,log_type:t,message:a},{headers:{Authorization:o}}).then(function(e){n({type:"LOGS_ADD",data:e.data})}).catch(function(e){console.log(e),e.response&&e.response&&401===e.response.status&&n(_e)})}};function me(e){var t;return e?(t=e.split("/"))[t.length-2]:0}function fe(e){return e[0].toUpperCase()+e.toLowerCase().slice(1).replace(/[_.]/," ")}function pe(e){return e.toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric"})}function be(e){return Math.round(100*e+Number.EPSILON)/100}function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}ae.a.register("locale","al",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},currency:{symbol:"\u20ac"}});var Ee=function(){return function(e,t){var a=t(),n=a.auth,r=n.token,o=n.admin,c=a.transactions,i=c.allTypesSelected,l=c.filters,s=l.client,u=l.types,d=l.partners,m=l.fromDate,f=l.toDate,p="?from=".concat(new Date(m).toLocaleDateString("it-IT"),"&to=").concat(new Date(f).toLocaleDateString("it-IT"),"&");s&&(p+="client=".concat(s,"&")),i||(p+="types=".concat(u,"&")),o&&(p+="partners=".concat(d,"&"));var h="Bearer "+r;!u.length||o&&!d.length?e({type:"TRANSACTIONS_GET_LIST",transactions:[]}):X.a.get("".concat(ue,"/api/transactions/").concat(p),{headers:{Authorization:h}}).then(function(t){var a=t.data.map(function(e){var t=e.url,a=Object(ee.a)(e,["url"]);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({id:me(t)},a)});e({type:"TRANSACTIONS_GET_LIST",transactions:a})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(_e)})}};function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Oe=function(){return function(e,t){var a="Bearer "+t().auth.token;X.a.get("".concat(ue,"/api/users/"),{headers:{Authorization:a}}).then(function(t){var a=t.data.map(function(e){var t=e.url,a=Object(ee.a)(e,["url"]);return ge({id:me(t)},a)});e({type:"USERS_GET_LIST",users:a})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(_e)})}},Se=function(e){return function(t,a){var n=a().auth.token;X.a.get("".concat(ue,"/api/users/").concat(e,"/"),{headers:{Authorization:"Bearer "+n}}).then(function(e){t({type:"USERS_GET_ONE",data:ge({},e.data,{id:me(e.data.url)})})}).catch(function(e){console.log(e)})}},ve=function(){return function(e,t){var a=t().auth,n=a.token,r=a.id;X.a.get("".concat(ue,"/api/users/").concat(r,"/"),{headers:{Authorization:"Bearer "+n}}).then(function(t){e({type:"ADMIN_UPDATE_BALANCE",balance:t.data.partner_data.balance})}).catch(function(e){console.log(e)})}},Ce=function(e,t,a,n,r,o,c){return{type:"AUTH_SUCCESS",token:e,id:t,email:a,username:n,is_staff:r,balance:o,btc:c}},ke=function(e){return{type:"AUTH_FAIL",error:e}},De=function(e){return{type:"AUTH_SET_TOKEN",token:e}},_e=function(){return function(e){X.a.post("".concat(ue,"/api/auth/logout/")).then(function(){e({type:"AUTH_LOGOUT"}),window.persistor.flush(),window.persistor.purge()}).catch(function(e){console.log(e.message)})}},we=function(e){return function(t){t({type:"SYSTEM_SET_SELECTED_MENU",selected:e})}};a(342);var Te=Object(l.b)(function(e){return{token:e.auth.token,admin:e.auth.admin,menu:e.system.menu,username:e.auth.username}},function(e){return{logOut:function(){return e(_e())},setMenu:function(t){return e(we(t))},refreshToken:function(){return e(function(e,t){var a=t().auth.token;X.a.post("".concat(ue,"/api/auth-jwt-refresh/"),{token:a}).then(function(t){e(De(t.data.token))}).catch(function(t){console.log("refresh token error "+t),e(_e())})})}}})(function(e){var t=e.logOut,a=e.refreshToken,o=e.setMenu,c=e.token,i=e.menu,l=e.admin;return e.username,Object(n.useEffect)(function(){var e=setInterval(function(){a()},3e5);return function(){return clearInterval(e)}},[]),Object(n.useEffect)(function(){return a(),window.addEventListener("focus",a),function(){return window.removeEventListener("focus",a)}},[]),c?r.a.createElement("div",{id:"menu"},r.a.createElement("nav",null,r.a.createElement($.a,{linkSize:Y.b.normal,linkFormat:Y.a.links,selectedKey:i,onLinkClick:function(e){o(e.key.slice(1))}},r.a.createElement(Z.a,{iconProps:{iconName:"People"},itemKey:"0",headerText:"Dashboard",onClick:function(){return o("home")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/"},r.a.createElement(J.a,{iconName:"Diagnostic"})," Dashboard")}}),l?r.a.createElement(Z.a,{itemKey:"1",headerText:"Users",onClick:function(){return o("users")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/users"},r.a.createElement(J.a,{iconName:"People"})," Users")}}):null,r.a.createElement(Z.a,{itemKey:"2",headerText:"Transactions",onClick:function(){return o("transactions")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/transactions"},r.a.createElement(J.a,{iconName:"Money"})," Transactions")}}),r.a.createElement(Z.a,{itemKey:"4",headerText:"Transactions",onClick:function(){return o("logs")},onRenderItemLink:function(){return r.a.createElement(p.b,{to:"/logs"},r.a.createElement(J.a,{iconName:"TextDocument"})," Logs")}})),r.a.createElement("div",null,r.a.createElement(q.a,{className:"logout",allowDisabledFocus:!0,text:"Logout",onClick:function(){return t(),r.a.createElement(K.a,{to:"/login"})},iconProps:{iconName:"Leave"}})))):null}),je=a(7),Ae=a(261),Ne=a(580),Pe=a(15),Re=a(589);a(346);var xe=Object(l.b)(function(e){return{token:e.auth.token}},function(e){return{getTransactions:function(){return e(Ee())},updateThisUser:function(){return e(ve())}}})(function(e){var t=e.token,a=e.getTransactions,o=e.updateThisUser,c=Object(Ae.w3cwebsocket)("wss://api.chimera-finance.com/notifications/?".concat(t)),i=Object(n.useState)(null),l=Object(je.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)([]),m=Object(je.a)(d,2),f=m[0],p=m[1];function b(e){var t=e.head,a=e.body,o=e.id,c=e.hideNotification,i=Object(n.useState)(!0),l=Object(je.a)(i,2),u=l[0],d=l[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){d(!1),c(o)},1e4);return function(){return clearTimeout(e)}},[]),r.a.createElement("div",null,u?r.a.createElement(Ne.a,{className:"ms-CalloutExample-callout",onClick:function(){return c(o)},isBeakVisible:!1,target:s,gapSpace:0,directionalHint:Pe.a.bottomRightEdge,styles:{root:{width:"280px",backgrounColor:"white",zIndex:8}}},r.a.createElement("div",{className:"content"},r.a.createElement(Re.a,{styles:{root:{display:"block",padding:"20px 20px 0px 20px"}},variant:"large"},t),r.a.createElement(Re.a,{styles:{root:{display:"block",padding:"0px 20px 20px 20px"}},variant:"medium"},a))):null)}return Object(n.useEffect)(function(){return c.onopen=function(){console.log("WebSocket Client Connected")},c.onmessage=function(e){var t=JSON.parse(e.data),n=t.message,r=t.id,c=t.type;p([].concat(Object(O.a)(f),[{head:fe(c),message:n,id:r}])),a(),o()},function(){return c.close()}},[t]),r.a.createElement("div",{id:"notifications"},r.a.createElement("div",{className:"ms-CalloutCoverExample-buttonArea",id:"anchor",ref:function(e){return u(e)}},f.map(function(e,t){return r.a.createElement(b,{key:t,head:e.head,body:e.message,id:e.id,hideNotification:function(e){return function(e){p(f.filter(function(t){return t.id!==e}))}(e)}})})))}),Ie=a(27),We=a(588),Ue=a(577),Le=a(10),Fe=a(582),Be=a(584),Me=a(46),ze=a.n(Me);a(521);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}ue.replace("https","http");var Ge=Object(l.b)(function(e){return{users:e.users.users,balance:e.auth.balance,admin:e.auth.admin,partnerId:e.auth.id,btc:e.auth.btc,data:e.dashboard.data,filters:e.dashboard.filters}},function(e){return{setFilter:function(t,a){return e(function(e,t){return{type:"DASHBOARD_SET_FILTER",filter:e,value:t}}(t,a))},getData:function(){return e(function(e,t){var a=t(),n=a.dashboard.filters,r=n.fromDate,o=n.toDate,c=n.alltime,i=a.auth.token,l=c?"":"from=".concat(new Date(r).toLocaleDateString("it-IT"),"&to=").concat(new Date(o).toLocaleDateString("it-IT"),"&"),s="?".concat(l),u="Bearer "+i;X.a.get("".concat(ue,"/api/transactions/").concat(s),{headers:{Authorization:u}}).then(function(t){e({type:"DASHBOARD_GET_DATA",data:t.data})}).catch(function(t){console.log(t),t.response&&t.response&&401===t.response.status&&e(_e)})})}}})(function(e){var t=e.admin,a=e.balance,o=e.users,c=e.setFilter,i=e.filters,l=e.getData,s=e.data,u=e.partnerId,d=e.btc,m=i.fromDate,f=i.toDate,p=i.partner,h=i.alltime,E=t?p:parseInt(u);Object(n.useEffect)(function(){l()},[l,m,f,p,h]),m=new Date(m),f=new Date(f);var y=o.filter(function(e){return!e.is_staff}).map(function(e){return{key:e.id,text:e.username}});function g(e){return e.toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric"})}var S,v=(S=(S=s).filter(function(e){return"Payment"!==e.transaction_type}),o.filter(function(e){return!e.is_staff}).map(function(e){return{id:e.id,username:e.username}}).map(function(e){return{name:e.username,wire:be(S.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"Wire"===e.transaction_type||"Withdraw"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),cc:be(S.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"Credit Card"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),btc:be(S.filter(function(t){return parseInt(t.user)===e.id}).filter(function(e){return"BTC"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),profit:be(S.filter(function(t){return parseInt(t.user)===e.id}).reduce(function(e,t){return parseFloat(t.amount)-parseFloat(t.amount_paid)+e},0))}})),C=v.reduce(function(e,t){return e+t.wire},0),k=v.reduce(function(e,t){return e+t.cc},0),D=v.reduce(function(e,t){return e+t.btc},0),_=C+k+D,w=function(e){var t=s.sort(function(e,t){return new Date(e.entry_time)-new Date(t.entry_time)}).filter(function(t){return t.user===parseInt(e)}).filter(function(e){return"Payment"!==e.transaction_type}).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{entry_time:new Date(e.entry_time).toLocaleDateString("it-IT").replace("/2019","")})});return Object(O.a)(new Set(t.map(function(e){return e.entry_time}))).map(function(e){return{name:e,wire:be(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"Wire"===e.transaction_type||"Withdraw"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),cc:be(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"Credit Card"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),btc:be(t.filter(function(t){return t.entry_time===e}).filter(function(e){return"BTC"===e.transaction_type}).reduce(function(e,t){return parseFloat(t.amount)+e},0)),profit:be(t.filter(function(t){return t.entry_time===e}).reduce(function(e,t){return parseFloat(t.amount)-parseFloat(t.amount_paid)+e},0))}})}(E),T=w.reduce(function(e,t){return e+t.wire},0),j=w.reduce(function(e,t){return e+t.cc},0),A=w.reduce(function(e,t){return e+t.btc},0),N=T+j+A,P=o.filter(function(e){return!e.is_staff}).reduce(function(e,t){return e+parseFloat(t.partner_data.balance)},0),R=E&&t?y.find(function(e){return e.key===E}).text:null,x=E&&t?o.find(function(e){return e.id===E}).partner_data.balance:a;return r.a.createElement("div",{id:"dashboard"},r.a.createElement(Fe.a,{className:"bar",horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(Fe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},t?r.a.createElement("div",{className:"combo"},r.a.createElement(Be.a,{autoComplete:"on",selectedKey:E,options:y,placeholder:"Partner...",onChange:function(e,t){return c("partner",t.key)},style:{width:140}}),E?r.a.createElement("span",{className:"clear",onClick:function(){return c("partner",null)}},"Clear"):null):null,r.a.createElement(Ue.a,{style:{width:140},formatDate:function(e){return g(e)},firstDayOfWeek:Le.b.Monday,maxDate:f,placeholder:"From date",value:m,onSelectDate:function(e){c("fromDate",new Date(new Date(e).setHours(0,0,0,0))),c("alltime",!1)}}),r.a.createElement(Ue.a,{style:{width:140},formatDate:function(e){return g(e)},firstDayOfWeek:Le.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:m,placeholder:"To date",value:f,onSelectDate:function(e){c("toDate",new Date(new Date(e).setHours(23,59,59,0))),c("alltime",!1)}}),r.a.createElement(We.a,{inlineLabel:!0,label:"Time limit",onText:"All time",offText:"Date range",checked:h,onChange:function(){return c("alltime",!h)}})),r.a.createElement("div",{className:"balance"},r.a.createElement("div",{className:"txt"},t?"To pay: ":"Balance: "),r.a.createElement(Re.a,{variant:"xLarge"},r.a.createElement(ze.a,{duration:500,value:parseFloat(t?P:a),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),E?r.a.createElement("section",{className:"userInfo"},r.a.createElement(Ie.b,{width:720,height:400,data:w},r.a.createElement(Ie.e,{strokeDasharray:"1 13"}),r.a.createElement(Ie.h,{dataKey:"name"}),r.a.createElement(Ie.i,null),r.a.createElement(Ie.g,null),r.a.createElement(Ie.f,null),r.a.createElement(Ie.a,{type:"monotone",dataKey:"wire",stackId:"one",stroke:"#fce100",fill:"#fce100"}),r.a.createElement(Ie.a,{type:"monotone",dataKey:"cc",stackId:"one",stroke:"#ffaa44",fill:"#ffaa44"}),d||t?r.a.createElement(Ie.a,{type:"monotone",dataKey:"btc",stackId:"one",stroke:"#8e41be",fill:"#8e41be"}):null,t?r.a.createElement(Ie.a,{type:"monotone",dataKey:"profit",stackId:"one",stroke:"#82ca9d",fill:"darkgreen"}):null),r.a.createElement("div",{className:"cyphers"},r.a.createElement("table",null,r.a.createElement("tbody",null,t?r.a.createElement("tr",null,r.a.createElement("td",null,"Partner: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"xLarge"},R))):null,r.a.createElement("tr",null,r.a.createElement("td",null,"Balance: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"xLarge"},r.a.createElement(ze.a,{duration:500,value:parseFloat(x),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Deposits: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"xLarge"},r.a.createElement(ze.a,{duration:500,value:parseFloat(N),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Wire: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"medium"},r.a.createElement(ze.a,{duration:500,value:parseFloat(T),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Credit Card: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"medium"},r.a.createElement(ze.a,{duration:500,value:parseFloat(j),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),d||t?r.a.createElement("tr",null,r.a.createElement("td",null,"BTC: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"medium"},r.a.createElement(ze.a,{duration:500,value:parseFloat(A),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))):null)))):null,t&&v.length?r.a.createElement("section",{className:"allInfo"},r.a.createElement(Ie.d,{width:720,height:400,data:v},r.a.createElement(Ie.e,{strokeDasharray:"1 13"}),r.a.createElement(Ie.h,{dataKey:"name"}),r.a.createElement(Ie.i,null),r.a.createElement(Ie.g,null),r.a.createElement(Ie.f,null),r.a.createElement(Ie.c,{dataKey:"wire",fill:"#fce100"}),r.a.createElement(Ie.c,{dataKey:"cc",fill:"#ffaa44"}),r.a.createElement(Ie.c,{dataKey:"btc",fill:"#8e41be"}),r.a.createElement(Ie.c,{dataKey:"profit",fill:"darkgreen"})),r.a.createElement("div",{className:"cyphers"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Deposits: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"xLarge"},r.a.createElement(ze.a,{duration:500,value:parseFloat(_),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Wire: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"medium"},r.a.createElement(ze.a,{duration:500,value:parseFloat(C),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Credit Card: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"medium"},r.a.createElement(ze.a,{duration:500,value:parseFloat(k),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))),r.a.createElement("tr",null,r.a.createElement("td",null,"BTC: "),r.a.createElement("td",null,r.a.createElement(Re.a,{variant:"medium"},r.a.createElement(ze.a,{duration:500,value:parseFloat(D),formatValue:function(e){return ae()(parseFloat(e)).format("0,0.00 $")}})))))))):null)});a(522);var Ve=Object(l.b)(function(e){return{token:e.auth.token,balance:e.auth.balance}},function(e){return{selectMenu:function(t){return e(we(t))}}})(function(e){var t=e.selectMenu,a=e.token;return e.balance,Object(n.useEffect)(function(){t("0"),document.title="Chimera | Home"},[t]),a?r.a.createElement("div",{id:"home"},r.a.createElement(Ge,null)):r.a.createElement(K.a,{to:"/login"})}),Ke=a(180),$e=a(572),Ye=a(581),Ze=a(271),Je=a.n(Ze);a(523);var qe=Object(l.b)(function(e){return{token:e.auth.token,error:e.auth.error,loading:e.auth.loading}},function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),X.a.post("".concat(ue,"/api/auth/login/"),{email:e,password:t}).then(function(e){var t=e.data,n=t.token,r=t.user,o=r.pk,c=r.email,i=r.username;X.a.get("".concat(ue,"/api/users/").concat(o,"/"),{headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){var t=e.data,r=t.is_active,l=t.is_staff,s=t.partner_data,u=parseFloat(s.balance),d=s.btc;r&&a(Ce(n,o,c,i,l,u,d)),l&&(a(Oe()),a(Ee()))})}).catch(function(e){a(ke(e))})}}(t,a))}}})(function(e){var t=e.login,a=e.error,o=e.token,c=Object(n.useState)(""),i=Object(je.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(""),d=Object(je.a)(u,2),m=d[0],f=d[1];Object(n.useEffect)(function(){document.title="Chimera | Login"},[]);var p=Object(Ke.b)({opacity:1,from:{opacity:0}});return o?r.a.createElement(K.a,{to:"/"}):r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:Je.a,alt:"logo file"}),r.a.createElement(Ke.a.div,{style:p},r.a.createElement("span",{className:"Chimera"},"Chimera"))),r.a.createElement("form",null,r.a.createElement("h3",null,"Log in"),r.a.createElement(Ye.a,{name:"admin_email",type:"email",label:"email",placeholder:"enter email",onChange:function(e){var t=e.target;return s(t.value)},onKeyPress:function(e){return"Enter"===e.key?t(l,m):null}}),r.a.createElement(Ye.a,{name:"admin_password",label:"Password",type:"password",placeholder:"enter password",onChange:function(e){var t=e.target;return f(t.value)},onKeyPress:function(e){return"Enter"===e.key?t(l,m):null}}),r.a.createElement($e.a,{className:"login",onClick:function(){return t(l,m)}},"Log in"),r.a.createElement("h6",null,a&&a.message)))}),Qe=a(65),Xe=a.n(Qe),et=a(590),tt=a(597),at=a(276),nt=a(574),rt=a(43),ot=a(16),ct=a(583),it=a(586),lt=a(579),st=a(74),ut=a(275),dt=a(594),mt=a(277);a(524);var ft=Object(l.b)(function(e){return{token:e.auth.token}},function(e){return{save:function(t,a,n,r,o,c){return e(function(e,t,a,n){return function(r,o){var c=o(),i=c.users.users.filter(function(t){return t.id===e})[0],l=i.username,s=i.email,u=i.partner_data.balance,d=i.partner_data.Wrate,m=i.partner_data.CCrate,f=i.partner_data.BTCrate,p=i.partner_data.btc,b=i.is_staff,h=n.balance,E=n.Wrate,y=n.CCrate,g=n.BTCrate,O=n.btc,S="Bearer "+c.auth.token;X.a.patch("".concat(ue,"/api/users/").concat(e,"/"),{username:t,email:a,partner_data:n},{headers:{Authorization:S}}).then(function(n){r({type:"USERS_EDIT_SUCCESS",data:n.data}),r({type:"USERS_END_EDIT"}),r(ve()),r(Se(e));var o=b?"admin":"partner with id ".concat(e),c=t!==l?" username from ".concat(l," to ").concat(t,","):"",i=a!==s?" email from ".concat(s," to ").concat(a,","):"",S=parseFloat(h)!==parseFloat(u)?" balance from ".concat(ae()(parseFloat(u)).format("0,0.00 $")," to ").concat(ae()(parseFloat(h)).format("0,0.00 $"),","):"",v=E!==d?" Wire rate from ".concat(d," to ").concat(E,","):"",C=y!==m?" Credit Card rate from ".concat(m," to ").concat(y,","):"",k=g!==f?" BTC rate from ".concat(f," to ").concat(g,","):"",D=p!==O?O?" activated BTC":"deactivated BTC":"",_="Updated ".concat(o,": changed").concat(c+i+D+S+v+C+k).replace(/.$/,".");r(de(e,oe,_))}).catch(function(e){return r({type:"USERS_EDIT_FAIL",error:e})})}}(t,a,n,r))},toggleActiveState:function(t,a){return e(function(e,t){return function(a,n){var r=n(),o=r.users.users.filter(function(t){return me(t.url)===e})[0].username,c="Bearer "+r.auth.token;X.a.patch("".concat(ue,"/api/users/").concat(e,"/"),{is_active:t,partner_data:{}},{headers:{Authorization:c}}).then(function(n){a({type:"USERS_ARCHIVE_SUCCESS",data:n.data}),a({type:"USERS_END_EDIT"}),a(Se(e));var r=t?ie:ce,c="".concat(t?"Activated":"Deactivated"," partner ").concat(o,". Now he will ").concat(t?"again":"not"," be available for new transactions and").concat(t?"":" will not be able to"," log in.");a(de(e,r,c))}).catch(function(e){return a({type:"USERS_ARCHIVE_FAIL",error:e})})}}(t,a))},endEdit:function(){return e(function(e){e({type:"USERS_END_EDIT"})})},remove:function(t){return e(function(e){return function(t,a){var n=a(),r=n.auth.token,o=n.users.users.filter(function(t){return me(t.url)===e})[0],c="Bearer "+r;X.a.delete("".concat(ue,"/api/users/").concat(e,"/"),{headers:{Authorization:c}}).then(function(){var a=o.username,n=o.partner_data.balance;t({type:"USERS_REMOVE_SUCCESS",id:e}),t({type:"USERS_END_EDIT"}),t(ve()),t(Ee());var r="Removed partner ".concat(a,", along with his balance of ").concat(n," and all his transactions.");t(null,re,r)}).catch(function(e){return t({type:"USERS_REMOVE_FAIL",error:e})})}}(t))}}})(function(e){var t=e.editing,a=e.endEdit,o=e.username,c=e.email,i=e.Wrate,l=e.CCrate,s=e.BTCrate,u=e.balance,d=e.active,m=e.btc,f=e.staff,p=e.id,b=e.save,h=e.remove,E=e.toggleActiveState,y=Object(n.useState)(o),g=Object(je.a)(y,2),O=g[0],S=g[1],v=Object(n.useState)(c),C=Object(je.a)(v,2),k=C[0],D=C[1],_=Object(n.useState)(u),w=Object(je.a)(_,2),T=w[0],j=w[1],A=Object(n.useState)(i),N=Object(je.a)(A,2),P=N[0],R=N[1],x=Object(n.useState)(l),I=Object(je.a)(x,2),W=I[0],U=I[1],L=Object(n.useState)(s||1),F=Object(je.a)(L,2),B=F[0],M=F[1],z=Object(n.useState)(d),H=Object(je.a)(z,2),G=H[0],V=H[1],K=Object(n.useState)(m),$=Object(je.a)(K,2),Y=$[0],Z=$[1],Q=Object(n.useState)(!1),X=Object(je.a)(Q,2),ee=X[0],te=X[1];Object(n.useEffect)(function(){V(d)},[d]);var ae=G?"brown":"green",ne=G?"darkbrown":"darkgreen",re=G?"darkred":"darkgreen";return r.a.createElement("div",null,r.a.createElement(it.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"editModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Re.a,null,"Edit user"),r.a.createElement(mt.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(Fe.a,null,r.a.createElement(Fe.a,{horizontal:!0},r.a.createElement(Ye.a,{label:"Username",name:"username",placeholder:"username",value:O||"",onChange:function(e){var t=e.target;return S(t.value)}}),r.a.createElement(Ye.a,{label:"Email",name:"email",placeholder:"email",value:k,onChange:function(e){var t=e.target;return D(t.value)}})),r.a.createElement(Fe.a,{horizontal:!0},r.a.createElement(Ye.a,{type:"number",label:"Balance",name:"balance",placeholder:"balance",value:T||0,onChange:function(e){var t=e.target;return j(t.value)}}),r.a.createElement(Ye.a,{type:"number",step:.01,min:0,max:1,label:"Wire Rate",name:"wire rate",placeholder:"rate",value:P||void 0,onChange:function(e){var t=e.target;return R(t.value)}}),r.a.createElement(Ye.a,{type:"number",step:.01,min:0,max:1,label:"Credit Card ".concat(Y?"R.":"Rate"),name:"credit card rate",placeholder:"rate",value:W||void 0,onChange:function(e){var t=e.target;return U(t.value)}}),Y?r.a.createElement(Ye.a,{type:"number",step:.01,min:0,max:1,label:"BTC Rate",name:"credit card rate",placeholder:"rate",value:B||void 0,onChange:function(e){var t=e.target;return M(t.value)}}):null),r.a.createElement(Fe.a,{horizontal:!0},r.a.createElement(dt.a,{className:"changePassword",target:"_blank",href:"".concat(ue,"/admin/api/user/").concat(p,"/password/")},"Change password")),r.a.createElement(Fe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement(q.a,{className:"btc ".concat(Y?"active":""),onClick:function(){return Z(!Y)},text:"BTC"}),f?null:r.a.createElement(q.a,{className:"delete",styles:{root:{color:ae,borderColor:ae},rootHovered:{color:ne,borderColor:ne},rootPressed:{color:re,borderColor:re}},onClick:function(){return E(p,!G)},text:G?"Deactivate":"Activate",split:!0,menuProps:{items:[{key:"deleteUser",text:"Delete",style:{color:"red",marginRight:0},onClick:function(){return te(!0)},styles:{root:{color:"red"},rootHovered:{color:"red"},rootPressed:{color:"darkred"}},iconProps:{iconName:"Delete",color:"red"}}]}}),r.a.createElement($e.a,{className:"save",onClick:function(){return b(p,O,k,{balance:T,Wrate:P,CCrate:W,BTCrate:B,btc:Y})},text:"Save"}))))),r.a.createElement(lt.a,{hidden:!ee,onDismiss:function(){return te(!1)},dialogContentProps:{type:st.a.normal,title:"Delete user ".concat(o,"?"),subText:"Warning! By deleting this user you will delete all his data, all his related transactions and the resulting profit from this user. Are you absolutely sure you want to delete this user?"},modalProps:{isBlocking:!0,styles:{main:{maxWidth:450}},dragOptions:!0}},r.a.createElement(ut.a,null,r.a.createElement($e.a,{styles:{root:{backgroundColor:"red"},rootHovered:{backgroundColor:"orangered"},rootPressed:{backgroundColor:"darkred"}},onClick:function(){h(p),te(!1)},text:"Delete"}),r.a.createElement(q.a,{onClick:function(){return te(!1)},text:"Cancel"}))))});a(525);function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function bt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pt(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ht=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{add:function(t,a,n,r,o){return e(function(e,t,a,n){return function(r,o){var c="Bearer "+o().auth.token;X.a.post("".concat(ue,"/api/users/"),{username:e,email:t,password:a,partner_data:n},{headers:{Authorization:c}}).then(function(e){var t=e.data,a=t.url,n=t.username,o=t.partner_data,c=o.balance,i=o.Wrate,l=o.CCrate,s=o.BTCrate,u=o.btc;r({type:"USERS_ADD_SUCCESS",user:e.data}),r({type:"USERS_END_ADD"}),r(ve()),r(de(me(a),ne,"Added partner ".concat(n," with initial balance ").concat(ae()(parseFloat(c)).format("0,0.00 $")," Wire rate ").concat(i,", Credit Card rate ").concat(l," ").concat(u?"and BTC rate "+s:"",".")))}).catch(function(e){r({type:"USERS_ADD_FAIL"})})}}(t,a,n,r))},endAdd:function(){return e(function(e){e({type:"USERS_END_ADD"})})}}})(function(e){var t=e.adding,a=e.endAdd,o=e.add,c=e.users,i=Object(n.useState)(""),l=Object(je.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(je.a)(d,2),f=m[0],p=m[1],b=Object(n.useState)(""),h=Object(je.a)(b,2),E=h[0],y=h[1],g=Object(n.useState)(""),O=Object(je.a)(g,2),S=O[0],v=O[1],C=Object(n.useState)(0),k=Object(je.a)(C,2),D=k[0],_=k[1],w=Object(n.useState)(1),T=Object(je.a)(w,2),j=T[0],A=T[1],N=Object(n.useState)(1),P=Object(je.a)(N,2),R=P[0],x=P[1],I=Object(n.useState)(1),W=Object(je.a)(I,2),U=W[0],L=W[1],F=Object(n.useState)(!1),B=Object(je.a)(F,2),M=B[0],z=B[1],H=Object(n.useState)({email:"",username:"",password:"",passwordMatch:""}),G=Object(je.a)(H,2),V=G[0],K=G[1];return Object(n.useEffect)(function(){!(s&&f&&E&&S)||V.username||V.email||V.password||V.passwordMatch?z(!1):z(!0)},[s,f,E,S,V]),r.a.createElement(it.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"editModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Re.a,null,"Add user"),r.a.createElement(mt.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(Fe.a,null,r.a.createElement(Fe.a,{horizontal:!0},r.a.createElement(Ye.a,{label:"Email",name:"email",placeholder:"email",errorMessage:V.email,value:f,onChange:function(e){var t=e.target;return p(t.value)},onBlur:function(){f?(c.map(function(e){return e.email}).forEach(function(e){e===f&&K(bt({},V,{email:"User with this email is already present"}))}),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(f)?K(bt({},V,{email:""})):K(bt({},V,{email:"Email not valid"}))):K(bt({},V,{email:""}))}}),r.a.createElement(Ye.a,{label:"Username",name:"username",placeholder:"username",errorMessage:V.username,value:s,onChange:function(e){var t=e.target;return u(t.value)},onBlur:function(){var e=new RegExp("^[A-Z]+$","i");if(s){e.test(s)?K(bt({},V,{username:""})):K(bt({},V,{username:"Username should contain only letters"}));var t=c.map(function(e){return e.username});for(var a in t)a===s&&K(bt({},V,{username:"User with this username is already present"}))}else K(bt({},V,{username:""}))}})),r.a.createElement(Fe.a,{horizontal:!0},r.a.createElement(Ye.a,{type:"password",label:"Password",name:"password1",placeholder:"password",errorMessage:V.password,value:E,onChange:function(e){var t=e.target;return y(t.value)},onBlur:function(){var e=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})");E?e.test(E)?K(bt({},V,{password:""})):K(bt({},V,{password:"Password not valid"})):K(bt({},V,{password:""}))}}),r.a.createElement(Ye.a,{type:"password",label:"Confirm Password",name:"password2",placeholder:"confirm password",errorMessage:V.passwordMatch,value:S,onChange:function(e){var t=e.target;return v(t.value)},onBlur:function(){K(bt({},V,S?E===S?{passwordMatch:""}:{passwordMatch:"Passwords do not match"}:{passwordMatch:""}))}})),r.a.createElement(Fe.a,{horizontal:!0},r.a.createElement(Ye.a,{type:"number",label:"Balance",name:"balance",placeholder:"balance",value:D,onChange:function(e){var t=e.target;return _(t.value)}}),r.a.createElement(Ye.a,{type:"number",step:.01,min:0,max:1,label:"Wire Rate",name:"wire rate",placeholder:"rate",value:j,onChange:function(e){var t=e.target;return A(t.value)}}),r.a.createElement(Ye.a,{type:"number",step:.01,min:0,max:1,label:"Credit Card R.",name:"credit card rate",placeholder:"rate",value:R,onChange:function(e){var t=e.target;return x(t.value)}}),r.a.createElement(Ye.a,{type:"number",step:.01,min:0,max:1,label:"BTC Rate",name:"BTC rate",placeholder:"rate",value:U,onChange:function(e){var t=e.target;return L(t.value)}})),r.a.createElement(Fe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement($e.a,{disabled:!M,className:"add",onClick:function(){return o(s,f,E,{balance:D,Wrate:j,CCrate:R,BTCrate:U})},text:"Add"})))))});a(526);ae.a.locale("al");var Et=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users,editing:e.users.editing,editingThis:e.users.editingThis,adding:e.users.adding}},function(e){return{selectMenu:function(t){return e(we(t))},setToken:function(t){return e(De(t))},getUsers:function(){return e(Oe())},beginEdit:function(t){return e(function(e){return function(t){t({type:"USERS_BEGIN_EDIT",email:e})}}(t))},beginAdd:function(){return e(function(e){e({type:"USERS_BEGIN_ADD"})})}}})(function(e){var t=e.getUsers,a=e.selectMenu,o=e.beginEdit,c=e.beginAdd,i=e.token,l=e.users,s=e.editing,u=e.editingThis,d=e.adding,m=Object(n.useState)("staff"),f=Object(je.a)(m,2),p=f[0],b=f[1],h=Object(n.useState)(!0),E=Object(je.a)(h,2),y=E[0],g=E[1],O=Object(n.useState)(""),S=Object(je.a)(O,2),v=S[0],C=S[1],k=Object(n.useState)("partner"),D=Object(je.a)(k,2),_=D[0],w=D[1];Object(n.useEffect)(function(){t()},[t]);var T,j,A,N,P=[{key:"username",name:"Username",fieldName:"username",minWidth:60,maxWidth:80,isSorted:"username"===p,isSortedDescending:y,onColumnClick:x,data:"string",isPadded:!0},{key:"email",name:"Email",fieldName:"email",minWidth:180,maxWidth:200,isSorted:"email"===p,isSortedDescending:y,onColumnClick:x,data:"string",isPadded:!0},{key:"last_login",name:"Last login",fieldName:"last_login",minWidth:80,maxWidth:100,isSorted:"last_login"===p,isSortedDescending:y,onColumnClick:x,data:"date",isPadded:!0},{key:"balance",name:"Balance",fieldName:"balance",minWidth:80,maxWidth:90,isSorted:"balance"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"Wrate",name:"Wire",fieldName:"Wrate",minWidth:30,maxWidth:30,isSorted:"Wrate"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"CCrate",name:"CC",fieldName:"CCrate",minWidth:30,maxWidth:30,isSorted:"CCrate"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"BTCrate",name:"BTC",fieldName:"BTCrate",minWidth:30,maxWidth:30,isSorted:"BTCrate"===p,isSortedDescending:y,onColumnClick:x,data:"number",isPadded:!0},{key:"btc",name:"BTC on",fieldName:"btc",minWidth:40,maxWidth:40,isPadded:!0},{key:"is_active",name:"Active",fieldName:"active",minWidth:60,maxWidth:100,isPadded:!0}],R=(T=l.map(function(e){return{id:e.id,email:e.email,last_login:Xe()(new Date(e.last_login)).fromNow().replace("50 years ago","never"),date_joined:Xe()(new Date(e.date_joined)).fromNow(),username:e.username,password:e.password,balance:parseFloat(e.partner_data.balance),Wrate:e.partner_data.Wrate,CCrate:e.partner_data.CCrate,BTCrate:e.partner_data.BTCrate,btc:e.partner_data.btc,active:e.is_active,staff:e.is_staff}}),j=p,A=y,T.sort(function(e,t){var a=e[j],n=t[j];return A?a<n?-1:a>n?1:0:a>n?-1:a<n?1:0})).filter(function(e){return-1!==e.email.indexOf(v)||-1!==e.username.toLowerCase().indexOf(v)}).filter(function(e){switch(_){case"partner":return!e.staff;case"admin":return e.staff;default:return!0}});function x(e,t){var a=t.key;b(a),g(!0),a===p&&g(!y)}return Object(n.useEffect)(function(){a("1"),document.title="Chimera | Users"},[t,a]),N=R.filter(function(e){return e.email===u})[0],i?r.a.createElement("div",{id:"users"},r.a.createElement(tt.a,null,r.a.createElement(Fe.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(Fe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},r.a.createElement(et.a,{styles:{root:{width:300}},iconProps:{iconName:"Filter",style:{color:"black"}},value:v,placeholder:"Filter by username or email...",onChange:function(e){var t=e.target;return C(t.value)}}),r.a.createElement(Be.a,{style:{width:150},options:[{key:"admin",text:"Admin"},{key:"partner",text:"Partner"}],selectedKey:_,placeholder:"Filter by role...",onChange:function(e,t){var a=t.key;return w(a)}})),r.a.createElement($e.a,{allowDisabledFocus:!0,disabled:d,checked:!1,text:"New user",onClick:function(){return c()},iconProps:{iconName:"Add"},align:"end",styles:{root:{justifySelf:"flex-end"}}})),r.a.createElement(ct.a,null,r.a.createElement(nt.a,{className:"table",maxWidth:960,minWidth:960,items:R,compact:!1,columns:P,onItemInvoked:function(e){var t=e.email;o(t)},enableShimmer:!R,isHeaderVisible:!0,checkboxVisibility:2,selectionMode:rt.b.multiple,layoutMode:ot.e.justified,onRenderItemColumn:function(e,t,a){var n=e[a.fieldName];switch(a.key){case"is_active":case"btc":return n?r.a.createElement(J.a,{iconName:"StatusCircleInner",styles:{root:{marginLeft:"14px"}}}):null;case"balance":return r.a.createElement("span",{style:{textAlign:"right"}},ae()(n).format("0,0.00 $"));default:return r.a.createElement("span",null,n)}},onRenderRow:function(e){return r.a.createElement(at.a,Object.assign({},e,{styles:{root:{backgroundColor:e.item.staff?"lightblue":"white",fontSize:"1.1em"}}}))}}))),s?r.a.createElement(ft,Object.assign({editing:s},N)):null,d?r.a.createElement(ht,{adding:d}):null):r.a.createElement(K.a,{to:"/login"})}),yt=a(598),gt=a(578),Ot=a(568),St=a(273);a(530);ae.a.locale("al");var vt=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users,clients:e.transactions.clients}},function(e){return{add:function(t,a,n,r,o,c){return e(function(e,t,a,n,r,o){return"Payment"===e&&(t="-"),function(c,i){var l=i(),s=l.users.users.filter(function(e){return e.id===o})[0].username,u="Bearer "+l.auth.token;X.a.post("".concat(ue,"/api/transactions/"),{transaction_type:e,client_name:t,amount:a,amount_paid:n,rate:r,user:o},{headers:{Authorization:u}}).then(function(i){var l;c({type:"TRANSACTIONS_ADD_SUCCESS",transaction:i.data}),c({type:"TRANSACTIONS_END_ADD"}),c(Se(o)),c(ve());var u=ae()(Math.abs(parseFloat(a))).format("0,0.00 $"),d=ae()(Math.abs(parseFloat(n))).format("0,0.00 $");switch(e){case"Wire":case"Credit Card":l="Added deposit of ".concat(u," by client ").concat(t,", made via ").concat(e,". Amount registered on partner ").concat(s," is ").concat(d,", given that the actual rate is ").concat(r,".");break;case"Withdraw":l="Client ".concat(t," withdrawed ").concat(u," from main balance. ").concat(d," were substracted from ").concat(s,"'s balance, given that the actual rate is ").concat(r,".");break;case"Payment":l="Made payment of ".concat(u," to ").concat(s);break;default:l="Made transaction of type ".concat(e,". Partner ").concat(s,", main amount ").concat(u,", partner amount ").concat(d," (because rate is ").concat(r,").")}c(de(o,le,l))}).catch(function(e){c({type:"TRANSACTIONS_ADD_FAIL",e:e})})}}(t,a,n,r,o,c))},endAdd:function(){return e(function(e){e({type:"TRANSACTIONS_END_ADD"})})}}})(function(e){var t=e.adding,a=e.endAdd,o=e.add,c=e.users,i=e.clients,l=Object(n.useState)(""),s=Object(je.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),f=Object(je.a)(m,2),p=f[0],b=f[1],h=Object(n.useState)([]),E=Object(je.a)(h,2),y=E[0],g=E[1],S=Object(n.useState)(0),v=Object(je.a)(S,2),C=v[0],k=v[1],D=Object(n.useState)(0),_=Object(je.a)(D,2),w=_[0],T=_[1],j=Object(n.useState)(""),A=Object(je.a)(j,2),N=A[0],P=A[1],R=Object(n.useState)({partner_data:{rate:1}}),x=Object(je.a)(R,2),I=x[0],W=x[1],U=Object(n.useState)(1),L=Object(je.a)(U,2),F=L[0],B=L[1],M=Object(n.useState)(1),z=Object(je.a)(M,2),H=z[0],G=z[1],V=Object(n.useState)(!1),K=Object(je.a)(V,2),$=K[0],Y=K[1];Object(n.useEffect)(function(){switch(u){case"Wire":B(parseFloat(I.partner_data.Wrate).toPrecision(2));break;case"Credit Card":B(parseFloat(I.partner_data.CCrate).toPrecision(2));break;case"BTC":B(parseFloat(I.partner_data.BTCrate).toPrecision(2));break;case"Withdraw":B(parseFloat(I.partner_data.Wrate).toPrecision(2));break;case"Payment":default:B(1)}},[I,u]),Object(n.useEffect)(function(){k(Math.abs(C)*H)},[H,u,C]),Object(n.useEffect)(function(){T(Math.round(C*F*100+Number.EPSILON)/100)},[C,F]),Object(n.useEffect)(function(){var e=!1;"Payment"===u&&b(""),"Payment"!==u&&""===p||(e=!0),Y(!(""===u||0===C||""===N||!e))},[u,C,N,p]),Object(n.useEffect)(function(){Q(u)},[u]),Object(n.useEffect)(function(){g(i.map(function(e){return{key:e,text:e}}))},[]);var Z=c.filter(function(e){return!e.is_staff&&e.is_active&&("BTC"!==u||e.partner_data.btc)}).map(function(e){return{key:e.id,text:e.username}});function Q(e){switch(e){case"Wire":case"Credit Card":case"BTC":G(1);break;case"Withdraw":case"Payment":G(-1);break;default:G(1)}}var X="white";switch(u){case"Wire":X="#fce100";break;case"Credit Card":X="#ffaa44";break;case"BTC":X="#8e41be";break;case"Withdraw":X="#da3b01";break;case"Payment":X="#00b7c3";break;default:X="white"}var ee=u&&"Payment"!==u&&N;return r.a.createElement(it.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"transactionModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Re.a,null,"Add transaction"),r.a.createElement(mt.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",{style:{borderLeft:"4px solid ".concat(X)}},r.a.createElement(Fe.a,null,r.a.createElement(Fe.a,{horizontal:!0,className:"row1"},r.a.createElement(Be.a,{label:"Type of transaction",autoComplete:"on",selectedKey:u,options:[{key:"Wire",text:"Wire"},{key:"Credit Card",text:"Credit Card"},{key:"BTC",text:"BTC"},{key:"Withdraw",text:"Withdraw"},{key:"Payment",text:"Payment"}],placeholder:"Type...",onChange:function(e,t){var a=t.key;return d(a)}}),r.a.createElement(Be.a,{label:"Partner name",autoComplete:"on",allowFreeform:!0,selectedKey:N,options:Z,placeholder:"Partner...",onChange:function(e,t){var a=t.key;P(a),W(c.filter(function(e){return e.id===a})[0])}})),r.a.createElement(Fe.a,{horizontal:!0,className:"row2"},r.a.createElement(Be.a,{disabled:"Payment"===u,label:"Client name",autoComplete:"on",allowFreeform:!0,selectedKey:p,options:y,onBlur:function(){g([{key:p,text:p}].concat(Object(O.a)(y)))},placeholder:"Client name...",onChange:function(e,t){return b(e.target.value?e.target.value:t.key)}}),r.a.createElement(Ye.a,{type:"number",step:1,name:"amount",label:"Amount",placeholder:"amount",value:C,onChange:function(e){var t=e.target;Q(u),t.value?k(H*Math.abs(parseFloat(t.value))):k(0)}})),r.a.createElement(Fe.a,{horizontal:!0,className:"row3"},r.a.createElement(Re.a,{className:"calc",styles:{root:{visibility:ee?"visible":"hidden"}},variant:"xLarge"},"".concat(ae()(C).format("0,0.00")," x ").concat(F," =")),r.a.createElement("div",{className:"partnerAmount"},r.a.createElement("label",{htmlFor:"partner_amount"},r.a.createElement(Re.a,{variant:"medium"},"Partner amount")),r.a.createElement(Re.a,{className:"amount",name:"partner_amount",variant:"xLarge"},ae()(w).format("0,0.00 $")))),r.a.createElement(Fe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement($e.a,{className:"add",disabled:!$,onClick:function(){return o(u,p,C,w,F,N)},text:"Add"})))))}),Ct=(a(531),ue.replace("https","http"));ae.a.locale("al");var kt=Object(l.b)(function(e){return{token:e.auth.token,users:e.users.users}},function(e){return{edit:function(t,a,n,r,o,c){return e(function(e,t,a,n,r,o,c){return"Payment"===e&&(t="-"),function(i,l){var s=l(),u=s.transactions.transactions.filter(function(e){return e.id===c})[0].username,d="Bearer "+s.auth.token;X.a.post("".concat(ue,"/api/transactions/"),{transaction_type:e,client_name:t,amount:a,amount_paid:n,rate:r,user:o},{headers:{Authorization:d}}).then(function(c){var l;i({type:"TRANSACTIONS_ADD_SUCCESS",transaction:c.data}),i({type:"TRANSACTIONS_END_ADD"}),i(Se(o)),i(ve());var s=ae()(Math.abs(parseFloat(a))).format("0,0.00 $"),d=ae()(Math.abs(parseFloat(n))).format("0,0.00 $");switch(e){case"Wire":case"Credit Card":l="Added deposit of ".concat(s," by client ").concat(t,", made via ").concat(e,". Amount registered on partner ").concat(u," is ").concat(d,", given that the actual rate is ").concat(r,".");break;case"Withdraw":l="Client ".concat(t," withdrawed ").concat(s," from main balance. ").concat(d," were substracted from ").concat(u,"'s balance, given that the actual rate is ").concat(r,".");break;case"Payment":l="Made payment of ".concat(s," to ").concat(u);break;default:l="Made transaction of type ".concat(e,". Partner ").concat(u,", main amount ").concat(s,", partner amount ").concat(d," (because rate is ").concat(r,").")}i(de(o,le,l))}).catch(function(e){i({type:"TRANSACTIONS_ADD_FAIL",e:e})})}}(t,a,n,r,o,c))},endEdit:function(){return e(function(e){e({type:"TRANSACTIONS_END_EDIT"})})}}})(function(e){var t=e.editing,a=e.endEdit,o=e.edit,c=e.users,i=e.data,l=Object(n.useState)(i.transaction_type),s=Object(je.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(i.client_name),f=Object(je.a)(m,2),p=f[0],b=f[1],h=Object(n.useState)(parseFloat(i.amount)),E=Object(je.a)(h,2),y=E[0],g=E[1],O=Object(n.useState)(parseFloat(i.amount_paid)),S=Object(je.a)(O,2),v=S[0],C=S[1],k=Object(n.useState)(i.user),D=Object(je.a)(k,2),_=D[0],w=D[1],T=Object(n.useState)({partner_data:{rate:1}}),j=Object(je.a)(T,2),A=j[0],N=j[1],P=Object(n.useState)(A.partner_data.rate),R=Object(je.a)(P,2),x=R[0],I=R[1],W=Object(n.useState)(1),U=Object(je.a)(W,2),L=U[0],F=U[1],B=Object(n.useState)(!1),M=Object(je.a)(B,2),z=M[0],H=M[1];Object(n.useEffect)(function(){switch(u){case"Wire":case"Credit Card":case"Withdraw":I(parseFloat(A.partner_data.rate).toPrecision(2));break;case"Payment":I(1);break;default:I(parseFloat(A.partner_data.rate).toPrecision(2))}},[A,u]),Object(n.useEffect)(function(){g(Math.abs(y)*L)},[L,u,y]),Object(n.useEffect)(function(){C(Math.round(y*x*100+Number.EPSILON)/100)},[y,x]),Object(n.useEffect)(function(){var e=!1;"Payment"===u&&b(""),"Payment"!==u&&""===p||(e=!0),H(!(""===u||0===y||""===_||!e))},[u,y,_,p]),Object(n.useEffect)(function(){V(u)},[u]);var G=c.filter(function(e){return!e.is_staff&&e.is_active}).map(function(e){var t=e.url.split("/");return{key:t[t.length-2],text:e.username}});function V(e){switch(e){case"Wire":case"Credit Card":F(1);break;case"Withdraw":case"Payment":F(-1);break;default:F(1)}}return r.a.createElement(it.a,{isOpen:t,onDismiss:a,isModeless:!0,dragOptions:{dragHandleSelector:".head"},containerClassName:"transactionModal"},r.a.createElement("div",{className:"head"},r.a.createElement(Re.a,null,"Edit transaction"),r.a.createElement(mt.a,{style:{height:"100%"},buttonType:5,onClick:function(){return a()}},r.a.createElement(J.a,{iconName:"Cancel",style:{color:"white"}}))),r.a.createElement("form",null,r.a.createElement(Fe.a,null,r.a.createElement(Fe.a,{horizontal:!0,className:"row1"},r.a.createElement(Be.a,{label:"Type of transaction",autoComplete:"on",selectedKey:u,options:[{key:"Wire",text:"Wire"},{key:"Credit Card",text:"Credit Card"},{key:"Withdraw",text:"Withdraw"},{key:"Payment",text:"Payment"}],placeholder:"Type...",onChange:function(e,t){var a=t.key;return d(a)}}),r.a.createElement(Be.a,{label:"Partner name",autoComplete:"on",allowFreeform:!0,selectedKey:_,options:G,placeholder:"Partner...",onChange:function(e,t){var a=t.key;w(a);var n="".concat(Ct,"/api/users/").concat(a,"/");N(c.filter(function(e){return e.url===n})[0])}})),r.a.createElement(Fe.a,{horizontal:!0,className:"row2"},r.a.createElement(Ye.a,{disabled:"Payment"===u,name:"client",label:"Client name",placeholder:"client",value:p,onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement(Ye.a,{type:"number",step:1,name:"amount",label:"Amount",placeholder:"amount",value:y,onChange:function(e){var t=e.target;V(u),t.value?g(L*Math.abs(parseFloat(t.value))):g(0)}})),r.a.createElement(Fe.a,{horizontal:!0,className:"row3"},r.a.createElement(Re.a,{className:"calc",variant:"xLarge"},"".concat(ae()(y).format("0,0.00")," x ").concat(x," =")),r.a.createElement("div",{className:"partnerAmount"},r.a.createElement("label",{htmlFor:"partner_amount"},r.a.createElement(Re.a,{variant:"medium"},"Partner amount")),r.a.createElement(Re.a,{className:"amount",name:"partner_amount",variant:"xLarge"},ae()(v).format("0,0.00 $")))),r.a.createElement(Fe.a,{horizontal:!0,className:"actions"},r.a.createElement(q.a,{className:"cancel",onClick:function(){return a()},text:"Cancel"}),r.a.createElement($e.a,{className:"edit",disabled:!z,onClick:function(){return o(u,p,y,v,x,_)},text:"Save"})))))});a(532),ue.replace("https","http");ae.a.locale("al");var Dt=Object(l.b)(function(e){return{token:e.auth.token,admin:e.auth.admin,balance:e.auth.balance,btc:e.auth.btc,users:e.users.users,transactions:e.transactions.transactions,editing:e.transactions.editing,adding:e.transactions.adding,editData:e.transactions.editData,filters:e.transactions.filters}},function(e){return{selectMenu:function(t){return e(we(t))},setToken:function(t){return e(De(t))},beginAdd:function(){return e(function(e){e({type:"TRANSACTIONS_BEGIN_ADD"})})},beginEdit:function(t){return e(function(e){return function(t,a){t({type:"TRANSACTIONS_BEGIN_EDIT",transaction:a().transactions.transactions.filter(function(t){return t.id===e})[0]})}}(t))},remove:function(t){return e(function(e){return function(t,a){var n=a(),r="Bearer "+n.auth.token;X.a.delete("".concat(ue,"/api/transactions/").concat(e,"/"),{headers:{Authorization:r}}).then(function(){var a=n.transactions.transactions.filter(function(t){return t.id===e})[0],r=a.amount,o=a.amount_paid,c=a.client_name,i=a.user,l=a.rate,s=a.transaction_type,u=n.users.users.filter(function(e){return e.url==="".concat(ue,"/api/users/").concat(i,"/")})[0].username,d=ae()(parseFloat(r)).format("0,0.00 $"),m=ae()(parseFloat(o)).format("0,0.00 $");t({type:"TRANSACTIONS_REMOVE_SUCCESS",id:e}),t({type:"TRANSACTIONS_END_EDIT"}),t(ve());var f="Removed transaction ".concat(e," of type ").concat(s,". Client: ").concat(c,". Main amount: ").concat(d,". Partner amount: ").concat(m,". Partner: ").concat(u,". Rate ").concat(l);t(de(i,se,f))}).catch(function(e){return t({type:"TRANSACTIONS_REMOVE_FAIL",error:e})})}}(t))},getTransactions:function(){return e(Ee())},getClients:function(){return e(function(e,t){var a="Bearer "+t().auth.token;X.a.get("".concat(ue,"/api/clients/"),{headers:{Authorization:a}}).then(function(t){var a=t.data;e({type:"TRANSACTIONS_GET_CLIENTS_LIST",clients:a})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(_e)})})},setFilter:function(t,a){return e(function(e,t){return function(a){a({type:"TRANSACTIONS_SET_FILTER",filter:e,value:t}),a(Ee())}}(t,a))},allTypes:function(t){return e({type:"TRANSACTIONS_SET_ALL_TYPES_SELECTED",allTypesSelected:t})},allPartners:function(t){return e({type:"TRANSACTIONS_SET_ALL_PARTNERS_SELECTED",allPartnersSelected:t})}}})(function(e){var t=e.selectMenu,a=e.beginAdd,o=e.token,c=e.users,i=e.admin,l=e.adding,s=e.editing,u=e.editData,d=e.transactions,m=e.remove,f=e.getTransactions,p=e.getClients,b=e.setFilter,h=e.filters,E=e.allPartners,y=e.allTypes,g=e.btc,S=Object(n.useState)(!1),v=Object(je.a)(S,2),C=v[0],k=v[1],D=Object(n.useState)(0),_=Object(je.a)(D,2),w=_[0],T=_[1],j=h.client,A=h.partners,N=h.types,P=h.fromDate,R=h.toDate;P=new Date(P),R=new Date(R),Object(n.useEffect)(function(){A.length||b("partners",c.filter(function(e){return!e.is_staff}).map(function(e){return e.id})),N.length||b("types",["Wire","Credit Card","BTC","Withdraw","Payment"])},[b,c]);var x=c.filter(function(e){return!e.is_staff}).map(function(e){var t=e.id;return{key:t,text:e.username,selected:A.includes(t)}}),I=[{key:"Wire",text:"Wire",selected:N.includes("Wire")},{key:"Credit Card",text:"Credit Card",selected:N.includes("Credit Card")},{key:"BTC",text:"BTC",selected:N.includes("BTC")},{key:"Withdraw",text:"Withdraw",selected:N.includes("Withdraw")},{key:"Payment",text:"Payment",selected:N.includes("Payment")}];Object(n.useEffect)(function(){document.title="Chimera | Transactions",t(i?"2":"3"),f(),i&&p()},[t,f,i]);var W,U=[{key:"id",name:"ID",fieldName:"id",minWidth:17,maxWidth:17,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"transaction_type",name:"Type",fieldName:"transaction_type",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"client",name:"Client name",fieldName:"client",minWidth:110,maxWidth:180,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"partner",name:"Partner",fieldName:"partner",minWidth:70,maxWidth:80,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"amount",name:"Amount",fieldName:"amount",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"rate",name:"Rate",fieldName:"rate",minWidth:30,maxWidth:50,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"amount_paid",name:"Partner amount",fieldName:"amount_paid",minWidth:70,maxWidth:90,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"created_at",name:"Created at",fieldName:"created_at",minWidth:110,maxWidth:110,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"delete",name:"Delete",minWidth:45,maxWidth:55,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0,onRender:function(e){return r.a.createElement(yt.a,{onClick:function(){k(!0),T(e.id)},styles:{root:{height:"15px",marginLeft:"7px",color:"#ccc"},rootHovered:{color:"red"},rootPressed:{color:"darkred"}},iconProps:{iconName:"Delete"}})}}],L=[{key:"id",name:"ID",fieldName:"id",minWidth:20,maxWidth:30,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"transaction_type",name:"Type",fieldName:"transaction_type",minWidth:60,maxWidth:100,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"client",name:"Client name",fieldName:"client",minWidth:120,maxWidth:140,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"amount",name:"Amount",fieldName:"amount",minWidth:50,maxWidth:60,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"amount_paid",name:"My amount",fieldName:"amount_paid",minWidth:60,maxWidth:80,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0},{key:"created_at",name:"Created at",fieldName:"created_at",minWidth:130,maxWidth:150,isRowHeader:!1,isSorted:!1,isSortedDescending:!1,onColumnClick:F,data:"string",isPadded:!0,isResizable:!0}];function F(){}return W=d.filter(function(e){return"BTC"!==e.transaction_type}).map(function(e){return{id:e.id,transaction_type:e.transaction_type,client:e.client_name,amount:ae()(parseFloat(e.amount)).format("0,0.00 $"),rate:ae()(parseFloat(e.rate)).format("0 %"),partner:i?c.filter(function(t){return parseInt(t.id)===e.user})[0].username:null,amount_paid:ae()(parseFloat(e.amount_paid)).format("0,0.00 $"),created_at:Xe()(new Date(e.entry_time)).format("DD/MM/YYYY hh:mm:ss")}}),o?r.a.createElement("div",{id:"transactions"},r.a.createElement(tt.a,null,r.a.createElement(Fe.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:20},styles:{root:{width:960,padding:"20px 0"}}},r.a.createElement(Fe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto"}}},r.a.createElement(gt.a,{placeholder:"Type",selectedKeys:N,onChange:function(e,t){var a=I.map(function(e){return e.key===t.key?t:e});y(a.every(function(e){return e.selected})),b("types",a.filter(function(e){return e.selected}).map(function(e){return e.key}))},multiSelect:!0,options:[{key:"typesHeader",text:"Types",itemType:Ot.a.Header}].concat(Object(O.a)(I.filter(function(e){return g||i?e:"BTC"!==e.key}))),style:{width:120,textAlign:"left"}}),r.a.createElement(et.a,{styles:{root:{width:150}},iconProps:{iconName:"Filter",style:{color:"black"}},value:j,placeholder:"Client name...",onChange:function(e){var t=e.target;return b("client",t.value.toLowerCase())}}),i?r.a.createElement(gt.a,{placeholder:"Filter by partner",selectedKeys:A,onChange:function(e,t){var a=x.map(function(e){return e.key===t.key?t:e});E(a.every(function(e){return e.selected})),b("partners",a.filter(function(e){return e.selected}).map(function(e){return e.key}))},multiSelect:!0,options:[{key:"partnersHeader",text:"Partners",itemType:Ot.a.Header}].concat(Object(O.a)(x)),style:{width:140,textAlign:"left"}}):null,r.a.createElement(Ue.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Le.b.Monday,maxDate:R,placeholder:"From date",value:P,onSelectDate:function(e){return b("fromDate",new Date(new Date(e).setHours(0,0,0,0)))}}),r.a.createElement(Ue.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Le.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:P,placeholder:"To date",value:R,onSelectDate:function(e){return b("toDate",new Date(new Date(e).setHours(23,59,59,0)))}})),i?r.a.createElement($e.a,{allowDisabledFocus:!0,disabled:l,checked:!1,text:"New transaction",onClick:function(){return a()},iconProps:{iconName:"Add"},align:"end",styles:{root:{justifySelf:"flex-end"}}}):null),r.a.createElement(ct.a,null,r.a.createElement(nt.a,{className:"table",maxWidth:i?960:720,height:"70%",items:W,compact:!0,columns:i?U:L,onItemInvoked:function(e){e.id},enableShimmer:!W,isHeaderVisible:!0,checkboxVisibility:2,selectionMode:rt.b.multiple,layoutMode:ot.e.justified,onRenderItemColumn:function(e,t,a){return"amount"===a.key||"amount_paid"===a.key?r.a.createElement("div",{style:{textAlign:"right"}},e[a.key]):"id"===a.key||"created_at"===a.key?r.a.createElement("div",{style:{fontSize:"1em"}},e[a.key]):e[a.key]},onRenderRow:function(e){var t;switch(e.item.transaction_type){case"Wire":t="#fce100";break;case"Credit Card":t="#ffaa44";break;case"BTC":t="#8e41be";break;case"Withdraw":t="#da3b01";break;case"Payment":t="#00b7c3",e.item.amount="",e.item.rate="";break;default:t="white"}return r.a.createElement(at.a,Object.assign({},e,{styles:{root:{borderLeft:"4px solid ".concat(t),fontSize:"1.1em"}}}))},onShouldVirtualize:function(){return!1},constrainMode:ot.d.unconstrained}))),l?r.a.createElement(vt,{adding:l}):null,s?r.a.createElement(kt,{data:u,editing:s}):null,r.a.createElement(lt.a,{hidden:!C,onDismiss:function(){return k(!1)},dialogContentProps:{type:st.a.normal,title:"Delete transaction?",subText:"Do you really want do delete this transaction?"},modalProps:{isBlocking:!0,styles:{main:{maxWidth:450}},dragOptions:!0}},r.a.createElement(ut.a,null,r.a.createElement($e.a,{styles:{root:{backgroundColor:"red"},rootHovered:{backgroundColor:"orangered"},rootPressed:{backgroundColor:"darkred"}},onClick:function(){m(w),k(!1)},text:"Delete"}),r.a.createElement(q.a,{onClick:function(){return k(!1)},text:"Cancel"}))),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"data"},r.a.createElement(Re.a,{variant:"small"},d.length||"No"," transaction",1!==d.length?"s":"")),d.length?r.a.createElement(q.a,{iconProps:{iconName:"Download"}},r.a.createElement(St.CSVLink,{filename:"transactions_report_".concat(Xe()(new Date).format("DD_MM_YYYY_hh_mm_ss"),".csv"),data:W,headers:[{label:"ID",key:"id"},{label:"Type",key:"transaction_type"},{label:"Client Name",key:"client"},{label:"Parner Name",key:"partner"},{label:"Amount",key:"amount"},{label:"Partner Amount",key:"amount_paid"},{label:"Date",key:"created_at"}]},"Download CSV")):null)):r.a.createElement(K.a,{to:"/login"})}),_t=a(576),wt=a(4),Tt=(a(533),ue.replace("https","http"));var jt=Object(l.b)(function(e){return{token:e.auth.token,logs:e.logs.logs,filters:e.logs.filters,users:e.users.users}},function(e){return{getLogs:function(){return e(function(e,t){var a=t(),n=a.logs.filters,r=n.fromDate,o=n.toDate,c=n.message,i=a.auth.token,l="?from=".concat(new Date(r).toLocaleDateString("it-IT"),"&to=").concat(new Date(o).toLocaleDateString("it-IT"),"&");c&&(l+="message=".concat(c));var s="Bearer "+i;X.a.get("".concat(ue,"/api/logs/").concat(l),{headers:{Authorization:s}}).then(function(t){e({type:"LOGS_GET_DATA",data:t.data})}).catch(function(t){console.log(t),t.response&&401===t.response.status&&e(_e())})})},remove:function(t){return e(function(e){return function(t,a){var n="Bearer "+a().auth.token;X.a.delete("".concat(ue,"/api/logs/").concat(e),{headers:{Authorization:n}}).then(function(a){t({type:"LOGS_REMOVE",id:e})}).catch(function(e){console.log(e)})}}(t))},selectMenu:function(t){return e(we(t))},setFilter:function(t,a){return e(function(e,t){return{type:"LOGS_SET_FILTER",filter:e,value:t}}(t,a))}}})(function(e){var t=e.logs,a=e.token,o=e.getLogs,c=e.remove,i=e.selectMenu,l=e.users,s=e.filters,u=e.setFilter;function d(e){var t=e.item,a=Object(n.useState)(!1),o=Object(je.a)(a,2),i=o[0],l=o[1],s=i?"#666":"#ccc";return r.a.createElement("div",{className:"log",onMouseOver:function(){return l(!0)},onMouseOut:function(){return l(!1)}},r.a.createElement(yt.a,{onMouseEnter:function(){return l(!0)},onClick:function(){return c(t.key)},iconProps:{iconName:"Delete"},styles:{root:{position:"absolute",right:"5px",top:"3px",color:s},rootHovered:{color:"red"}}}),r.a.createElement(_t.a,Object.assign({},t,{className:h.exampleRoot})))}var m=s.fromDate,f=s.toDate,p=s.message;function b(e){if(l.length){var t=l.filter(function(t){return t.url==="".concat(Tt,"/api/users/").concat(e,"/")});return t.length?"@"+t[0].username:"Deleted"}return""}m=new Date(m),f=new Date(f),Object(n.useEffect)(function(){document.title="Chimera | Logs",i("4")},[i]),Object(n.useEffect)(function(){o()},[o,s]);var h=Object(wt.C)({exampleRoot:{marginTop:"8px",textAlign:"left"},nameText:{fontWeight:"bold"}}),E=t.map(function(e){var t="",a="";switch(e.log_type){case ne:t="FollowUser",a="darkgreen";break;case re:t="UserRemove",a="darkred";break;case oe:t="UserSync",a="orange";break;case le:t="Money",a="darkgreen";break;case se:t="Money",a="darkred";break;case ce:t="UserPause",a="darkred";break;case ie:t="UserFollowed",a="darkgreen";break;default:t="Message"}return{key:e.id,activityDescription:[r.a.createElement(Re.a,{className:h.nameText,key:e.id},fe(e.log_type)),r.a.createElement(dt.a,{key:e.id+"a"},"\xa0",b(e.user))],activityIcon:r.a.createElement(J.a,{styles:{root:{color:a}},iconName:t}),comments:[r.a.createElement("span",{key:e.id},e.message)],timeStamp:Xe()(new Date(e.entry_time)).format("DD/MM/YY hh:mm:ss")}});return a?r.a.createElement("div",{id:"logs"},r.a.createElement(Fe.a,{horizontal:!0,horizontalAlign:"auto",tokens:{childrenGap:20},styles:{root:{width:"auto",marginTop:"20px",marginBottom:"12px"}}},r.a.createElement(Ue.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Le.b.Monday,maxDate:f,placeholder:"From date",value:m,onSelectDate:function(e){return u("fromDate",new Date(new Date(e).setHours(0,0,0,0)))}}),r.a.createElement(Ue.a,{style:{width:140},formatDate:function(e){return pe(e)},firstDayOfWeek:Le.b.Monday,maxDate:new Date((new Date).setHours(23,59,59,0)),minDate:m,placeholder:"To date",value:f,onSelectDate:function(e){return u("toDate",new Date(new Date(e).setHours(23,59,59,0)))}}),r.a.createElement(et.a,{styles:{root:{width:300}},iconProps:{iconName:"Filter",style:{color:"black"}},value:p,placeholder:"Filter by log text...",onChange:function(e){var t=e.target;return u("message",t.value.toLowerCase())}})),r.a.createElement("div",{className:"logs"},E.map(function(e){return r.a.createElement(d,{key:e.key,item:e})}))):r.a.createElement(K.a,{to:"/login"})}),At=a(575);a(534);Object(At.a)();var Nt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Te,null),r.a.createElement(K.d,null,r.a.createElement(K.b,{exact:!0,path:"/",component:Ve}),r.a.createElement(K.b,{exact:!0,path:"/login",component:qe}),r.a.createElement(K.b,{exact:!0,path:"/users",component:Et}),r.a.createElement(K.b,{exact:!0,path:"/transactions",component:Dt}),r.a.createElement(K.b,{exact:!0,path:"/logs",component:jt})),r.a.createElement(xe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pt={key:"root",storage:f.a},Rt=Object(u.a)(Pt,V),xt=Object(i.d)(Rt,Object(i.a)(s.a)),It=Object(u.b)(xt);window.persistor=It,c.a.render(r.a.createElement(l.a,{store:xt},r.a.createElement(d.a,{loading:null,persistor:It},r.a.createElement(p.a,null,r.a.createElement(Nt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[314,1,2]]]);
//# sourceMappingURL=main.57bd7f7c.chunk.js.map